{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, onMounted } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { residentUpdatesService } from '../../services/residentService';\nexport default {\n  __name: 'DisasterUpdatesList',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const router = useRouter();\n    const updates = ref([]);\n    const loading = ref(false);\n    const error = ref(null);\n    const pagination = ref(null);\n    const fetchUpdates = async () => {\n      loading.value = true;\n      error.value = null;\n      try {\n        const response = await residentUpdatesService.getDisasterUpdates();\n        updates.value = response.data.data || response.data || [];\n        pagination.value = response.data.current_page ? {\n          current_page: response.data.current_page,\n          last_page: response.data.last_page\n        } : null;\n      } catch (err) {\n        error.value = 'Failed to load disaster updates.';\n        updates.value = [];\n      } finally {\n        loading.value = false;\n      }\n    };\n    const goToDetail = id => {\n      router.push(`/resident_pages/disaster-updates/${id}`);\n    };\n    const formatDate = d => new Date(d).toLocaleString();\n    const getTimeAgo = d => {\n      const seconds = (new Date() - new Date(d)) / 1000;\n      if (seconds < 60) return `${Math.floor(seconds)}s ago`;\n      if (seconds < 3600) return `${Math.floor(seconds / 60)}m ago`;\n      if (seconds < 86400) return `${Math.floor(seconds / 3600)}h ago`;\n      return `${Math.floor(seconds / 86400)}d ago`;\n    };\n    const ucfirst = s => {\n      const str = s || '';\n      return str ? str.charAt(0).toUpperCase() + str.slice(1) : '';\n    };\n    onMounted(fetchUpdates);\n    const __returned__ = {\n      router,\n      updates,\n      loading,\n      error,\n      pagination,\n      fetchUpdates,\n      goToDetail,\n      formatDate,\n      getTimeAgo,\n      ucfirst,\n      ref,\n      onMounted,\n      get useRouter() {\n        return useRouter;\n      },\n      get residentUpdatesService() {\n        return residentUpdatesService;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","useRouter","residentUpdatesService","router","updates","loading","error","pagination","fetchUpdates","value","response","getDisasterUpdates","data","current_page","last_page","err","goToDetail","id","push","formatDate","d","Date","toLocaleString","getTimeAgo","seconds","Math","floor","ucfirst","s","str","charAt","toUpperCase","slice"],"sources":["C:/VUEprojects/crud-app/src/pages/resident_pages/DisasterUpdatesList.vue"],"sourcesContent":["<template>\r\n  <div class=\"updates-container\">\r\n\r\n    <div class=\"header-row\">\r\n      <h1 class=\"header-title\">ðŸš¨ Disaster Updates</h1>\r\n    </div>\r\n\r\n    <div v-if=\"loading\" class=\"loading\">Loading disaster updates...</div>\r\n\r\n    <div v-if=\"error\" class=\"error-box\">{{ error }}</div>\r\n\r\n    <div v-if=\"!loading && !error && (!updates || updates.length === 0)\" class=\"empty\">\r\n      No disaster updates available.\r\n    </div>\r\n\r\n    <div v-if=\"!loading && !error && updates && updates.length > 0\" class=\"updates-list\">\r\n\r\n      <div \r\n        v-for=\"update in updates\"\r\n        :key=\"update.id\"\r\n        class=\"update-card\"\r\n        :class=\"update.severity\"\r\n        @click=\"goToDetail(update.id)\"\r\n      >\r\n\r\n        <div class=\"update-header\">\r\n          <h3 class=\"update-title\">{{ update.title }}</h3>\r\n\r\n          <span class=\"badge\" :class=\"update.severity || ''\">\r\n            {{ ucfirst(update.severity) }}\r\n          </span>\r\n\r\n          <span class=\"badge gray\">\r\n            {{ ucfirst(update.disaster_type) }}\r\n          </span>\r\n        </div>\r\n\r\n        <p class=\"update-info\">\r\n          {{ update.source }} â€¢ {{ formatDate(update.issued_at) }}\r\n          ({{ getTimeAgo(update.issued_at) }})\r\n        </p>\r\n\r\n        <p class=\"update-desc\">{{ update.description }}</p>\r\n\r\n        <button \r\n          @click.stop=\"goToDetail(update.id)\"\r\n          class=\"btn btn-blue btn-sm\"\r\n        >\r\n          View Details\r\n        </button>\r\n\r\n      </div>\r\n    </div>\r\n\r\n    <div v-if=\"pagination\" class=\"pagination\">\r\n      <button \r\n        v-if=\"pagination.current_page > 1\"\r\n        @click=\"fetchUpdates(pagination.current_page - 1)\"\r\n        class=\"btn btn-gray\"\r\n      >\r\n        Previous\r\n      </button>\r\n\r\n      <span class=\"page-info\">\r\n        Page {{ pagination.current_page }} of {{ pagination.last_page }}\r\n      </span>\r\n\r\n      <button \r\n        v-if=\"pagination.current_page < pagination.last_page\"\r\n        @click=\"fetchUpdates(pagination.current_page + 1)\"\r\n        class=\"btn btn-gray\"\r\n      >\r\n        Next\r\n      </button>\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport { residentUpdatesService } from '../../services/residentService'\r\n\r\nconst router = useRouter()\r\n\r\nconst updates = ref([])\r\nconst loading = ref(false)\r\nconst error = ref(null)\r\nconst pagination = ref(null)\r\n\r\nconst fetchUpdates = async () => {\r\n  loading.value = true\r\n  error.value = null\r\n  try {\r\n    const response = await residentUpdatesService.getDisasterUpdates()\r\n    updates.value = response.data.data || response.data || []\r\n    pagination.value = response.data.current_page\r\n      ? {\r\n          current_page: response.data.current_page,\r\n          last_page: response.data.last_page\r\n        }\r\n      : null\r\n  } catch (err) {\r\n    error.value = 'Failed to load disaster updates.'\r\n    updates.value = []\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\nconst goToDetail = (id) => {\r\n  router.push(`/resident_pages/disaster-updates/${id}`)\r\n}\r\n\r\nconst formatDate = (d) => new Date(d).toLocaleString()\r\n\r\nconst getTimeAgo = (d) => {\r\n  const seconds = (new Date() - new Date(d)) / 1000\r\n  if (seconds < 60) return `${Math.floor(seconds)}s ago`\r\n  if (seconds < 3600) return `${Math.floor(seconds / 60)}m ago`\r\n  if (seconds < 86400) return `${Math.floor(seconds / 3600)}h ago`\r\n  return `${Math.floor(seconds / 86400)}d ago`\r\n}\r\n\r\nconst ucfirst = (s) => {\r\n  const str = s || ''\r\n  return str ? str.charAt(0).toUpperCase() + str.slice(1) : ''\r\n}\r\n\r\nonMounted(fetchUpdates)\r\n</script>\r\n\r\n<style>\r\n.updates-container {\r\n  padding: 24px;\r\n  min-height: 100vh;\r\n  background: #f4f6fb;\r\n  font-family: \"Segoe UI\", system-ui, sans-serif;\r\n  color: #1f2937;\r\n}\r\n\r\n.header-title {\r\n  font-size: 30px;\r\n  font-weight: 800;\r\n}\r\n\r\n.updates-list {\r\n  margin-top: 24px;\r\n  display: grid;\r\n  gap: 18px;\r\n}\r\n\r\n.update-card {\r\n  position: relative;\r\n  padding: 20px;\r\n  border-radius: 18px;\r\n  background: #ffffff;\r\n  border: 1px solid #e5e7eb;\r\n  box-shadow: 0 12px 30px rgba(0,0,0,0.08);\r\n  transition: 0.3s ease;\r\n  cursor: pointer;\r\n  overflow: hidden;\r\n}\r\n\r\n.update-card::before {\r\n  content: \"\";\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  width: 6px;\r\n  height: 100%;\r\n  background: #cbd5e1;\r\n}\r\n\r\n.update-card:hover {\r\n  transform: translateY(-6px) scale(1.01);\r\n  box-shadow: 0 20px 45px rgba(0,0,0,0.15);\r\n}\r\n\r\n.update-card.critical {\r\n  background: linear-gradient(135deg, #fff5f5, #ffffff);\r\n}\r\n\r\n.update-card.critical::before {\r\n  background: #ef4444;\r\n}\r\n\r\n.update-card.high {\r\n  background: linear-gradient(135deg, #fff7ed, #ffffff);\r\n}\r\n\r\n.update-card.high::before {\r\n  background: #f97316;\r\n}\r\n\r\n.update-card.moderate {\r\n  background: linear-gradient(135deg, #fffbeb, #ffffff);\r\n}\r\n\r\n.update-card.moderate::before {\r\n  background: #facc15;\r\n}\r\n\r\n.update-card.low {\r\n  background: linear-gradient(135deg, #eff6ff, #ffffff);\r\n}\r\n\r\n.update-card.low::before {\r\n  background: #3b82f6;\r\n}\r\n\r\n.update-header {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.update-title {\r\n  font-size: 19px;\r\n  font-weight: 700;\r\n  flex: 1;\r\n}\r\n\r\n.badge {\r\n  padding: 6px 14px;\r\n  border-radius: 999px;\r\n  font-size: 11px;\r\n  font-weight: 700;\r\n  text-transform: uppercase;\r\n}\r\n\r\n.badge.critical {\r\n  background: linear-gradient(135deg, #ef4444, #dc2626);\r\n  color: white;\r\n}\r\n\r\n.badge.high {\r\n  background: linear-gradient(135deg, #f97316, #ea580c);\r\n  color: white;\r\n}\r\n\r\n.badge.moderate {\r\n  background: linear-gradient(135deg, #facc15, #eab308);\r\n  color: #422006;\r\n}\r\n\r\n.badge.low {\r\n  background: linear-gradient(135deg, #3b82f6, #2563eb);\r\n  color: white;\r\n}\r\n\r\n.badge.gray {\r\n  background: #e5e7eb;\r\n  color: #374151;\r\n}\r\n\r\n.update-info {\r\n  font-size: 13px;\r\n  color: #6b7280;\r\n  margin: 8px 0;\r\n}\r\n\r\n.update-desc {\r\n  margin: 12px 0 16px;\r\n  color: #374151;\r\n  line-height: 1.6;\r\n}\r\n\r\n.btn {\r\n  padding: 10px 16px;\r\n  border-radius: 12px;\r\n  font-size: 13px;\r\n  font-weight: 600;\r\n  border: none;\r\n  cursor: pointer;\r\n  transition: 0.25s ease;\r\n}\r\n\r\n.btn-sm {\r\n  padding: 8px 14px;\r\n}\r\n\r\n.btn-blue {\r\n  background: linear-gradient(135deg, #2563eb, #1d4ed8);\r\n  color: white;\r\n}\r\n\r\n.btn-blue:hover {\r\n  transform: scale(1.05);\r\n  box-shadow: 0 10px 22px rgba(37,99,235,0.35);\r\n}\r\n\r\n.btn-gray {\r\n  background: #e5e7eb;\r\n  color: #374151;\r\n}\r\n\r\n.btn-gray:hover {\r\n  background: #d1d5db;\r\n}\r\n\r\n.pagination {\r\n  margin-top: 28px;\r\n  display: flex;\r\n  justify-content: center;\r\n  gap: 12px;\r\n}\r\n\r\n.page-info {\r\n  font-size: 14px;\r\n  color: #4b5563;\r\n}\r\n\r\n.loading,\r\n.empty {\r\n  text-align: center;\r\n  padding: 30px;\r\n  color: #6b7280;\r\n}\r\n\r\n.error-box {\r\n  background: linear-gradient(135deg, #fee2e2, #fecaca);\r\n  border: 1px solid #fca5a5;\r\n  padding: 14px;\r\n  border-radius: 14px;\r\n  color: #991b1b;\r\n}\r\n</style>\r\n"],"mappings":";AAgFA,SAASA,GAAG,EAAEC,SAAS,QAAQ,KAAK;AACpC,SAASC,SAAS,QAAQ,YAAY;AACtC,SAASC,sBAAsB,QAAQ,gCAAgC;;;;;;;IAEvE,MAAMC,MAAM,GAAGF,SAAS,CAAC,CAAC;IAE1B,MAAMG,OAAO,GAAGL,GAAG,CAAC,EAAE,CAAC;IACvB,MAAMM,OAAO,GAAGN,GAAG,CAAC,KAAK,CAAC;IAC1B,MAAMO,KAAK,GAAGP,GAAG,CAAC,IAAI,CAAC;IACvB,MAAMQ,UAAU,GAAGR,GAAG,CAAC,IAAI,CAAC;IAE5B,MAAMS,YAAY,GAAG,MAAAA,CAAA,KAAY;MAC/BH,OAAO,CAACI,KAAK,GAAG,IAAI;MACpBH,KAAK,CAACG,KAAK,GAAG,IAAI;MAClB,IAAI;QACF,MAAMC,QAAQ,GAAG,MAAMR,sBAAsB,CAACS,kBAAkB,CAAC,CAAC;QAClEP,OAAO,CAACK,KAAK,GAAGC,QAAQ,CAACE,IAAI,CAACA,IAAI,IAAIF,QAAQ,CAACE,IAAI,IAAI,EAAE;QACzDL,UAAU,CAACE,KAAK,GAAGC,QAAQ,CAACE,IAAI,CAACC,YAAY,GACzC;UACEA,YAAY,EAAEH,QAAQ,CAACE,IAAI,CAACC,YAAY;UACxCC,SAAS,EAAEJ,QAAQ,CAACE,IAAI,CAACE;QAC3B,CAAC,GACD,IAAI;MACV,CAAC,CAAC,OAAOC,GAAG,EAAE;QACZT,KAAK,CAACG,KAAK,GAAG,kCAAkC;QAChDL,OAAO,CAACK,KAAK,GAAG,EAAE;MACpB,CAAC,SAAS;QACRJ,OAAO,CAACI,KAAK,GAAG,KAAK;MACvB;IACF,CAAC;IAED,MAAMO,UAAU,GAAIC,EAAE,IAAK;MACzBd,MAAM,CAACe,IAAI,CAAC,oCAAoCD,EAAE,EAAE,CAAC;IACvD,CAAC;IAED,MAAME,UAAU,GAAIC,CAAC,IAAK,IAAIC,IAAI,CAACD,CAAC,CAAC,CAACE,cAAc,CAAC,CAAC;IAEtD,MAAMC,UAAU,GAAIH,CAAC,IAAK;MACxB,MAAMI,OAAO,GAAG,CAAC,IAAIH,IAAI,CAAC,CAAC,GAAG,IAAIA,IAAI,CAACD,CAAC,CAAC,IAAI,IAAI;MACjD,IAAII,OAAO,GAAG,EAAE,EAAE,OAAO,GAAGC,IAAI,CAACC,KAAK,CAACF,OAAO,CAAC,OAAO;MACtD,IAAIA,OAAO,GAAG,IAAI,EAAE,OAAO,GAAGC,IAAI,CAACC,KAAK,CAACF,OAAO,GAAG,EAAE,CAAC,OAAO;MAC7D,IAAIA,OAAO,GAAG,KAAK,EAAE,OAAO,GAAGC,IAAI,CAACC,KAAK,CAACF,OAAO,GAAG,IAAI,CAAC,OAAO;MAChE,OAAO,GAAGC,IAAI,CAACC,KAAK,CAACF,OAAO,GAAG,KAAK,CAAC,OAAO;IAC9C,CAAC;IAED,MAAMG,OAAO,GAAIC,CAAC,IAAK;MACrB,MAAMC,GAAG,GAAGD,CAAC,IAAI,EAAE;MACnB,OAAOC,GAAG,GAAGA,GAAG,CAACC,MAAM,CAAC,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,GAAGF,GAAG,CAACG,KAAK,CAAC,CAAC,CAAC,GAAG,EAAE;IAC9D,CAAC;IAEDhC,SAAS,CAACQ,YAAY,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}