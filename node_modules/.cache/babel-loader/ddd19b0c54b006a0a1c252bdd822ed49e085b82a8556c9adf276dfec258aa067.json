{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = {\n  class: \"space-y-6\"\n};\nconst _hoisted_2 = {\n  class: \"flex items-center justify-between\"\n};\nconst _hoisted_3 = [\"disabled\"];\nconst _hoisted_4 = {\n  key: 0\n};\nconst _hoisted_5 = {\n  key: 1\n};\nconst _hoisted_6 = {\n  key: 0,\n  class: \"text-center py-8\"\n};\nconst _hoisted_7 = {\n  key: 1,\n  class: \"text-red-700\"\n};\nconst _hoisted_8 = {\n  key: 2,\n  class: \"text-center py-8\"\n};\nconst _hoisted_9 = {\n  key: 3,\n  class: \"space-y-4\"\n};\nconst _hoisted_10 = [\"onClick\"];\nconst _hoisted_11 = {\n  class: \"flex items-start justify-between\"\n};\nconst _hoisted_12 = {\n  class: \"text-lg font-semibold\"\n};\nconst _hoisted_13 = {\n  class: \"flex items-center gap-2 text-sm text-gray-600\"\n};\nconst _hoisted_14 = {\n  class: \"badge bg-gray-200 px-2 py-1 rounded\"\n};\nconst _hoisted_15 = {\n  class: \"text-sm text-gray-700 mt-2\"\n};\nconst _hoisted_16 = {\n  class: \"text-sm text-gray-500\"\n};\nconst _hoisted_17 = {\n  class: \"flex items-center justify-center gap-2\"\n};\nconst _hoisted_18 = {\n  key: 1\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[2] || (_cache[2] = _createElementVNode(\"h1\", {\n    class: \"text-3xl font-bold\"\n  }, \"üîÆ Disaster Predictions\", -1 /* CACHED */)), _createElementVNode(\"button\", {\n    onClick: $setup.syncPredictions,\n    disabled: $setup.syncing,\n    class: \"px-4 py-2 bg-green-600 text-white rounded\"\n  }, [!$setup.syncing ? (_openBlock(), _createElementBlock(\"span\", _hoisted_4, \"üîÑ Sync Predictions\")) : (_openBlock(), _createElementBlock(\"span\", _hoisted_5, \"‚è≥ Syncing...\"))], 8 /* PROPS */, _hoisted_3)]), _cache[3] || (_cache[3] = _createElementVNode(\"div\", {\n    class: \"bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-sm text-yellow-800\"\n  }, [_createElementVNode(\"strong\", null, \"üì° Data Sources:\"), _createTextVNode(\" Predictions are generated from PAGASA, PhiVolcs, and NDRRMC. \")], -1 /* CACHED */)), $setup.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, \"Loading predictions...\")) : _createCommentVNode(\"v-if\", true), $setup.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, _toDisplayString($setup.error), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), !$setup.loading && $setup.predictions.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, \"No predictions available.\")) : _createCommentVNode(\"v-if\", true), $setup.predictions.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.predictions, p => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: p.id,\n      class: \"border rounded p-4 hover:shadow-md cursor-pointer\",\n      onClick: $event => $setup.goToDetail(p.id)\n    }, [_createElementVNode(\"div\", _hoisted_11, [_createElementVNode(\"div\", null, [_createElementVNode(\"h3\", _hoisted_12, _toDisplayString(p.location_name || 'Unknown Location'), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_13, [_createElementVNode(\"span\", _hoisted_14, _toDisplayString(p.disaster_type), 1 /* TEXT */), _createElementVNode(\"span\", {\n      class: _normalizeClass(['px-2 py-1 rounded font-semibold', $setup.severityClass(p.risk_level)])\n    }, \"Risk: \" + _toDisplayString(p.risk_level) + \"/10\", 3 /* TEXT, CLASS */)]), _createElementVNode(\"p\", _hoisted_15, _toDisplayString(p.prediction_factors || p.description || ''), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_16, _toDisplayString($setup.formatDate(p.predicted_at)), 1 /* TEXT */)])], 8 /* PROPS */, _hoisted_10);\n  }), 128 /* KEYED_FRAGMENT */)), _createElementVNode(\"div\", _hoisted_17, [$setup.pagination && $setup.pagination.current_page > 1 ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 0,\n    onClick: _cache[0] || (_cache[0] = $event => $setup.fetchPredictions($setup.pagination.current_page - 1)),\n    class: \"px-3 py-2 bg-gray-200 rounded\"\n  }, \"Previous\")) : _createCommentVNode(\"v-if\", true), $setup.pagination ? (_openBlock(), _createElementBlock(\"span\", _hoisted_18, \"Page \" + _toDisplayString($setup.pagination.current_page) + \" of \" + _toDisplayString($setup.pagination.last_page), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), $setup.pagination && $setup.pagination.current_page < $setup.pagination.last_page ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 2,\n    onClick: _cache[1] || (_cache[1] = $event => $setup.fetchPredictions($setup.pagination.current_page + 1)),\n    class: \"px-3 py-2 bg-gray-200 rounded\"\n  }, \"Next\")) : _createCommentVNode(\"v-if\", true)])])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","onClick","$setup","syncPredictions","disabled","syncing","_hoisted_4","_hoisted_5","loading","_hoisted_6","error","_hoisted_7","_toDisplayString","predictions","length","_hoisted_8","_hoisted_9","_Fragment","_renderList","p","key","id","$event","goToDetail","_hoisted_11","_hoisted_12","location_name","_hoisted_13","_hoisted_14","disaster_type","_normalizeClass","severityClass","risk_level","_hoisted_15","prediction_factors","description","_hoisted_16","formatDate","predicted_at","_hoisted_17","pagination","current_page","_cache","fetchPredictions","_hoisted_18","last_page"],"sources":["C:\\VUEprojects\\crud-app\\src\\pages\\resident_pages\\DisasterPredictionsList.vue"],"sourcesContent":["<template>\r\n  <div class=\"space-y-6\">\r\n    <div class=\"flex items-center justify-between\">\r\n      <h1 class=\"text-3xl font-bold\">üîÆ Disaster Predictions</h1>\r\n      <button @click=\"syncPredictions\" :disabled=\"syncing\" class=\"px-4 py-2 bg-green-600 text-white rounded\">\r\n        <span v-if=\"!syncing\">üîÑ Sync Predictions</span>\r\n        <span v-else>‚è≥ Syncing...</span>\r\n      </button>\r\n    </div>\r\n\r\n    <div class=\"bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-sm text-yellow-800\">\r\n      <strong>üì° Data Sources:</strong> Predictions are generated from PAGASA, PhiVolcs, and NDRRMC.\r\n    </div>\r\n\r\n    <div v-if=\"loading\" class=\"text-center py-8\">Loading predictions...</div>\r\n    <div v-if=\"error\" class=\"text-red-700\">{{ error }}</div>\r\n\r\n    <div v-if=\"!loading && predictions.length === 0\" class=\"text-center py-8\">No predictions available.</div>\r\n\r\n    <div v-if=\"predictions.length > 0\" class=\"space-y-4\">\r\n      <div v-for=\"p in predictions\" :key=\"p.id\" class=\"border rounded p-4 hover:shadow-md cursor-pointer\" @click=\"goToDetail(p.id)\">\r\n        <div class=\"flex items-start justify-between\">\r\n          <div>\r\n            <h3 class=\"text-lg font-semibold\">{{ p.location_name || 'Unknown Location' }}</h3>\r\n            <div class=\"flex items-center gap-2 text-sm text-gray-600\">\r\n              <span class=\"badge bg-gray-200 px-2 py-1 rounded\">{{ p.disaster_type }}</span>\r\n              <span :class=\"['px-2 py-1 rounded font-semibold', severityClass(p.risk_level)]\">Risk: {{ p.risk_level }}/10</span>\r\n            </div>\r\n            <p class=\"text-sm text-gray-700 mt-2\">{{ p.prediction_factors || p.description || '' }}</p>\r\n          </div>\r\n          <div class=\"text-sm text-gray-500\">{{ formatDate(p.predicted_at) }}</div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"flex items-center justify-center gap-2\">\r\n        <button v-if=\"pagination && pagination.current_page > 1\" @click=\"fetchPredictions(pagination.current_page - 1)\" class=\"px-3 py-2 bg-gray-200 rounded\">Previous</button>\r\n        <span v-if=\"pagination\">Page {{ pagination.current_page }} of {{ pagination.last_page }}</span>\r\n        <button v-if=\"pagination && pagination.current_page < pagination.last_page\" @click=\"fetchPredictions(pagination.current_page + 1)\" class=\"px-3 py-2 bg-gray-200 rounded\">Next</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, inject, onMounted } from 'vue';\r\nimport { useRouter } from 'vue-router';\r\n\r\nconst residentAxios = inject('residentAxios');\r\nconst router = useRouter();\r\n\r\nconst predictions = ref([]);\r\nconst loading = ref(false);\r\nconst error = ref(null);\r\nconst syncing = ref(false);\r\nconst pagination = ref(null);\r\n\r\nconst fetchPredictions = async (page = 1) => {\r\n  loading.value = true;\r\n  error.value = null;\r\n  try {\r\n    const res = await residentAxios.get('/disaster-predictions', { params: { page } });\r\n    if (res.data && res.data.data) {\r\n      predictions.value = res.data.data;\r\n      pagination.value = {\r\n        current_page: res.data.current_page,\r\n        last_page: res.data.last_page,\r\n        total: res.data.total,\r\n      };\r\n    } else if (Array.isArray(res.data)) {\r\n      predictions.value = res.data;\r\n      pagination.value = null;\r\n    }\r\n  } catch (e) {\r\n    console.error('[Pred] Fetch error', e);\r\n    error.value = 'Failed to load predictions.';\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n};\r\n\r\nconst syncPredictions = async () => {\r\n  syncing.value = true;\r\n  try {\r\n    const res = await residentAxios.post('/real-time-data/sync');\r\n    if (res.data && res.data.success) {\r\n      alert('Sync successful: ' + (res.data.message || ''));\r\n      fetchPredictions(1);\r\n    } else {\r\n      alert('Sync failed');\r\n    }\r\n  } catch (e) {\r\n    console.error('[Pred] Sync error', e);\r\n    alert('Error syncing predictions');\r\n  } finally {\r\n    syncing.value = false;\r\n  }\r\n};\r\n\r\nconst goToDetail = (id) => router.push({ path: `/resident_pages/disaster-predictions/${id}` });\r\n\r\nconst formatDate = (s) => {\r\n  if (!s) return 'N/A';\r\n  try { return new Date(s).toLocaleString(); } catch { return s; }\r\n};\r\n\r\nconst severityClass = (lvl) => {\r\n  if (!lvl && lvl !== 0) return 'bg-gray-200 text-gray-800';\r\n  if (lvl >= 8) return 'bg-red-600 text-white';\r\n  if (lvl >= 6) return 'bg-orange-600 text-white';\r\n  if (lvl >= 4) return 'bg-yellow-600 text-white';\r\n  return 'bg-green-600 text-white';\r\n};\r\n\r\nonMounted(() => fetchPredictions(1));\r\n</script>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}