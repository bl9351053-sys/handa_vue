{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport { ref, onMounted, computed } from 'vue';\nimport AuthService from '../services/AuthService.js';\nexport default {\n  __name: 'LoginHistoryPage',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const loginHistory = ref([]);\n    const loading = ref(true);\n    const error = ref(null);\n    const successfulLogins = computed(() => {\n      return loginHistory.value.filter(login => login.successful).length;\n    });\n    const failedLogins = computed(() => {\n      return loginHistory.value.filter(login => !login.successful).length;\n    });\n    const fetchLoginHistory = async () => {\n      try {\n        loading.value = true;\n        error.value = null;\n        const response = await AuthService.get('/login-history');\n        loginHistory.value = response.data;\n      } catch (err) {\n        console.error('Failed to fetch login history:', err);\n        error.value = 'Failed to load login history. Please try again.';\n      } finally {\n        loading.value = false;\n      }\n    };\n    const formatDateTime = dateString => {\n      if (!dateString) return 'N/A';\n      const date = new Date(dateString);\n      const now = new Date();\n      const diffInHours = Math.floor((now - date) / (1000 * 60 * 60));\n      if (diffInHours < 1) {\n        return 'Just now';\n      } else if (diffInHours < 24) {\n        return `${diffInHours} hour${diffInHours > 1 ? 's' : ''} ago`;\n      } else {\n        return date.toLocaleDateString('en-US', {\n          year: 'numeric',\n          month: 'short',\n          day: 'numeric',\n          hour: '2-digit',\n          minute: '2-digit'\n        });\n      }\n    };\n    onMounted(() => {\n      fetchLoginHistory();\n    });\n    const __returned__ = {\n      loginHistory,\n      loading,\n      error,\n      successfulLogins,\n      failedLogins,\n      fetchLoginHistory,\n      formatDateTime,\n      ref,\n      onMounted,\n      computed,\n      get AuthService() {\n        return AuthService;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","computed","AuthService","loginHistory","loading","error","successfulLogins","value","filter","login","successful","length","failedLogins","fetchLoginHistory","response","get","data","err","console","formatDateTime","dateString","date","Date","now","diffInHours","Math","floor","toLocaleDateString","year","month","day","hour","minute"],"sources":["C:/VUEprojects/crud-app/src/pages/LoginHistoryPage.vue"],"sourcesContent":["<template>\r\n  <div class=\"login-history-page\">\r\n    <div class=\"container\">\r\n      <div class=\"header\">\r\n        <button @click=\"$router.go(-1)\" class=\"back-btn\">\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 19l-7-7 7-7\" />\r\n          </svg>\r\n          Back to Settings\r\n        </button>\r\n        <h1 class=\"page-title\">Login History</h1>\r\n      </div>\r\n\r\n      <div v-if=\"loading\" class=\"loading\">\r\n        <div class=\"spinner\"></div>\r\n        <p>Loading login history...</p>\r\n      </div>\r\n\r\n      <div v-else-if=\"error\" class=\"error\">\r\n        <p>{{ error }}</p>\r\n        <button @click=\"fetchLoginHistory\" class=\"retry-btn\">Retry</button>\r\n      </div>\r\n\r\n      <div v-else-if=\"loginHistory.length === 0\" class=\"empty-state\">\r\n        <div class=\"empty-icon\">\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" />\r\n          </svg>\r\n        </div>\r\n        <h3>No Login History</h3>\r\n        <p>Your login history will appear here.</p>\r\n      </div>\r\n\r\n      <div v-else class=\"history-container\">\r\n        <div class=\"history-stats\">\r\n          <div class=\"stat-card\">\r\n            <div class=\"stat-number\">{{ loginHistory.length }}</div>\r\n            <div class=\"stat-label\">Total Logins</div>\r\n          </div>\r\n          <div class=\"stat-card\">\r\n            <div class=\"stat-number\">{{ successfulLogins }}</div>\r\n            <div class=\"stat-label\">Successful</div>\r\n          </div>\r\n          <div class=\"stat-card\">\r\n            <div class=\"stat-number\">{{ failedLogins }}</div>\r\n            <div class=\"stat-label\">Failed</div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"history-list\">\r\n          <div class=\"history-header\">\r\n            <h2>Recent Login Activity</h2>\r\n          </div>\r\n\r\n          <div class=\"history-items\">\r\n            <div\r\n              v-for=\"login in loginHistory\"\r\n              :key=\"login.id\"\r\n              class=\"history-item\"\r\n              :class=\"{ 'failed': !login.success }\"\r\n            >\r\n              <div class=\"login-icon\">\r\n                <svg v-if=\"login.success\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n                </svg>\r\n                <svg v-else xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\" />\r\n                </svg>\r\n              </div>\r\n\r\n              <div class=\"login-details\">\r\n                <div class=\"login-status\">\r\n                  <span class=\"status-badge\" :class=\"{ 'success': login.success, 'failed': !login.success }\">\r\n                    {{ login.success ? 'Successful' : 'Failed' }}\r\n                  </span>\r\n                </div>\r\n                <div class=\"login-time\">{{ formatDateTime(login.created_at) }}</div>\r\n                <div class=\"login-info\">\r\n                  <span v-if=\"login.ip_address\">IP: {{ login.ip_address }}</span>\r\n                  <span v-if=\"login.user_agent && login.user_agent.length > 50\">\r\n                    {{ login.user_agent.substring(0, 50) }}...\r\n                  </span>\r\n                  <span v-else-if=\"login.user_agent\">{{ login.user_agent }}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, computed } from 'vue'\r\nimport AuthService from '../services/AuthService.js'\r\n\r\nconst loginHistory = ref([])\r\nconst loading = ref(true)\r\nconst error = ref(null)\r\n\r\nconst successfulLogins = computed(() => {\r\n  return loginHistory.value.filter(login => login.successful).length\r\n})\r\n\r\nconst failedLogins = computed(() => {\r\n  return loginHistory.value.filter(login => !login.successful).length\r\n})\r\n\r\nconst fetchLoginHistory = async () => {\r\n  try {\r\n    loading.value = true\r\n    error.value = null\r\n    const response = await AuthService.get('/login-history')\r\n    loginHistory.value = response.data\r\n  } catch (err) {\r\n    console.error('Failed to fetch login history:', err)\r\n    error.value = 'Failed to load login history. Please try again.'\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\nconst formatDateTime = (dateString) => {\r\n  if (!dateString) return 'N/A'\r\n  const date = new Date(dateString)\r\n  const now = new Date()\r\n  const diffInHours = Math.floor((now - date) / (1000 * 60 * 60))\r\n\r\n  if (diffInHours < 1) {\r\n    return 'Just now'\r\n  } else if (diffInHours < 24) {\r\n    return `${diffInHours} hour${diffInHours > 1 ? 's' : ''} ago`\r\n  } else {\r\n    return date.toLocaleDateString('en-US', {\r\n      year: 'numeric',\r\n      month: 'short',\r\n      day: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    })\r\n  }\r\n}\r\n\r\nonMounted(() => {\r\n  fetchLoginHistory()\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.login-history-page {\r\n  padding: 20px;\r\n  background-color: #f8f9fa;\r\n  min-height: 100vh;\r\n}\r\n\r\n.container {\r\n  max-width: 1000px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.header {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 20px;\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.back-btn {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  padding: 10px 16px;\r\n  background: white;\r\n  border: 1px solid #e5e7eb;\r\n  border-radius: 8px;\r\n  color: #374151;\r\n  text-decoration: none;\r\n  font-weight: 500;\r\n  transition: all 0.2s ease;\r\n  cursor: pointer;\r\n}\r\n\r\n.back-btn:hover {\r\n  background: #f9fafb;\r\n  border-color: #d1d5db;\r\n}\r\n\r\n.back-btn svg {\r\n  width: 16px;\r\n  height: 16px;\r\n}\r\n\r\n.page-title {\r\n  color: #333;\r\n  font-size: 2rem;\r\n  font-weight: bold;\r\n  margin: 0;\r\n}\r\n\r\n.loading {\r\n  text-align: center;\r\n  padding: 50px;\r\n}\r\n\r\n.spinner {\r\n  border: 4px solid #f3f3f3;\r\n  border-top: 4px solid #4f46e5;\r\n  border-radius: 50%;\r\n  width: 40px;\r\n  height: 40px;\r\n  animation: spin 1s linear infinite;\r\n  margin: 0 auto 20px;\r\n}\r\n\r\n@keyframes spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n\r\n.error {\r\n  background-color: #fee;\r\n  border: 1px solid #fcc;\r\n  border-radius: 8px;\r\n  padding: 20px;\r\n  text-align: center;\r\n  color: #c33;\r\n}\r\n\r\n.retry-btn {\r\n  background-color: #4f46e5;\r\n  color: white;\r\n  border: none;\r\n  padding: 10px 20px;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n  margin-top: 10px;\r\n}\r\n\r\n.retry-btn:hover {\r\n  background-color: #3730a3;\r\n}\r\n\r\n.empty-state {\r\n  text-align: center;\r\n  padding: 80px 20px;\r\n  background: white;\r\n  border-radius: 12px;\r\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.empty-icon {\r\n  width: 64px;\r\n  height: 64px;\r\n  margin: 0 auto 20px;\r\n  color: #9ca3af;\r\n}\r\n\r\n.empty-icon svg {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.empty-state h3 {\r\n  color: #374151;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.empty-state p {\r\n  color: #6b7280;\r\n}\r\n\r\n.history-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 30px;\r\n}\r\n\r\n.history-stats {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\r\n  gap: 20px;\r\n}\r\n\r\n.stat-card {\r\n  background: white;\r\n  border-radius: 12px;\r\n  padding: 24px;\r\n  text-align: center;\r\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.stat-number {\r\n  font-size: 2.5rem;\r\n  font-weight: bold;\r\n  color: #4f46e5;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.stat-label {\r\n  color: #6b7280;\r\n  font-weight: 500;\r\n}\r\n\r\n.history-list {\r\n  background: white;\r\n  border-radius: 12px;\r\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n  overflow: hidden;\r\n}\r\n\r\n.history-header {\r\n  padding: 24px;\r\n  border-bottom: 1px solid #e5e7eb;\r\n  background: linear-gradient(135deg, #4f46e5, #6366f1);\r\n  color: white;\r\n}\r\n\r\n.history-header h2 {\r\n  margin: 0;\r\n  font-size: 1.5rem;\r\n}\r\n\r\n.history-items {\r\n  max-height: 600px;\r\n  overflow-y: auto;\r\n}\r\n\r\n.history-item {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 20px 24px;\r\n  border-bottom: 1px solid #f3f4f6;\r\n  transition: background-color 0.2s ease;\r\n}\r\n\r\n.history-item:hover {\r\n  background-color: #f9fafb;\r\n}\r\n\r\n.history-item.failed {\r\n  background-color: #fef2f2;\r\n}\r\n\r\n.history-item.failed:hover {\r\n  background-color: #fee2e2;\r\n}\r\n\r\n.login-icon {\r\n  width: 40px;\r\n  height: 40px;\r\n  border-radius: 50%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  margin-right: 16px;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.history-item:not(.failed) .login-icon {\r\n  background-color: #d1fae5;\r\n  color: #065f46;\r\n}\r\n\r\n.history-item.failed .login-icon {\r\n  background-color: #fee2e2;\r\n  color: #dc2626;\r\n}\r\n\r\n.login-icon svg {\r\n  width: 20px;\r\n  height: 20px;\r\n}\r\n\r\n.login-details {\r\n  flex: 1;\r\n}\r\n\r\n.login-status {\r\n  margin-bottom: 4px;\r\n}\r\n\r\n.status-badge {\r\n  padding: 4px 12px;\r\n  border-radius: 20px;\r\n  font-size: 0.875rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.status-badge.success {\r\n  background-color: #d1fae5;\r\n  color: #065f46;\r\n}\r\n\r\n.status-badge.failed {\r\n  background-color: #fee2e2;\r\n  color: #dc2626;\r\n}\r\n\r\n.login-time {\r\n  font-weight: 600;\r\n  color: #374151;\r\n  margin-bottom: 4px;\r\n}\r\n\r\n.login-info {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 2px;\r\n  font-size: 0.875rem;\r\n  color: #6b7280;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .login-history-page {\r\n    padding: 10px;\r\n  }\r\n\r\n  .header {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: 15px;\r\n  }\r\n\r\n  .page-title {\r\n    font-size: 1.5rem;\r\n  }\r\n\r\n  .history-stats {\r\n    grid-template-columns: 1fr;\r\n  }\r\n\r\n  .history-item {\r\n    padding: 16px;\r\n  }\r\n\r\n  .login-details {\r\n    flex: 1;\r\n  }\r\n\r\n  .login-info {\r\n    font-size: 0.8rem;\r\n  }\r\n}\r\n</style>\r\n"],"mappings":";;AA8FA,SAASA,GAAG,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,KAAK;AAC9C,OAAOC,WAAW,MAAM,4BAA4B;;;;;;;IAEpD,MAAMC,YAAY,GAAGJ,GAAG,CAAC,EAAE,CAAC;IAC5B,MAAMK,OAAO,GAAGL,GAAG,CAAC,IAAI,CAAC;IACzB,MAAMM,KAAK,GAAGN,GAAG,CAAC,IAAI,CAAC;IAEvB,MAAMO,gBAAgB,GAAGL,QAAQ,CAAC,MAAM;MACtC,OAAOE,YAAY,CAACI,KAAK,CAACC,MAAM,CAACC,KAAK,IAAIA,KAAK,CAACC,UAAU,CAAC,CAACC,MAAM;IACpE,CAAC,CAAC;IAEF,MAAMC,YAAY,GAAGX,QAAQ,CAAC,MAAM;MAClC,OAAOE,YAAY,CAACI,KAAK,CAACC,MAAM,CAACC,KAAK,IAAI,CAACA,KAAK,CAACC,UAAU,CAAC,CAACC,MAAM;IACrE,CAAC,CAAC;IAEF,MAAME,iBAAiB,GAAG,MAAAA,CAAA,KAAY;MACpC,IAAI;QACFT,OAAO,CAACG,KAAK,GAAG,IAAI;QACpBF,KAAK,CAACE,KAAK,GAAG,IAAI;QAClB,MAAMO,QAAQ,GAAG,MAAMZ,WAAW,CAACa,GAAG,CAAC,gBAAgB,CAAC;QACxDZ,YAAY,CAACI,KAAK,GAAGO,QAAQ,CAACE,IAAI;MACpC,CAAC,CAAC,OAAOC,GAAG,EAAE;QACZC,OAAO,CAACb,KAAK,CAAC,gCAAgC,EAAEY,GAAG,CAAC;QACpDZ,KAAK,CAACE,KAAK,GAAG,iDAAiD;MACjE,CAAC,SAAS;QACRH,OAAO,CAACG,KAAK,GAAG,KAAK;MACvB;IACF,CAAC;IAED,MAAMY,cAAc,GAAIC,UAAU,IAAK;MACrC,IAAI,CAACA,UAAU,EAAE,OAAO,KAAK;MAC7B,MAAMC,IAAI,GAAG,IAAIC,IAAI,CAACF,UAAU,CAAC;MACjC,MAAMG,GAAG,GAAG,IAAID,IAAI,CAAC,CAAC;MACtB,MAAME,WAAW,GAAGC,IAAI,CAACC,KAAK,CAAC,CAACH,GAAG,GAAGF,IAAI,KAAK,IAAI,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;MAE/D,IAAIG,WAAW,GAAG,CAAC,EAAE;QACnB,OAAO,UAAU;MACnB,CAAC,MAAM,IAAIA,WAAW,GAAG,EAAE,EAAE;QAC3B,OAAO,GAAGA,WAAW,QAAQA,WAAW,GAAG,CAAC,GAAG,GAAG,GAAG,EAAE,MAAM;MAC/D,CAAC,MAAM;QACL,OAAOH,IAAI,CAACM,kBAAkB,CAAC,OAAO,EAAE;UACtCC,IAAI,EAAE,SAAS;UACfC,KAAK,EAAE,OAAO;UACdC,GAAG,EAAE,SAAS;UACdC,IAAI,EAAE,SAAS;UACfC,MAAM,EAAE;QACV,CAAC,CAAC;MACJ;IACF,CAAC;IAEDhC,SAAS,CAAC,MAAM;MACda,iBAAiB,CAAC,CAAC;IACrB,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}