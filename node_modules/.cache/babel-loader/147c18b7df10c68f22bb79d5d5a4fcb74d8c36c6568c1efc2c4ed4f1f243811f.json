{"ast":null,"code":"import { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, normalizeClass as _normalizeClass, normalizeStyle as _normalizeStyle, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"card\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"text-center py-8\"\n};\nconst _hoisted_3 = {\n  key: 1,\n  class: \"text-red-700 p-3\"\n};\nconst _hoisted_4 = {\n  key: 2,\n  class: \"table-container\"\n};\nconst _hoisted_5 = {\n  class: \"table\"\n};\nconst _hoisted_6 = {\n  class: \"text-muted\"\n};\nconst _hoisted_7 = {\n  class: \"badge badge-info\"\n};\nconst _hoisted_8 = {\n  class: \"risk-level-container\"\n};\nconst _hoisted_9 = {\n  class: \"risk-bar-background mt-2\"\n};\nconst _hoisted_10 = {\n  key: 0\n};\nconst _hoisted_11 = {\n  key: 1\n};\nconst _hoisted_12 = [\"onClick\"];\nconst _hoisted_13 = {\n  key: 0,\n  class: \"mt-4 pagination-container\"\n};\nconst _hoisted_14 = {\n  class: \"mx-3\"\n};\nconst _hoisted_15 = {\n  key: 3,\n  class: \"p-4 text-muted\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", null, [_createElementVNode(\"div\", _hoisted_1, [_cache[4] || (_cache[4] = _createElementVNode(\"div\", {\n    class: \"flex-between mb-4\"\n  }, [_createElementVNode(\"div\", {\n    class: \"card-header card-header-no-border\"\n  }, \"ðŸ”® Disaster Predictions & Recovery Estimates\")], -1 /* CACHED */)), _cache[5] || (_cache[5] = _createElementVNode(\"div\", {\n    class: \"info-box warning mb-4\"\n  }, [_createElementVNode(\"strong\", null, \"ðŸ“¡ Data Sources:\"), _createTextVNode(\" Predictions are automatically generated from real-time data provided by: \"), _createElementVNode(\"strong\", null, \"PAGASA\"), _createTextVNode(\", \"), _createElementVNode(\"strong\", null, \"PhiVolcs\"), _createTextVNode(\", and \"), _createElementVNode(\"strong\", null, \"NDRRMC\"), _createTextVNode(\". Click \\\"Sync\\\" to fetch latest predictions. \")], -1 /* CACHED */)), $setup.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, \"Loading predictions...\")) : _createCommentVNode(\"v-if\", true), $setup.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, _toDisplayString($setup.error), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), !$setup.loading && $setup.predictions.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [_createElementVNode(\"table\", _hoisted_5, [_cache[3] || (_cache[3] = _createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", null, \"Location\"), _createElementVNode(\"th\", null, \"Disaster Type\"), _createElementVNode(\"th\", null, \"Risk Level\"), _createElementVNode(\"th\", null, \"Recovery Days\"), _createElementVNode(\"th\", null, \"Predicted At\"), _createElementVNode(\"th\", null, \"Actions\")])], -1 /* CACHED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.predictions, p => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: p.id,\n      class: _normalizeClass($setup.rowClass(p.risk_level))\n    }, [_createElementVNode(\"td\", null, [_createElementVNode(\"strong\", null, _toDisplayString(p.location_name || 'Unknown'), 1 /* TEXT */), _cache[2] || (_cache[2] = _createElementVNode(\"br\", null, null, -1 /* CACHED */)), _createElementVNode(\"small\", _hoisted_6, _toDisplayString(p.latitude || 'N/A') + \", \" + _toDisplayString(p.longitude || 'N/A'), 1 /* TEXT */)]), _createElementVNode(\"td\", null, [_createElementVNode(\"span\", _hoisted_7, _toDisplayString($setup.capitalize(p.disaster_type)), 1 /* TEXT */)]), _createElementVNode(\"td\", null, [_createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"span\", {\n      class: _normalizeClass([\"badge\", $setup.badgeClass(p.risk_level)])\n    }, _toDisplayString(p.risk_level) + \"/10\", 3 /* TEXT, CLASS */), _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"div\", {\n      class: _normalizeClass([\"risk-bar-fill\", $setup.riskFillClass(p.risk_level)]),\n      style: _normalizeStyle({\n        width: (p.risk_level || 0) * 10 + '%'\n      })\n    }, null, 6 /* CLASS, STYLE */)])])]), _createElementVNode(\"td\", null, [p.predicted_recovery_days ? (_openBlock(), _createElementBlock(\"span\", _hoisted_10, \"~\" + _toDisplayString(p.predicted_recovery_days) + \" days\", 1 /* TEXT */)) : (_openBlock(), _createElementBlock(\"span\", _hoisted_11, \"N/A\"))]), _createElementVNode(\"td\", null, _toDisplayString($setup.formatShortDate(p.predicted_at)), 1 /* TEXT */), _createElementVNode(\"td\", null, [_createElementVNode(\"button\", {\n      class: \"btn btn-primary btn-small\",\n      onClick: _withModifiers($event => $setup.goToDetail(p.id), [\"prevent\"])\n    }, \"View\", 8 /* PROPS */, _hoisted_12)])], 2 /* CLASS */);\n  }), 128 /* KEYED_FRAGMENT */))])]), $setup.pagination ? (_openBlock(), _createElementBlock(\"div\", _hoisted_13, [$setup.pagination.current_page > 1 ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 0,\n    onClick: _cache[0] || (_cache[0] = $event => $setup.fetchPredictions($setup.pagination.current_page - 1)),\n    class: \"btn btn-secondary btn-small\"\n  }, \"Previous\")) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"span\", _hoisted_14, \"Page \" + _toDisplayString($setup.pagination.current_page) + \" of \" + _toDisplayString($setup.pagination.last_page), 1 /* TEXT */), $setup.pagination.current_page < $setup.pagination.last_page ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 1,\n    onClick: _cache[1] || (_cache[1] = $event => $setup.fetchPredictions($setup.pagination.current_page + 1)),\n    class: \"btn btn-secondary btn-small\"\n  }, \"Next\")) : _createCommentVNode(\"v-if\", true)])) : _createCommentVNode(\"v-if\", true)])) : _createCommentVNode(\"v-if\", true), !$setup.loading && $setup.predictions.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_15, \"No predictions available.\")) : _createCommentVNode(\"v-if\", true)])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_createElementVNode","_hoisted_1","$setup","loading","_hoisted_2","error","_hoisted_3","_toDisplayString","predictions","length","_hoisted_4","_hoisted_5","_Fragment","_renderList","p","key","id","_normalizeClass","rowClass","risk_level","location_name","_hoisted_6","latitude","longitude","_hoisted_7","capitalize","disaster_type","_hoisted_8","badgeClass","_hoisted_9","riskFillClass","style","_normalizeStyle","width","predicted_recovery_days","_hoisted_10","_hoisted_11","formatShortDate","predicted_at","onClick","_withModifiers","$event","goToDetail","_hoisted_12","pagination","_hoisted_13","current_page","_cache","fetchPredictions","_hoisted_14","last_page","_hoisted_15"],"sources":["C:\\VUEprojects\\crud-app\\src\\pages\\resident_pages\\DisasterPredictionsList.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"card\">\r\n      <div class=\"flex-between mb-4\">\r\n        <div class=\"card-header card-header-no-border\">ðŸ”® Disaster Predictions & Recovery Estimates</div>\r\n      </div>\r\n\r\n      <div class=\"info-box warning mb-4\">\r\n        <strong>ðŸ“¡ Data Sources:</strong> Predictions are automatically generated from real-time data provided by: <strong>PAGASA</strong>, <strong>PhiVolcs</strong>, and <strong>NDRRMC</strong>. Click \"Sync\" to fetch latest predictions.\r\n      </div>\r\n\r\n      <div v-if=\"loading\" class=\"text-center py-8\">Loading predictions...</div>\r\n      <div v-if=\"error\" class=\"text-red-700 p-3\">{{ error }}</div>\r\n\r\n      <div v-if=\"!loading && predictions.length > 0\" class=\"table-container\">\r\n        <table class=\"table\">\r\n          <thead>\r\n            <tr>\r\n              <th>Location</th>\r\n              <th>Disaster Type</th>\r\n              <th>Risk Level</th>\r\n              <th>Recovery Days</th>\r\n              <th>Predicted At</th>\r\n              <th>Actions</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"p in predictions\" :key=\"p.id\" :class=\"rowClass(p.risk_level)\">\r\n              <td>\r\n                <strong>{{ p.location_name || 'Unknown' }}</strong>\r\n                <br>\r\n                <small class=\"text-muted\">{{ p.latitude || 'N/A' }}, {{ p.longitude || 'N/A' }}</small>\r\n              </td>\r\n              <td><span class=\"badge badge-info\">{{ capitalize(p.disaster_type) }}</span></td>\r\n              <td>\r\n                <div class=\"risk-level-container\">\r\n                  <span class=\"badge\" :class=\"badgeClass(p.risk_level)\">{{ p.risk_level }}/10</span>\r\n                  <div class=\"risk-bar-background mt-2\">\r\n                    <div class=\"risk-bar-fill\" :class=\"riskFillClass(p.risk_level)\" :style=\"{ width: (p.risk_level || 0) * 10 + '%' }\"></div>\r\n                  </div>\r\n                </div>\r\n              </td>\r\n              <td>\r\n                <span v-if=\"p.predicted_recovery_days\">~{{ p.predicted_recovery_days }} days</span>\r\n                <span v-else>N/A</span>\r\n              </td>\r\n              <td>{{ formatShortDate(p.predicted_at) }}</td>\r\n              <td>\r\n                <button class=\"btn btn-primary btn-small\" @click.prevent=\"goToDetail(p.id)\">View</button>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n\r\n        <div class=\"mt-4 pagination-container\" v-if=\"pagination\">\r\n          <button v-if=\"pagination.current_page > 1\" @click=\"fetchPredictions(pagination.current_page - 1)\" class=\"btn btn-secondary btn-small\">Previous</button>\r\n          <span class=\"mx-3\">Page {{ pagination.current_page }} of {{ pagination.last_page }}</span>\r\n          <button v-if=\"pagination.current_page < pagination.last_page\" @click=\"fetchPredictions(pagination.current_page + 1)\" class=\"btn btn-secondary btn-small\">Next</button>\r\n        </div>\r\n      </div>\r\n\r\n      <div v-if=\"!loading && predictions.length === 0\" class=\"p-4 text-muted\">No predictions available.</div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, inject, onMounted } from 'vue';\r\nimport { useRouter } from 'vue-router';\r\n\r\nconst residentAxios = inject('residentAxios');\r\nconst router = useRouter();\r\n\r\nconst predictions = ref([]);\r\nconst loading = ref(false);\r\nconst error = ref(null);\r\n  // sync button removed - no resident-triggered sync\r\nconst pagination = ref(null);\r\n\r\nconst fetchPredictions = async (page = 1) => {\r\n  loading.value = true;\r\n  error.value = null;\r\n  try {\r\n    const res = await residentAxios.get('/disaster-predictions', { params: { page } });\r\n    if (res.data && res.data.data) {\r\n      predictions.value = res.data.data;\r\n      pagination.value = {\r\n        current_page: res.data.current_page,\r\n        last_page: res.data.last_page,\r\n        total: res.data.total,\r\n      };\r\n    } else if (Array.isArray(res.data)) {\r\n      predictions.value = res.data;\r\n      pagination.value = null;\r\n    }\r\n  } catch (e) {\r\n    console.error('[Pred] Fetch error', e);\r\n    error.value = 'Failed to load predictions.';\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n};\r\n\r\n\r\nconst goToDetail = (id) => router.push({ path: `/resident_pages/disaster-predictions/${id}` });\r\n\r\nconst formatShortDate = (s) => {\r\n  if (!s) return 'N/A';\r\n  try { return new Date(s).toLocaleDateString('en-US', { month: 'M', day: '2-digit', year: 'numeric' }); } catch { return s; }\r\n};\r\n\r\nconst capitalize = (s) => s ? (s.charAt(0).toUpperCase() + s.slice(1)) : '';\r\n\r\nconst badgeClass = (lvl) => {\r\n  if (lvl >= 8) return 'badge-critical';\r\n  if (lvl >= 6) return 'badge-high';\r\n  if (lvl >= 4) return 'badge-moderate';\r\n  return 'badge-low';\r\n};\r\n\r\nconst riskFillClass = (lvl) => {\r\n  if (lvl >= 8) return 'risk-bar-critical';\r\n  if (lvl >= 6) return 'risk-bar-high';\r\n  if (lvl >= 4) return 'risk-bar-medium';\r\n  return 'risk-bar-low';\r\n};\r\n\r\nconst rowClass = (lvl) => {\r\n  if (lvl >= 8) return 'risk-row-critical';\r\n  if (lvl >= 6) return 'risk-row-high';\r\n  return 'risk-row-normal';\r\n};\r\n\r\nonMounted(() => fetchPredictions(1));\r\n</script>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}