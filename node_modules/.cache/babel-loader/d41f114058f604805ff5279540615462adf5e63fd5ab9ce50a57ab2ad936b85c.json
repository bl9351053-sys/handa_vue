{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, inject } from 'vue';\nimport { useRouter } from 'vue-router';\nexport default {\n  __name: 'UpdateCreate',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const residentAxios = inject('residentAxios', null);\n    const axiosFallback = window.axios || null;\n    const router = useRouter();\n    const form = ref({\n      title: '',\n      disaster_type: 'typhoon',\n      severity: 'moderate',\n      source: '',\n      description: '',\n      latitude: '',\n      longitude: '',\n      issued_at: ''\n    });\n    const submit = async () => {\n      try {\n        const payload = {\n          ...form.value\n        };\n        // ensure issued_at in ISO if provided\n        if (payload.issued_at) payload.issued_at = new Date(payload.issued_at).toISOString();\n        const http = residentAxios || axiosFallback;\n        await http.post('/disaster-updates', payload);\n        router.push('/updates');\n      } catch (e) {\n        console.error(e);\n        alert('Failed to create update');\n      }\n    };\n    const __returned__ = {\n      residentAxios,\n      axiosFallback,\n      router,\n      form,\n      submit,\n      ref,\n      inject,\n      get useRouter() {\n        return useRouter;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","inject","useRouter","residentAxios","axiosFallback","window","axios","router","form","title","disaster_type","severity","source","description","latitude","longitude","issued_at","submit","payload","value","Date","toISOString","http","post","push","e","console","error","alert"],"sources":["C:/VUEprojects/crud-app/src/pages/updates/UpdateCreate.vue"],"sourcesContent":["<template>\r\n  <div class=\"space-y-6\">\r\n    <div class=\"flex items-center justify-between\">\r\n      <h1 class=\"text-2xl font-bold\">üì¢ Add Disaster Update</h1>\r\n      <router-link to=\"/updates\" class=\"px-4 py-2 bg-gray-300 rounded\">‚Üê Back</router-link>\r\n    </div>\r\n\r\n    <div class=\"bg-white p-4 rounded shadow\">\r\n      <form @submit.prevent=\"submit\">\r\n        <div class=\"space-y-4\">\r\n          <div>\r\n            <label class=\"block mb-1\">Disaster Type *</label>\r\n            <select v-model=\"form.disaster_type\" class=\"input w-full\" required>\r\n              <option value=\"\">Select Type</option>\r\n              <option value=\"typhoon\">Typhoon</option>\r\n              <option value=\"earthquake\">Earthquake</option>\r\n              <option value=\"flood\">Flood</option>\r\n              <option value=\"landslide\">Landslide</option>\r\n            </select>\r\n            <div v-if=\"errors.disaster_type\" class=\"text-red-600 text-sm mt-1\">{{ errors.disaster_type }}</div>\r\n          </div>\r\n\r\n          <div>\r\n            <label class=\"block mb-1\">Title *</label>\r\n            <input v-model=\"form.title\" type=\"text\" class=\"input w-full\" required />\r\n            <div v-if=\"errors.title\" class=\"text-red-600 text-sm mt-1\">{{ errors.title }}</div>\r\n          </div>\r\n\r\n          <div>\r\n            <label class=\"block mb-1\">Description *</label>\r\n            <textarea v-model=\"form.description\" class=\"input w-full\" rows=\"5\" required></textarea>\r\n            <div v-if=\"errors.description\" class=\"text-red-600 text-sm mt-1\">{{ errors.description }}</div>\r\n          </div>\r\n\r\n          <div>\r\n            <label class=\"block mb-1\">Severity Level *</label>\r\n            <select v-model=\"form.severity\" class=\"input w-full\" required>\r\n              <option value=\"\">Select Severity</option>\r\n              <option value=\"low\">Low</option>\r\n              <option value=\"moderate\">Moderate</option>\r\n              <option value=\"high\">High</option>\r\n              <option value=\"critical\">Critical</option>\r\n            </select>\r\n            <div v-if=\"errors.severity\" class=\"text-red-600 text-sm mt-1\">{{ errors.severity }}</div>\r\n          </div>\r\n\r\n          <div>\r\n            <label class=\"block mb-1\">Source</label>\r\n            <input v-model=\"form.source\" type=\"text\" class=\"input w-full\" />\r\n            <div v-if=\"errors.source\" class=\"text-red-600 text-sm mt-1\">{{ errors.source }}</div>\r\n          </div>\r\n\r\n          <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            <div>\r\n              <label class=\"block mb-1\">Latitude (Optional)</label>\r\n              <input v-model.number=\"form.latitude\" type=\"number\" step=\"0.00000001\" class=\"input w-full\" />\r\n              <div v-if=\"errors.latitude\" class=\"text-red-600 text-sm mt-1\">{{ errors.latitude }}</div>\r\n            </div>\r\n            <div>\r\n              <label class=\"block mb-1\">Longitude (Optional)</label>\r\n              <input v-model.number=\"form.longitude\" type=\"number\" step=\"0.00000001\" class=\"input w-full\" />\r\n              <div v-if=\"errors.longitude\" class=\"text-red-600 text-sm mt-1\">{{ errors.longitude }}</div>\r\n            </div>\r\n          </div>\r\n\r\n          <div>\r\n            <label class=\"block mb-1\">Issued At *</label>\r\n            <input v-model=\"form.issued_at\" type=\"datetime-local\" class=\"input w-full\" required />\r\n            <div v-if=\"errors.issued_at\" class=\"text-red-600 text-sm mt-1\">{{ errors.issued_at }}</div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"flex items-center gap-3 mt-4\">\r\n          <button type=\"submit\" class=\"btn btn-success px-4 py-2\">‚úì Publish Update</button>\r\n          <router-link to=\"/updates\" class=\"btn btn-secondary px-4 py-2\">Cancel</router-link>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, inject } from 'vue';\r\nimport { useRouter } from 'vue-router';\r\n\r\nconst residentAxios = inject('residentAxios', null);\r\nconst axiosFallback = window.axios || null;\r\nconst router = useRouter();\r\n\r\nconst form = ref({ title: '', disaster_type: 'typhoon', severity: 'moderate', source: '', description: '', latitude: '', longitude: '', issued_at: '' });\r\n\r\nconst submit = async () => {\r\n  try {\r\n    const payload = { ...form.value };\r\n    // ensure issued_at in ISO if provided\r\n    if (payload.issued_at) payload.issued_at = new Date(payload.issued_at).toISOString();\r\n    const http = residentAxios || axiosFallback;\r\n    await http.post('/disaster-updates', payload);\r\n    router.push('/updates');\r\n  } catch (e) { console.error(e); alert('Failed to create update'); }\r\n};\r\n</script>\r\n"],"mappings":";AAkFA,SAASA,GAAG,EAAEC,MAAM,QAAQ,KAAK;AACjC,SAASC,SAAS,QAAQ,YAAY;;;;;;;IAEtC,MAAMC,aAAa,GAAGF,MAAM,CAAC,eAAe,EAAE,IAAI,CAAC;IACnD,MAAMG,aAAa,GAAGC,MAAM,CAACC,KAAK,IAAI,IAAI;IAC1C,MAAMC,MAAM,GAAGL,SAAS,CAAC,CAAC;IAE1B,MAAMM,IAAI,GAAGR,GAAG,CAAC;MAAES,KAAK,EAAE,EAAE;MAAEC,aAAa,EAAE,SAAS;MAAEC,QAAQ,EAAE,UAAU;MAAEC,MAAM,EAAE,EAAE;MAAEC,WAAW,EAAE,EAAE;MAAEC,QAAQ,EAAE,EAAE;MAAEC,SAAS,EAAE,EAAE;MAAEC,SAAS,EAAE;IAAG,CAAC,CAAC;IAExJ,MAAMC,MAAM,GAAG,MAAAA,CAAA,KAAY;MACzB,IAAI;QACF,MAAMC,OAAO,GAAG;UAAE,GAAGV,IAAI,CAACW;QAAM,CAAC;QACjC;QACA,IAAID,OAAO,CAACF,SAAS,EAAEE,OAAO,CAACF,SAAS,GAAG,IAAII,IAAI,CAACF,OAAO,CAACF,SAAS,CAAC,CAACK,WAAW,CAAC,CAAC;QACpF,MAAMC,IAAI,GAAGnB,aAAa,IAAIC,aAAa;QAC3C,MAAMkB,IAAI,CAACC,IAAI,CAAC,mBAAmB,EAAEL,OAAO,CAAC;QAC7CX,MAAM,CAACiB,IAAI,CAAC,UAAU,CAAC;MACzB,CAAC,CAAC,OAAOC,CAAC,EAAE;QAAEC,OAAO,CAACC,KAAK,CAACF,CAAC,CAAC;QAAEG,KAAK,CAAC,yBAAyB,CAAC;MAAE;IACpE,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}