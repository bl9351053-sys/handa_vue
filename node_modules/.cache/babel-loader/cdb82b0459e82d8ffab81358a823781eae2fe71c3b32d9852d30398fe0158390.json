{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"families-list\"\n};\nconst _hoisted_2 = {\n  class: \"card\"\n};\nconst _hoisted_3 = {\n  class: \"card-body\"\n};\nconst _hoisted_4 = {\n  key: 0,\n  class: \"center\"\n};\nconst _hoisted_5 = {\n  key: 1,\n  class: \"center error\"\n};\nconst _hoisted_6 = {\n  key: 2\n};\nconst _hoisted_7 = {\n  key: 0\n};\nconst _hoisted_8 = {\n  class: \"table-responsive\"\n};\nconst _hoisted_9 = {\n  class: \"table\"\n};\nconst _hoisted_10 = {\n  key: 1,\n  class: \"muted\"\n};\nconst _hoisted_11 = {\n  key: 0,\n  class: \"mt-3 muted\"\n};\nconst _hoisted_12 = {\n  key: 1,\n  class: \"muted\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[1] || (_cache[1] = _createElementVNode(\"div\", {\n    class: \"card-header\"\n  }, \"üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Families Currently in Evacuation Areas\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_3, [$setup.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, \"Loading families‚Ä¶\")) : $setup.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, _toDisplayString($setup.error), 1 /* TEXT */)) : (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [$setup.families.length ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [_createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"table\", _hoisted_9, [_cache[0] || (_cache[0] = _createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", null, \"Family Name\"), _createElementVNode(\"th\", null, \"Members\"), _createElementVNode(\"th\", null, \"Contact Number\"), _createElementVNode(\"th\", null, \"Evacuation Area\"), _createElementVNode(\"th\", null, \"Special Needs\"), _createElementVNode(\"th\", null, \"Checked In\")])], -1 /* CACHED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.families, f => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: f.id\n    }, [_createElementVNode(\"td\", null, [_createElementVNode(\"strong\", null, _toDisplayString(f.family_head_name), 1 /* TEXT */)]), _createElementVNode(\"td\", null, _toDisplayString(f.total_members), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(f.contact_number), 1 /* TEXT */), _createElementVNode(\"td\", null, [$setup.getAreaId(f) ? (_openBlock(), _createBlock(_component_router_link, {\n      key: 0,\n      to: `/resident_pages/evacuation-areas/${$setup.getAreaId(f)}`,\n      class: \"text-link\"\n    }, {\n      default: _withCtx(() => [_createTextVNode(_toDisplayString($setup.getAreaName(f)), 1 /* TEXT */)]),\n      _: 2 /* DYNAMIC */\n    }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"to\"])) : (_openBlock(), _createElementBlock(\"span\", _hoisted_10, \"-\"))]), _createElementVNode(\"td\", null, _toDisplayString(f.special_needs || 'None'), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString($setup.formatDate(f.checked_in_at)), 1 /* TEXT */)]);\n  }), 128 /* KEYED_FRAGMENT */))])])]), $setup.meta && $setup.meta.total ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, \"Total: \" + _toDisplayString($setup.meta.total), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_12, \"No families currently in evacuation areas.\"))]))])]), _cache[2] || (_cache[2] = _createTextVNode(\" ``` \", -1 /* CACHED */))]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","$setup","loading","_hoisted_4","error","_hoisted_5","_toDisplayString","_hoisted_6","families","length","_hoisted_7","_hoisted_8","_hoisted_9","_Fragment","_renderList","f","key","id","family_head_name","total_members","contact_number","getAreaId","_createBlock","_component_router_link","to","getAreaName","_hoisted_10","special_needs","formatDate","checked_in_at","meta","total","_hoisted_11","_hoisted_12"],"sources":["C:\\VUEprojects\\crud-app\\src\\pages\\resident_pages\\FamiliesList.vue"],"sourcesContent":["<template>\r\n  <div class=\"families-list\">\r\n    <div class=\"card\">\r\n      <div class=\"card-header\">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Families Currently in Evacuation Areas</div>\r\n      <div class=\"card-body\">\r\n        <div v-if=\"loading\" class=\"center\">Loading families‚Ä¶</div>\r\n        <div v-else-if=\"error\" class=\"center error\">{{ error }}</div>\r\n\r\n\r\n    <div v-else>\r\n      <div v-if=\"families.length\">\r\n        <div class=\"table-responsive\">\r\n          <table class=\"table\">\r\n            <thead>\r\n              <tr>\r\n                <th>Family Name</th>\r\n                <th>Members</th>\r\n                <th>Contact Number</th>\r\n                <th>Evacuation Area</th>\r\n                <th>Special Needs</th>\r\n                <th>Checked In</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr v-for=\"f in families\" :key=\"f.id\">\r\n                <td><strong>{{ f.family_head_name }}</strong></td>\r\n                <td>{{ f.total_members }}</td>\r\n                <td>{{ f.contact_number }}</td>\r\n                <td>\r\n                  <router-link\r\n                    v-if=\"getAreaId(f)\"\r\n                    :to=\"`/resident_pages/evacuation-areas/${getAreaId(f)}`\"\r\n                    class=\"text-link\"\r\n                  >\r\n                    {{ getAreaName(f) }}\r\n                  </router-link>\r\n                  <span v-else class=\"muted\">-</span>\r\n                </td>\r\n                <td>{{ f.special_needs || 'None' }}</td>\r\n                <td>{{ formatDate(f.checked_in_at) }}</td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <div v-if=\"meta && meta.total\" class=\"mt-3 muted\">Total: {{ meta.total }}</div>\r\n      </div>\r\n      <div v-else class=\"muted\">No families currently in evacuation areas.</div>\r\n    </div>\r\n  </div>\r\n</div>\r\n```\r\n\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, inject } from 'vue';\r\n\r\nconst residentAxios = inject('residentAxios', null);\r\nlet axiosFallback = null;\r\n\r\nconst families = ref([]);\r\nconst loading = ref(true);\r\nconst error = ref('');\r\nconst meta = ref(null);\r\n\r\nfunction formatDate(value) {\r\n  if (!value) return new Date().toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric', hour: '2-digit', minute: '2-digit' });\r\n  try {\r\n    const d = new Date(value);\r\n    return d.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric', hour: '2-digit', minute: '2-digit' });\r\n  } catch { return String(value); }\r\n}\r\n\r\nfunction getAreaName(f) {\r\n  return f.evacuation_area?.name || f.evacuationArea?.name || 'Unknown';\r\n}\r\n\r\nfunction getAreaId(f) {\r\n  return f.evacuation_area?.id || f.evacuationArea?.id || null;\r\n}\r\n\r\nasync function fetchFamilies() {\r\n  loading.value = true;\r\n  error.value = '';\r\n  try {\r\n    if (!axiosFallback) {\r\n      const mod = await import('axios');\r\n      axiosFallback = mod.default || mod;\r\n    }\r\n    const http = residentAxios || axiosFallback;\r\n    const res = await http.get('/families');\r\n    const payload = res.data || res;\r\n    if (payload.families) {\r\n      families.value = payload.families.data || payload.families || [];\r\n      meta.value = payload.families || null;\r\n    } else if (Array.isArray(payload)) {\r\n      families.value = payload;\r\n    } else if (payload.data && Array.isArray(payload.data)) {\r\n      families.value = payload.data;\r\n      meta.value = payload || null;\r\n    } else {\r\n      families.value = payload.families || payload;\r\n    }\r\n  } catch (e) {\r\n    console.error('Failed to load families', e);\r\n    error.value = e.response?.data?.message || e.message || 'Failed to load families';\r\n  } finally { loading.value = false; }\r\n}\r\n\r\nonMounted(fetchFamilies);\r\n</script>\r\n\r\n<style scoped>\r\n/* Container */\r\n.families-list {\r\n  padding: 2rem;\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\r\n  background: #f4f6fb;\r\n}\r\n\r\n/* Card */\r\n.card {\r\n  background: #ffffff;\r\n  border-radius: 12px;\r\n  padding: 25px;\r\n  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);\r\n  transition: transform 0.2s, box-shadow 0.2s;\r\n}\r\n.card:hover {\r\n  transform: translateY(-3px);\r\n  box-shadow: 0 12px 30px rgba(0, 0, 0, 0.12);\r\n}\r\n.card-header {\r\n  font-weight: 700;\r\n  font-size: 1.4rem;\r\n  margin-bottom: 20px;\r\n  color: #2a3f5f;\r\n  border-left: 6px solid #667eea;\r\n  padding-left: 12px;\r\n}\r\n\r\n/* Table */\r\n.table-responsive {\r\n  overflow-x: auto;\r\n}\r\n.table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  min-width: 700px;\r\n}\r\n.table th, .table td {\r\n  padding: 12px 15px;\r\n  border-bottom: 1px solid #e2e8f0;\r\n  text-align: left;\r\n}\r\n.table th {\r\n  background: #eef2f7;\r\n  color: #2a3f5f;\r\n  font-weight: 600;\r\n  text-transform: uppercase;\r\n}\r\n.table tr:nth-child(even) {\r\n  background: #f9fafc;\r\n}\r\n.table tr:hover {\r\n  background-color: #e6f0ff;\r\n  transition: 0.2s;\r\n  cursor: pointer;\r\n}\r\n\r\n/* Text & Links */\r\n.center { text-align: center; padding: 1rem; font-size: 1.05rem; color: #4b5563; }\r\n.error { color: #d32f2f; font-weight: 600; }\r\n.muted { color: #6b7280; font-size: 0.875rem; }\r\n.text-link {\r\n  color: #4f46e5;\r\n  text-decoration: none;\r\n  font-weight: 500;\r\n}\r\n.text-link:hover { \r\n  color: #3730a3;\r\n  text-decoration: underline; \r\n}\r\n\r\n/* Buttons */\r\n.btn {\r\n  padding: 8px 16px;\r\n  border-radius: 8px;\r\n  color: #fff;\r\n  background: #4f46e5;\r\n  font-weight: 500;\r\n  text-align: center;\r\n  display: inline-block;\r\n  transition: background 0.3s, transform 0.2s;\r\n}\r\n.btn:hover {\r\n  background: #3730a3;\r\n  transform: translateY(-2px);\r\n}\r\n\r\n/* Spacing */\r\n.mt-3 { margin-top: 12px; }\r\n\r\n/* Responsive */\r\n@media (max-width: 768px) {\r\n  .table { min-width: 100%; }\r\n}\r\n</style>\r\n"],"mappings":";;EACOA,KAAK,EAAC;AAAe;;EACnBA,KAAK,EAAC;AAAM;;EAEVA,KAAK,EAAC;AAAW;;;EACAA,KAAK,EAAC;;;;EACHA,KAAK,EAAC;;;;;;;;;EAKxBA,KAAK,EAAC;AAAkB;;EACpBA,KAAK,EAAC;AAAO;;;EAwBCA,KAAK,EAAC;;;;EAQEA,KAAK,EAAC;;;;EAE3BA,KAAK,EAAC;;;;uBA7CtBC,mBAAA,CAmDM,OAnDNC,UAmDM,GAlDJC,mBAAA,CA+CE,OA/CFC,UA+CE,G,0BA9CAD,mBAAA,CAAiF;IAA5EH,KAAK,EAAC;EAAa,GAAC,oDAAkD,qBAC3EG,mBAAA,CA4CE,OA5CFE,UA4CE,GA3CWC,MAAA,CAAAC,OAAO,I,cAAlBN,mBAAA,CAA0D,OAA1DO,UAA0D,EAAvB,mBAAiB,KACpCF,MAAA,CAAAG,KAAK,I,cAArBR,mBAAA,CAA6D,OAA7DS,UAA6D,EAAAC,gBAAA,CAAdL,MAAA,CAAAG,KAAK,qB,cAGxDR,mBAAA,CAsCM,OAAAW,UAAA,GArCON,MAAA,CAAAO,QAAQ,CAACC,MAAM,I,cAA1Bb,mBAAA,CAmCM,OAAAc,UAAA,GAlCJZ,mBAAA,CAgCM,OAhCNa,UAgCM,GA/BJb,mBAAA,CA8BQ,SA9BRc,UA8BQ,G,0BA7BNd,mBAAA,CASQ,gBARNA,mBAAA,CAOK,aANHA,mBAAA,CAAoB,YAAhB,aAAW,GACfA,mBAAA,CAAgB,YAAZ,SAAO,GACXA,mBAAA,CAAuB,YAAnB,gBAAc,GAClBA,mBAAA,CAAwB,YAApB,iBAAe,GACnBA,mBAAA,CAAsB,YAAlB,eAAa,GACjBA,mBAAA,CAAmB,YAAf,YAAU,E,uBAGlBA,mBAAA,CAkBQ,iB,kBAjBNF,mBAAA,CAgBKiB,SAAA,QAAAC,WAAA,CAhBWb,MAAA,CAAAO,QAAQ,EAAbO,CAAC;yBAAZnB,mBAAA,CAgBK;MAhBsBoB,GAAG,EAAED,CAAC,CAACE;QAChCnB,mBAAA,CAAkD,aAA9CA,mBAAA,CAAyC,gBAAAQ,gBAAA,CAA9BS,CAAC,CAACG,gBAAgB,iB,GACjCpB,mBAAA,CAA8B,YAAAQ,gBAAA,CAAvBS,CAAC,CAACI,aAAa,kBACtBrB,mBAAA,CAA+B,YAAAQ,gBAAA,CAAxBS,CAAC,CAACK,cAAc,kBACvBtB,mBAAA,CASK,aAPKG,MAAA,CAAAoB,SAAS,CAACN,CAAC,K,cADnBO,YAAA,CAMcC,sBAAA;;MAJXC,EAAE,sCAAsCvB,MAAA,CAAAoB,SAAS,CAACN,CAAC;MACpDpB,KAAK,EAAC;;wBAEN,MAAoB,C,kCAAjBM,MAAA,CAAAwB,WAAW,CAACV,CAAC,kB;;kEAElBnB,mBAAA,CAAmC,QAAnC8B,WAAmC,EAAR,GAAC,G,GAE9B5B,mBAAA,CAAwC,YAAAQ,gBAAA,CAAjCS,CAAC,CAACY,aAAa,4BACtB7B,mBAAA,CAA0C,YAAAQ,gBAAA,CAAnCL,MAAA,CAAA2B,UAAU,CAACb,CAAC,CAACc,aAAa,kB;wCAK9B5B,MAAA,CAAA6B,IAAI,IAAI7B,MAAA,CAAA6B,IAAI,CAACC,KAAK,I,cAA7BnC,mBAAA,CAA+E,OAA/EoC,WAA+E,EAA7B,SAAO,GAAA1B,gBAAA,CAAGL,MAAA,CAAA6B,IAAI,CAACC,KAAK,oB,sDAExEnC,mBAAA,CAA0E,OAA1EqC,WAA0E,EAAhD,4CAA0C,G,mDAGpE,OAGJ,oB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}