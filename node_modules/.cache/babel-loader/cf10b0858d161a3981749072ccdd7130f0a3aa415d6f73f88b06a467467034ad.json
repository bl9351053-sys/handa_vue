{"ast":null,"code":"import \"core-js/modules/es.json.stringify.js\";\nimport { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"resident-dashboard\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"center\"\n};\nconst _hoisted_3 = {\n  key: 1,\n  class: \"center error\"\n};\nconst _hoisted_4 = {\n  key: 2\n};\nconst _hoisted_5 = {\n  class: \"card\"\n};\nconst _hoisted_6 = {\n  class: \"debug\",\n  style: {\n    \"font-size\": \"12px\",\n    \"color\": \"#666\",\n    \"margin-bottom\": \"8px\"\n  }\n};\nconst _hoisted_7 = {\n  key: 0,\n  style: {\n    \"color\": \"#b00020\"\n  }\n};\nconst _hoisted_8 = {\n  class: \"stats-grid\"\n};\nconst _hoisted_9 = {\n  class: \"stat-card\"\n};\nconst _hoisted_10 = {\n  class: \"stat-info\"\n};\nconst _hoisted_11 = {\n  class: \"stat-card\"\n};\nconst _hoisted_12 = {\n  class: \"stat-info\"\n};\nconst _hoisted_13 = {\n  class: \"stat-card\"\n};\nconst _hoisted_14 = {\n  class: \"stat-info\"\n};\nconst _hoisted_15 = {\n  class: \"stat-card\"\n};\nconst _hoisted_16 = {\n  class: \"stat-info\"\n};\nconst _hoisted_17 = {\n  class: \"stat-card\"\n};\nconst _hoisted_18 = {\n  class: \"stat-info\"\n};\nconst _hoisted_19 = {\n  class: \"two-col\"\n};\nconst _hoisted_20 = {\n  class: \"card\"\n};\nconst _hoisted_21 = {\n  key: 0,\n  class: \"muted\"\n};\nconst _hoisted_22 = {\n  key: 1,\n  class: \"list\"\n};\nconst _hoisted_23 = {\n  class: \"muted\"\n};\nconst _hoisted_24 = {\n  style: {\n    \"margin-top\": \"8px\"\n  }\n};\nconst _hoisted_25 = {\n  class: \"card\"\n};\nconst _hoisted_26 = {\n  key: 0,\n  class: \"muted\"\n};\nconst _hoisted_27 = {\n  key: 1,\n  class: \"list\"\n};\nconst _hoisted_28 = {\n  class: \"muted\"\n};\nconst _hoisted_29 = {\n  style: {\n    \"margin-top\": \"8px\"\n  }\n};\nconst _hoisted_30 = {\n  key: 0,\n  class: \"card\"\n};\nconst _hoisted_31 = {\n  style: {\n    \"max-height\": \"240px\",\n    \"overflow\": \"auto\",\n    \"background\": \"#f7f7f7\",\n    \"padding\": \"8px\",\n    \"border-radius\": \"6px\"\n  }\n};\nconst _hoisted_32 = {\n  class: \"card\"\n};\nconst _hoisted_33 = {\n  key: 0,\n  class: \"muted\"\n};\nconst _hoisted_34 = {\n  key: 1,\n  class: \"areas-table\"\n};\nconst _hoisted_35 = {\n  class: \"two-col\"\n};\nconst _hoisted_36 = {\n  class: \"card\"\n};\nconst _hoisted_37 = {\n  class: \"list\"\n};\nconst _hoisted_38 = {\n  class: \"muted\"\n};\nconst _hoisted_39 = {\n  class: \"card\"\n};\nconst _hoisted_40 = {\n  key: 0,\n  class: \"muted\"\n};\nconst _hoisted_41 = {\n  key: 1,\n  class: \"list\"\n};\nconst _hoisted_42 = {\n  class: \"muted\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[23] || (_cache[23] = _createElementVNode(\"header\", {\n    class: \"header\"\n  }, [_createElementVNode(\"h1\", null, \"Dashboard\"), _createElementVNode(\"p\", {\n    class: \"subtitle\"\n  }, \"Overview for residents ‚Äî live data from the System‚ÄëE API\")], -1 /* CACHED */)), $setup.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, \"Loading dashboard‚Ä¶\")) : $setup.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, \"Error: \" + _toDisplayString($setup.error), 1 /* TEXT */)) : (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_cache[12] || (_cache[12] = _createElementVNode(\"div\", {\n    class: \"card-header\"\n  }, \"üìä Dashboard Overview\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"div\", null, [_cache[0] || (_cache[0] = _createTextVNode(\"Request: \", -1 /* CACHED */)), _createElementVNode(\"small\", null, _toDisplayString($setup.lastRequestUrl), 1 /* TEXT */)]), _createElementVNode(\"div\", null, [_cache[1] || (_cache[1] = _createTextVNode(\"HTTP status: \", -1 /* CACHED */)), _createElementVNode(\"small\", null, _toDisplayString($setup.lastResponseStatus), 1 /* TEXT */)]), $setup.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, \"Error: \" + _toDisplayString($setup.error), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"div\", _hoisted_9, [_cache[3] || (_cache[3] = _createElementVNode(\"div\", {\n    class: \"stat-icon\"\n  }, \"üè¢\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"h3\", null, _toDisplayString($setup.data.totalEvacuationAreas ?? 0), 1 /* TEXT */), _cache[2] || (_cache[2] = _createElementVNode(\"p\", null, \"Total Evacuation Areas\", -1 /* CACHED */))])]), _createElementVNode(\"div\", _hoisted_11, [_cache[5] || (_cache[5] = _createElementVNode(\"div\", {\n    class: \"stat-icon\"\n  }, \"üë®‚Äçüë©‚Äçüëß‚Äçüë¶\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_12, [_createElementVNode(\"h3\", null, _toDisplayString($setup.data.totalFamilies ?? 0), 1 /* TEXT */), _cache[4] || (_cache[4] = _createElementVNode(\"p\", null, \"Families Evacuated\", -1 /* CACHED */))])]), _createElementVNode(\"div\", _hoisted_13, [_cache[7] || (_cache[7] = _createElementVNode(\"div\", {\n    class: \"stat-icon\"\n  }, \"üë•\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_14, [_createElementVNode(\"h3\", null, _toDisplayString($setup.data.totalPeople ?? 0), 1 /* TEXT */), _cache[6] || (_cache[6] = _createElementVNode(\"p\", null, \"Total People\", -1 /* CACHED */))])]), _createElementVNode(\"div\", _hoisted_15, [_cache[9] || (_cache[9] = _createElementVNode(\"div\", {\n    class: \"stat-icon\"\n  }, \"‚úÖ\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_16, [_createElementVNode(\"h3\", null, _toDisplayString($setup.data.availableAreas ?? 0), 1 /* TEXT */), _cache[8] || (_cache[8] = _createElementVNode(\"p\", null, \"Available Areas\", -1 /* CACHED */))])]), _createElementVNode(\"div\", _hoisted_17, [_cache[11] || (_cache[11] = _createElementVNode(\"div\", {\n    class: \"stat-icon\"\n  }, \"üö´\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_18, [_createElementVNode(\"h3\", null, _toDisplayString($setup.data.fullAreas ?? 0), 1 /* TEXT */), _cache[10] || (_cache[10] = _createElementVNode(\"p\", null, \"Full Areas\", -1 /* CACHED */))])])])]), _createElementVNode(\"section\", _hoisted_19, [_createElementVNode(\"div\", _hoisted_20, [_cache[14] || (_cache[14] = _createElementVNode(\"div\", {\n    class: \"card-header\"\n  }, \"üö® Recent Disaster Updates\", -1 /* CACHED */)), ($setup.data.recentUpdates || []).length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_21, \"No recent disaster updates.\")) : (_openBlock(), _createElementBlock(\"ul\", _hoisted_22, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.data.recentUpdates, update => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: update.id\n    }, [_createElementVNode(\"strong\", null, _toDisplayString(update.disaster_type ?? 'Update'), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_23, _toDisplayString($setup.formatDate(update.issued_at)) + \" ‚Äî \" + _toDisplayString(update.summary ?? update.description ?? ''), 1 /* TEXT */)]);\n  }), 128 /* KEYED_FRAGMENT */))])), _createElementVNode(\"div\", _hoisted_24, [_createVNode(_component_router_link, {\n    to: \"/disaster-updates\",\n    class: \"btn btn-primary w-100\"\n  }, {\n    default: _withCtx(() => [...(_cache[13] || (_cache[13] = [_createTextVNode(\"View All Updates\", -1 /* CACHED */)]))]),\n    _: 1 /* STABLE */\n  })])]), _createElementVNode(\"div\", _hoisted_25, [_cache[16] || (_cache[16] = _createElementVNode(\"div\", {\n    class: \"card-header\"\n  }, \"üîÆ Active Predictions\", -1 /* CACHED */)), ($setup.data.activePredictions || []).length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_26, \"No active predictions.\")) : (_openBlock(), _createElementBlock(\"ul\", _hoisted_27, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.data.activePredictions, pred => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: pred.id\n    }, [_createElementVNode(\"strong\", null, _toDisplayString(pred.disaster_type ?? 'Prediction') + \" ‚Äî Risk \" + _toDisplayString(pred.risk_level ?? '-'), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_28, \"Issued: \" + _toDisplayString($setup.formatDate(pred.issued_at ?? pred.created_at)), 1 /* TEXT */)]);\n  }), 128 /* KEYED_FRAGMENT */))])), _createElementVNode(\"div\", _hoisted_29, [_createVNode(_component_router_link, {\n    to: \"/disaster-predictions\",\n    class: \"btn btn-primary w-100\"\n  }, {\n    default: _withCtx(() => [...(_cache[15] || (_cache[15] = [_createTextVNode(\"View All Predictions\", -1 /* CACHED */)]))]),\n    _: 1 /* STABLE */\n  })])])]), $setup.data && Object.keys($setup.data).length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_30, [_cache[17] || (_cache[17] = _createElementVNode(\"div\", {\n    class: \"card-header\"\n  }, \"Raw API Data (debug)\", -1 /* CACHED */)), _createElementVNode(\"pre\", _hoisted_31, _toDisplayString(JSON.stringify($setup.data, null, 2)), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"section\", _hoisted_32, [_cache[19] || (_cache[19] = _createElementVNode(\"div\", {\n    class: \"card-header\"\n  }, \"üè¢ Evacuation Areas\", -1 /* CACHED */)), ($setup.data.evacuationAreas || []).length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_33, \"No evacuation areas available.\")) : (_openBlock(), _createElementBlock(\"table\", _hoisted_34, [_cache[18] || (_cache[18] = _createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", null, \"Name\"), _createElementVNode(\"th\", null, \"Capacity\"), _createElementVNode(\"th\", null, \"Occupancy\"), _createElementVNode(\"th\", null, \"Status\")])], -1 /* CACHED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.data.evacuationAreas, area => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: area.id\n    }, [_createElementVNode(\"td\", null, _toDisplayString(area.name), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(area.capacity ?? '‚Äî'), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(area.current_occupancy ?? area.current_occupants ?? 0), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(area.status ?? 'unknown'), 1 /* TEXT */)]);\n  }), 128 /* KEYED_FRAGMENT */))])]))]), _createElementVNode(\"section\", _hoisted_35, [_createElementVNode(\"div\", _hoisted_36, [_cache[20] || (_cache[20] = _createElementVNode(\"div\", {\n    class: \"card-header\"\n  }, \"üìà Forecast Trend\", -1 /* CACHED */)), _cache[21] || (_cache[21] = _createElementVNode(\"div\", {\n    class: \"muted\"\n  }, \"Recent and forecasted evacuee counts.\", -1 /* CACHED */)), _createElementVNode(\"ul\", _hoisted_37, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.data.forecastData || [], (f, idx) => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: idx\n    }, [_createElementVNode(\"strong\", null, _toDisplayString(f.date), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_38, \"Actual: \" + _toDisplayString(f.actual === null ? '‚Äî' : f.actual) + \" ‚Ä¢ Forecast: \" + _toDisplayString(f.forecast), 1 /* TEXT */)]);\n  }), 128 /* KEYED_FRAGMENT */))])]), _createElementVNode(\"div\", _hoisted_39, [_cache[22] || (_cache[22] = _createElementVNode(\"div\", {\n    class: \"card-header\"\n  }, \"Recommendations\", -1 /* CACHED */)), ($setup.data.recommendedAreas || []).length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_40, \"No recommendations.\")) : (_openBlock(), _createElementBlock(\"ul\", _hoisted_41, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.data.recommendedAreas, area => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: area.id\n    }, [_createElementVNode(\"strong\", null, _toDisplayString(area.name), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_42, \"Distance: \" + _toDisplayString(area.distance?.toFixed ? area.distance.toFixed(2) + ' km' : area.distance), 1 /* TEXT */)]);\n  }), 128 /* KEYED_FRAGMENT */))]))])])]))]);\n}","map":{"version":3,"names":["class","style","_createElementBlock","_hoisted_1","_createElementVNode","$setup","loading","_hoisted_2","error","_hoisted_3","_toDisplayString","_hoisted_4","_hoisted_5","_hoisted_6","lastRequestUrl","lastResponseStatus","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","data","totalEvacuationAreas","_hoisted_11","_hoisted_12","totalFamilies","_hoisted_13","_hoisted_14","totalPeople","_hoisted_15","_hoisted_16","availableAreas","_hoisted_17","_hoisted_18","fullAreas","_hoisted_19","_hoisted_20","recentUpdates","length","_hoisted_21","_hoisted_22","_Fragment","_renderList","update","key","id","disaster_type","_hoisted_23","formatDate","issued_at","summary","description","_hoisted_24","_createVNode","_component_router_link","to","_cache","_hoisted_25","activePredictions","_hoisted_26","_hoisted_27","pred","risk_level","_hoisted_28","created_at","_hoisted_29","Object","keys","_hoisted_30","_hoisted_31","JSON","stringify","_hoisted_32","evacuationAreas","_hoisted_33","_hoisted_34","area","name","capacity","current_occupancy","current_occupants","status","_hoisted_35","_hoisted_36","_hoisted_37","forecastData","f","idx","date","_hoisted_38","actual","forecast","_hoisted_39","recommendedAreas","_hoisted_40","_hoisted_41","_hoisted_42","distance","toFixed"],"sources":["C:\\VUEprojects\\crud-app\\src\\pages\\resident_pages\\ResidentDashboardPage.vue"],"sourcesContent":["<template>\r\n  <div class=\"resident-dashboard\">\r\n    <header class=\"header\">\r\n      <h1>Dashboard</h1>\r\n      <p class=\"subtitle\">Overview for residents ‚Äî live data from the System‚ÄëE API</p>\r\n    </header>\r\n\r\n    <div v-if=\"loading\" class=\"center\">Loading dashboard‚Ä¶</div>\r\n    <div v-else-if=\"error\" class=\"center error\">Error: {{ error }}</div>\r\n\r\n    <div v-else>\r\n      <div class=\"card\">\r\n        <div class=\"card-header\">üìä Dashboard Overview</div>\r\n        <div class=\"debug\" style=\"font-size:12px;color:#666;margin-bottom:8px\">\r\n          <div>Request: <small>{{ lastRequestUrl }}</small></div>\r\n          <div>HTTP status: <small>{{ lastResponseStatus }}</small></div>\r\n          <div v-if=\"error\" style=\"color:#b00020\">Error: {{ error }}</div>\r\n        </div>\r\n        <div class=\"stats-grid\">\r\n          <div class=\"stat-card\">\r\n            <div class=\"stat-icon\">üè¢</div>\r\n            <div class=\"stat-info\">\r\n              <h3>{{ data.totalEvacuationAreas ?? 0 }}</h3>\r\n              <p>Total Evacuation Areas</p>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"stat-card\">\r\n            <div class=\"stat-icon\">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</div>\r\n            <div class=\"stat-info\">\r\n              <h3>{{ data.totalFamilies ?? 0 }}</h3>\r\n              <p>Families Evacuated</p>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"stat-card\">\r\n            <div class=\"stat-icon\">üë•</div>\r\n            <div class=\"stat-info\">\r\n              <h3>{{ data.totalPeople ?? 0 }}</h3>\r\n              <p>Total People</p>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"stat-card\">\r\n            <div class=\"stat-icon\">‚úÖ</div>\r\n            <div class=\"stat-info\">\r\n              <h3>{{ data.availableAreas ?? 0 }}</h3>\r\n              <p>Available Areas</p>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"stat-card\">\r\n            <div class=\"stat-icon\">üö´</div>\r\n            <div class=\"stat-info\">\r\n              <h3>{{ data.fullAreas ?? 0 }}</h3>\r\n              <p>Full Areas</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <section class=\"two-col\">\r\n        <div class=\"card\">\r\n          <div class=\"card-header\">üö® Recent Disaster Updates</div>\r\n          <div v-if=\"(data.recentUpdates || []).length === 0\" class=\"muted\">No recent disaster updates.</div>\r\n          <ul v-else class=\"list\">\r\n            <li v-for=\"update in data.recentUpdates\" :key=\"update.id\">\r\n              <strong>{{ update.disaster_type ?? 'Update' }}</strong>\r\n              <div class=\"muted\">{{ formatDate(update.issued_at) }} ‚Äî {{ update.summary ?? (update.description ?? '') }}</div>\r\n            </li>\r\n          </ul>\r\n          <div style=\"margin-top:8px\"><router-link to=\"/disaster-updates\" class=\"btn btn-primary w-100\">View All Updates</router-link></div>\r\n        </div>\r\n\r\n        <div class=\"card\">\r\n          <div class=\"card-header\">üîÆ Active Predictions</div>\r\n          <div v-if=\"(data.activePredictions || []).length === 0\" class=\"muted\">No active predictions.</div>\r\n          <ul v-else class=\"list\">\r\n            <li v-for=\"pred in data.activePredictions\" :key=\"pred.id\">\r\n              <strong>{{ pred.disaster_type ?? 'Prediction' }} ‚Äî Risk {{ pred.risk_level ?? '-' }}</strong>\r\n              <div class=\"muted\">Issued: {{ formatDate(pred.issued_at ?? pred.created_at) }}</div>\r\n            </li>\r\n          </ul>\r\n          <div style=\"margin-top:8px\"><router-link to=\"/disaster-predictions\" class=\"btn btn-primary w-100\">View All Predictions</router-link></div>\r\n        </div>\r\n      </section>\r\n      <div v-if=\"data && Object.keys(data).length > 0\" class=\"card\">\r\n        <div class=\"card-header\">Raw API Data (debug)</div>\r\n        <pre style=\"max-height:240px;overflow:auto;background:#f7f7f7;padding:8px;border-radius:6px\">{{ JSON.stringify(data, null, 2) }}</pre>\r\n      </div>\r\n\r\n      <section class=\"card\">\r\n        <div class=\"card-header\">üè¢ Evacuation Areas</div>\r\n        <div v-if=\"(data.evacuationAreas || []).length === 0\" class=\"muted\">No evacuation areas available.</div>\r\n        <table v-else class=\"areas-table\">\r\n          <thead>\r\n            <tr>\r\n              <th>Name</th>\r\n              <th>Capacity</th>\r\n              <th>Occupancy</th>\r\n              <th>Status</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"area in data.evacuationAreas\" :key=\"area.id\">\r\n              <td>{{ area.name }}</td>\r\n              <td>{{ area.capacity ?? '‚Äî' }}</td>\r\n              <td>{{ area.current_occupancy ?? area.current_occupants ?? 0 }}</td>\r\n              <td>{{ area.status ?? 'unknown' }}</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </section>\r\n\r\n      <section class=\"two-col\">\r\n        <div class=\"card\">\r\n          <div class=\"card-header\">üìà Forecast Trend</div>\r\n          <div class=\"muted\">Recent and forecasted evacuee counts.</div>\r\n          <ul class=\"list\">\r\n            <li v-for=\"(f, idx) in (data.forecastData || [])\" :key=\"idx\">\r\n              <strong>{{ f.date }}</strong>\r\n              <div class=\"muted\">Actual: {{ f.actual === null ? '‚Äî' : f.actual }} ‚Ä¢ Forecast: {{ f.forecast }}</div>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n\r\n        <div class=\"card\">\r\n          <div class=\"card-header\">Recommendations</div>\r\n          <div v-if=\"(data.recommendedAreas || []).length === 0\" class=\"muted\">No recommendations.</div>\r\n          <ul v-else class=\"list\">\r\n            <li v-for=\"area in data.recommendedAreas\" :key=\"area.id\">\r\n              <strong>{{ area.name }}</strong>\r\n              <div class=\"muted\">Distance: {{ area.distance?.toFixed ? area.distance.toFixed(2) + ' km' : area.distance }}</div>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </section>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, onBeforeUnmount, inject } from 'vue';\r\nimport axios from 'axios';\r\n\r\nconst loading = ref(true);\r\nconst error = ref(null);\r\nconst data = ref({});\r\n\r\n// Get base API URL from app provide (set in main.js) or fallback to env\r\nconst injectedBase = inject('baseUrl', null);\r\nconst apiBase = injectedBase || (process.env.VUE_APP_ADMIN_API_URL || '').replace(/\\/$/, '') || 'http://127.0.0.1:8000/api';\r\n\r\n// Note: main.js provides `baseUrl` as 'http://127.0.0.1:8000/api' so\r\n// `requestUrl` below will be `${apiBase}/dashboard`.\r\n\r\nfunction formatDate(d) {\r\n  if (!d) return '';\r\n  try {\r\n    const dt = new Date(d);\r\n    return dt.toLocaleString();\r\n  } catch (e) {\r\n    return d;\r\n  }\r\n}\r\n\r\nasync function fetchDashboard() {\r\n  loading.value = true;\r\n  error.value = null;\r\n  lastRequestUrl.value = '';\r\n  lastResponseStatus.value = null;\r\n  try {\r\n    // Try several candidate URLs so the component works whether `apiBase` includes '/api' or not\r\n    const baseNoSlash = apiBase.replace(/\\/$/, '');\r\n    const candidates = [\r\n      `${baseNoSlash}/dashboard`,\r\n      `${baseNoSlash}/api/dashboard`,\r\n      // try without host (assume same origin proxy)\r\n      `/api/dashboard`,\r\n      `/dashboard`\r\n    ];\r\n\r\n    let lastErr = null;\r\n    for (const candidate of candidates) {\r\n      try {\r\n        lastRequestUrl.value = candidate;\r\n        console.log('[ResidentDashboard] requesting', candidate);\r\n        const res = await axios.get(candidate, { headers: { Accept: 'application/json' } });\r\n        lastResponseStatus.value = res.status;\r\n        console.log('[ResidentDashboard] response', res.status, res.data);\r\n        data.value = res.data || {};\r\n        lastErr = null;\r\n        break; // success\r\n      } catch (err) {\r\n        console.warn('[ResidentDashboard] request failed for', candidate, err && err.message ? err.message : err);\r\n        lastErr = err;\r\n      }\r\n    }\r\n\r\n    if (lastErr) throw lastErr;\r\n  } catch (e) {\r\n    console.error('Failed to fetch dashboard', e);\r\n    error.value = e.message || String(e);\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n}\r\n\r\n// Debug refs\r\nconst lastRequestUrl = ref('');\r\nconst lastResponseStatus = ref(null);\r\n\r\nfunction handleRefresh() { fetchDashboard(); }\r\n\r\nonMounted(() => {\r\n  fetchDashboard();\r\n  window.addEventListener('resident-dashboard-refresh', handleRefresh);\r\n});\r\n\r\nonBeforeUnmount(() => {\r\n  window.removeEventListener('resident-dashboard-refresh', handleRefresh);\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.resident-dashboard { padding: 1rem; max-width: 1100px; margin: 0 auto; }\r\n.header h1 { margin: 0 0 0.25rem 0; }\r\n.subtitle { color: #666; margin-bottom: 1rem; }\r\n.center { text-align: center; padding: 1.5rem; }\r\n.error { color: #b00020; }\r\n.stats-grid { display: grid; grid-template-columns: repeat(auto-fit,minmax(160px,1fr)); gap: 1rem; margin-bottom: 1rem; }\r\n.stat-card { background: #fff; padding: 1rem; border-radius: 8px; box-shadow: 0 1px 4px rgba(0,0,0,0.06); text-align: center; }\r\n.stat-value { font-size: 1.6rem; font-weight: 700; }\r\n.stat-label { color: #666; font-size: 0.9rem; }\r\n.two-col { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem; }\r\n.card { background: #fff; padding: 1rem; border-radius: 8px; box-shadow: 0 1px 4px rgba(0,0,0,0.06); }\r\n.muted { color: #666; font-size: 0.9rem; }\r\n.list { list-style: none; padding: 0; margin: 0; }\r\n.list li { padding: 0.5rem 0; border-bottom: 1px solid #f0f0f0; }\r\n.areas-table { width: 100%; border-collapse: collapse; }\r\n.areas-table th, .areas-table td { text-align: left; padding: 0.5rem; border-bottom: 1px solid #eee; }\r\n@media (max-width: 800px) { .two-col { grid-template-columns: 1fr; } }\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}