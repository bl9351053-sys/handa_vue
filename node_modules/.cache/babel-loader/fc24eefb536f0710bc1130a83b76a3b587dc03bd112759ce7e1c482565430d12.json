{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { ref, onMounted } from 'vue';\nimport api from '../services/api';\nimport { Chart, registerables } from 'chart.js';\nexport default {\n  __name: 'DashboardPage',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    Chart.register(...registerables);\n    const stats = ref({});\n    async function loadDashboard() {\n      try {\n        const res = await api.get('/dashboard');\n        if (res && res.data) {\n          // assume controller returns object { stats: {...}, evacuationAreaData: [], facilityStatusData: [], familyStatusData: [] }\n          const body = res.data;\n          if (body.stats) stats.value = body.stats;\n\n          // build charts\n          if (body.evacuationAreaData) buildEvacuationChart(body.evacuationAreaData);\n          if (body.facilityStatusData) buildFacilityChart(body.facilityStatusData);\n          if (body.familyStatusData) buildFamilyChart(body.familyStatusData);\n        }\n      } catch (e) {\n        console.error('dashboard load failed', e);\n      }\n    }\n    function buildEvacuationChart(data) {\n      const ctx = document.getElementById('evacuationChart');\n      if (!ctx) return;\n      const labels = data.map(d => d.name);\n      const occupancy = data.map(d => d.current_occupancy);\n      const capacity = data.map(d => d.capacity);\n      new Chart(ctx, {\n        type: 'bar',\n        data: {\n          labels,\n          datasets: [{\n            label: 'Current Occupancy',\n            data: occupancy,\n            backgroundColor: '#0d6efd'\n          }, {\n            label: 'Capacity',\n            data: capacity,\n            backgroundColor: '#6c757d'\n          }]\n        }\n      });\n    }\n    function buildFacilityChart(data) {\n      const ctx = document.getElementById('facilityChart');\n      if (!ctx) return;\n      const labels = data.map(d => d.status);\n      const counts = data.map(d => d.count);\n      new Chart(ctx, {\n        type: 'doughnut',\n        data: {\n          labels,\n          datasets: [{\n            data: counts,\n            backgroundColor: ['#198754', '#ffc107', '#dc3545', '#0d6efd']\n          }]\n        }\n      });\n    }\n    function buildFamilyChart(data) {\n      const ctx = document.getElementById('familyChart');\n      if (!ctx) return;\n      const labels = data.map(d => d.status);\n      const counts = data.map(d => d.count);\n      new Chart(ctx, {\n        type: 'pie',\n        data: {\n          labels,\n          datasets: [{\n            data: counts,\n            backgroundColor: ['#0d6efd', '#6f42c1', '#fd7e14']\n          }]\n        }\n      });\n    }\n    onMounted(() => {\n      loadDashboard();\n    });\n    const __returned__ = {\n      stats,\n      loadDashboard,\n      buildEvacuationChart,\n      buildFacilityChart,\n      buildFamilyChart,\n      ref,\n      onMounted,\n      get api() {\n        return api;\n      },\n      get Chart() {\n        return Chart;\n      },\n      get registerables() {\n        return registerables;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","api","Chart","registerables","register","stats","loadDashboard","res","get","data","body","value","evacuationAreaData","buildEvacuationChart","facilityStatusData","buildFacilityChart","familyStatusData","buildFamilyChart","e","console","error","ctx","document","getElementById","labels","map","d","name","occupancy","current_occupancy","capacity","type","datasets","label","backgroundColor","status","counts","count"],"sources":["C:/VUEprojects/crud-app/src/pages/DashboardPage.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <h2 class=\"text-2xl font-semibold mb-4\">Dashboard</h2>\r\n\r\n    <div class=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6\">\r\n      <div class=\"p-4 bg-white shadow rounded\">\r\n        <div class=\"text-sm text-gray-500\">Total members</div>\r\n        <div class=\"text-2xl font-bold\">{{ stats.total_members ?? '-' }}</div>\r\n      </div>\r\n      <div class=\"p-4 bg-white shadow rounded\">\r\n        <div class=\"text-sm text-gray-500\">Total families</div>\r\n        <div class=\"text-2xl font-bold\">{{ stats.total_families ?? '-' }}</div>\r\n      </div>\r\n      <div class=\"p-4 bg-white shadow rounded\">\r\n        <div class=\"text-sm text-gray-500\">Evacuation Areas</div>\r\n        <div class=\"text-2xl font-bold\">{{ stats.total_evacuation_areas ?? '-' }}</div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6\">\r\n      <div class=\"p-4 bg-white shadow rounded\">\r\n        <div class=\"text-sm text-gray-500\">Available evacuation areas</div>\r\n        <div class=\"text-2xl font-bold\">{{ stats.available_evacuation_areas ?? '-' }}</div>\r\n      </div>\r\n      <div class=\"p-4 bg-white shadow rounded\">\r\n        <div class=\"text-sm text-gray-500\">Total facilities</div>\r\n        <div class=\"text-2xl font-bold\">{{ stats.total_facilities ?? '-' }}</div>\r\n      </div>\r\n      <div class=\"p-4 bg-white shadow rounded\">\r\n        <div class=\"text-sm text-gray-500\">Operational facilities</div>\r\n        <div class=\"text-2xl font-bold\">{{ stats.operational_facilities ?? '-' }}</div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"mb-6\">\r\n      <div class=\"p-4 bg-white shadow rounded\">\r\n        <div class=\"text-sm text-gray-500\">Active predictions</div>\r\n        <div class=\"text-2xl font-bold\">{{ stats.active_predictions ?? '-' }}</div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"grid grid-cols-1 lg:grid-cols-3 gap-4\">\r\n      <div class=\"p-4 bg-white shadow rounded\">\r\n        <h3 class=\"font-semibold mb-2\">Evacuation Areas</h3>\r\n        <canvas id=\"evacuationChart\"></canvas>\r\n      </div>\r\n\r\n      <div class=\"p-4 bg-white shadow rounded\">\r\n        <h3 class=\"font-semibold mb-2\">Facility Status</h3>\r\n        <canvas id=\"facilityChart\"></canvas>\r\n      </div>\r\n\r\n      <div class=\"p-4 bg-white shadow rounded\">\r\n        <h3 class=\"font-semibold mb-2\">Family Status</h3>\r\n        <canvas id=\"familyChart\"></canvas>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport api from '../services/api';\r\nimport { Chart, registerables } from 'chart.js';\r\n\r\nChart.register(...registerables);\r\n\r\nconst stats = ref({});\r\n\r\nasync function loadDashboard() {\r\n  try {\r\n    const res = await api.get('/dashboard');\r\n    if (res && res.data) {\r\n      // assume controller returns object { stats: {...}, evacuationAreaData: [], facilityStatusData: [], familyStatusData: [] }\r\n      const body = res.data;\r\n      if (body.stats) stats.value = body.stats;\r\n\r\n      // build charts\r\n      if (body.evacuationAreaData) buildEvacuationChart(body.evacuationAreaData);\r\n      if (body.facilityStatusData) buildFacilityChart(body.facilityStatusData);\r\n      if (body.familyStatusData) buildFamilyChart(body.familyStatusData);\r\n    }\r\n  } catch (e) {\r\n    console.error('dashboard load failed', e);\r\n  }\r\n}\r\n\r\nfunction buildEvacuationChart(data) {\r\n  const ctx = document.getElementById('evacuationChart');\r\n  if (!ctx) return;\r\n  const labels = data.map(d => d.name);\r\n  const occupancy = data.map(d => d.current_occupancy);\r\n  const capacity = data.map(d => d.capacity);\r\n  new Chart(ctx, {\r\n    type: 'bar',\r\n    data: {\r\n      labels,\r\n      datasets: [\r\n        { label: 'Current Occupancy', data: occupancy, backgroundColor: '#0d6efd' },\r\n        { label: 'Capacity', data: capacity, backgroundColor: '#6c757d' }\r\n      ]\r\n    }\r\n  });\r\n}\r\n\r\nfunction buildFacilityChart(data) {\r\n  const ctx = document.getElementById('facilityChart');\r\n  if (!ctx) return;\r\n  const labels = data.map(d => d.status);\r\n  const counts = data.map(d => d.count);\r\n  new Chart(ctx, {\r\n    type: 'doughnut',\r\n    data: {\r\n      labels,\r\n      datasets: [{ data: counts, backgroundColor: ['#198754', '#ffc107', '#dc3545', '#0d6efd'] }]\r\n    }\r\n  });\r\n}\r\n\r\nfunction buildFamilyChart(data) {\r\n  const ctx = document.getElementById('familyChart');\r\n  if (!ctx) return;\r\n  const labels = data.map(d => d.status);\r\n  const counts = data.map(d => d.count);\r\n  new Chart(ctx, {\r\n    type: 'pie',\r\n    data: { labels, datasets: [{ data: counts, backgroundColor: ['#0d6efd', '#6f42c1', '#fd7e14'] }] }\r\n  });\r\n}\r\n\r\nonMounted(() => {\r\n  loadDashboard();\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.grid { gap: 1rem; }\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}