{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport { reactive, ref, inject, onMounted } from 'vue';\nimport axios from 'axios';\nimport { useRouter } from 'vue-router';\nexport default {\n  __name: 'FamilyCreate',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const router = useRouter();\n    const baseUrl = inject('baseUrl', '');\n    const form = reactive({\n      family_head_name: '',\n      contact_number: '',\n      address: '',\n      total_members: 1,\n      evacuation_area_id: '',\n      status: 'pending',\n      special_needs: '',\n      members: []\n    });\n    const errors = reactive({});\n    const generalError = ref('');\n    const submitting = ref(false);\n    const evacuationAreas = ref([]);\n    onMounted(async () => {\n      await fetchEvacuationAreas();\n    });\n    async function fetchEvacuationAreas() {\n      try {\n        const res = await axios.get(`${baseUrl}/evacuation-areas`);\n        evacuationAreas.value = res.data?.data || res.data || [];\n      } catch (err) {\n        console.error('Failed to fetch evacuation areas:', err);\n      }\n    }\n    function addMember() {\n      form.members.push({\n        name: '',\n        age: null,\n        gender: ''\n      });\n    }\n    function removeMember(index) {\n      form.members.splice(index, 1);\n    }\n    async function submit() {\n      submitting.value = true;\n      generalError.value = '';\n      Object.keys(errors).forEach(k => delete errors[k]);\n      try {\n        const payload = {\n          family_head_name: form.family_head_name,\n          contact_number: form.contact_number || null,\n          address: form.address,\n          total_members: form.total_members,\n          evacuation_area_id: form.evacuation_area_id || null,\n          status: form.status,\n          special_needs: form.special_needs || null,\n          members: form.members.filter(m => m.name)\n        };\n        await axios.post(`${baseUrl}/families`, payload);\n        router.push('/families');\n      } catch (err) {\n        if (err.response?.status === 422) {\n          Object.assign(errors, err.response.data.errors || {});\n        } else if (err.response?.data?.message) {\n          generalError.value = err.response.data.message;\n        } else {\n          generalError.value = 'Failed to create family. Please try again.';\n        }\n      } finally {\n        submitting.value = false;\n      }\n    }\n    const __returned__ = {\n      router,\n      baseUrl,\n      form,\n      errors,\n      generalError,\n      submitting,\n      evacuationAreas,\n      fetchEvacuationAreas,\n      addMember,\n      removeMember,\n      submit,\n      reactive,\n      ref,\n      inject,\n      onMounted,\n      get axios() {\n        return axios;\n      },\n      get useRouter() {\n        return useRouter;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["reactive","ref","inject","onMounted","axios","useRouter","router","baseUrl","form","family_head_name","contact_number","address","total_members","evacuation_area_id","status","special_needs","members","errors","generalError","submitting","evacuationAreas","fetchEvacuationAreas","res","get","value","data","err","console","error","addMember","push","name","age","gender","removeMember","index","splice","submit","Object","keys","forEach","k","payload","filter","m","post","response","assign","message"],"sources":["C:/VUEprojects/crud-app/src/pages/FamilyCreate.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <!-- Header -->\r\n    <div class=\"header\">\r\n      <div>\r\n        <h1>Add Family</h1>\r\n        <p>Create a new family record</p>\r\n      </div>\r\n      <router-link to=\"/families\" class=\"back-link\">\r\n        <span class=\"arrow\">&#8592;</span> Back to Families\r\n      </router-link>\r\n    </div>\r\n\r\n```\r\n<!-- Form Card -->\r\n<div class=\"card\">\r\n  <!-- Error Messages -->\r\n  <div v-if=\"generalError\" class=\"error-message\">\r\n    <p>{{ generalError }}</p>\r\n  </div>\r\n\r\n  <form @submit.prevent=\"submit\">\r\n    <!-- Row 1: Family Head & Contact -->\r\n    <div class=\"form-row two-cols\">\r\n      <div class=\"form-group\">\r\n        <label>Family Head Name <span class=\"required\">*</span></label>\r\n        <input v-model=\"form.family_head_name\" type=\"text\" required />\r\n        <p v-if=\"errors.family_head_name\" class=\"error-text\">{{ errors.family_head_name }}</p>\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label>Contact Number</label>\r\n        <input v-model=\"form.contact_number\" type=\"text\" />\r\n        <p v-if=\"errors.contact_number\" class=\"error-text\">{{ errors.contact_number }}</p>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Address -->\r\n    <div class=\"form-group\">\r\n      <label>Address <span class=\"required\">*</span></label>\r\n      <textarea v-model=\"form.address\" rows=\"3\" required></textarea>\r\n      <p v-if=\"errors.address\" class=\"error-text\">{{ errors.address }}</p>\r\n    </div>\r\n\r\n    <!-- Row 2: Total Members, Evacuation Area, Status -->\r\n    <div class=\"form-row three-cols\">\r\n      <div class=\"form-group\">\r\n        <label>Total Members <span class=\"required\">*</span></label>\r\n        <input v-model.number=\"form.total_members\" type=\"number\" min=\"1\" required />\r\n        <p v-if=\"errors.total_members\" class=\"error-text\">{{ errors.total_members }}</p>\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label>Evacuation Area</label>\r\n        <select v-model=\"form.evacuation_area_id\">\r\n          <option value=\"\">Not assigned</option>\r\n          <option v-for=\"area in evacuationAreas\" :key=\"area.id\" :value=\"area.id\">{{ area.name }}</option>\r\n        </select>\r\n        <p v-if=\"errors.evacuation_area_id\" class=\"error-text\">{{ errors.evacuation_area_id }}</p>\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label>Status <span class=\"required\">*</span></label>\r\n        <select v-model=\"form.status\" required>\r\n          <option value=\"pending\">Pending</option>\r\n          <option value=\"evacuated\">Evacuated</option>\r\n          <option value=\"returned\">Returned</option>\r\n        </select>\r\n        <p v-if=\"errors.status\" class=\"error-text\">{{ errors.status }}</p>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Special Needs -->\r\n    <div class=\"form-group\">\r\n      <label>Special Needs</label>\r\n      <textarea v-model=\"form.special_needs\" rows=\"2\" placeholder=\"e.g., Elderly members, Pregnant women, Persons with disabilities\"></textarea>\r\n      <p v-if=\"errors.special_needs\" class=\"error-text\">{{ errors.special_needs }}</p>\r\n    </div>\r\n\r\n    <!-- Family Members -->\r\n    <div class=\"members-section\">\r\n      <h3>Family Members (Optional)</h3>\r\n      <div v-for=\"(member, index) in form.members\" :key=\"index\" class=\"member-card\">\r\n        <input v-model=\"member.name\" type=\"text\" placeholder=\"Name\" required />\r\n        <input v-model.number=\"member.age\" type=\"number\" min=\"0\" placeholder=\"Age\" />\r\n        <select v-model=\"member.gender\">\r\n          <option value=\"\">Gender</option>\r\n          <option value=\"male\">Male</option>\r\n          <option value=\"female\">Female</option>\r\n        </select>\r\n        <button type=\"button\" @click=\"removeMember(index)\" class=\"remove-btn\">Remove</button>\r\n      </div>\r\n      <button type=\"button\" @click=\"addMember\" class=\"add-btn\">+ Add Member</button>\r\n      <p class=\"note\">You can leave members blank if you want to add them later.</p>\r\n    </div>\r\n\r\n    <!-- Actions -->\r\n    <div class=\"form-actions\">\r\n      <router-link to=\"/families\" class=\"cancel-btn\">Cancel</router-link>\r\n      <button type=\"submit\" :disabled=\"submitting\" class=\"submit-btn\">\r\n        <span v-if=\"!submitting\">Create Family</span>\r\n        <span v-else>Creating...</span>\r\n      </button>\r\n    </div>\r\n  </form>\r\n</div>\r\n```\r\n\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { reactive, ref, inject, onMounted } from 'vue'\r\nimport axios from 'axios'\r\nimport { useRouter } from 'vue-router'\r\n\r\nconst router = useRouter()\r\nconst baseUrl = inject('baseUrl', '')\r\n\r\nconst form = reactive({\r\n  family_head_name: '',\r\n  contact_number: '',\r\n  address: '',\r\n  total_members: 1,\r\n  evacuation_area_id: '',\r\n  status: 'pending',\r\n  special_needs: '',\r\n  members: []\r\n})\r\n\r\nconst errors = reactive({})\r\nconst generalError = ref('')\r\nconst submitting = ref(false)\r\nconst evacuationAreas = ref([])\r\n\r\nonMounted(async () => {\r\n  await fetchEvacuationAreas()\r\n})\r\n\r\nasync function fetchEvacuationAreas() {\r\n  try {\r\n    const res = await axios.get(`${baseUrl}/evacuation-areas`)\r\n    evacuationAreas.value = res.data?.data || res.data || []\r\n  } catch (err) {\r\n    console.error('Failed to fetch evacuation areas:', err)\r\n  }\r\n}\r\n\r\nfunction addMember() {\r\n  form.members.push({ name: '', age: null, gender: '' })\r\n}\r\n\r\nfunction removeMember(index) {\r\n  form.members.splice(index, 1)\r\n}\r\n\r\nasync function submit() {\r\n  submitting.value = true\r\n  generalError.value = ''\r\n  Object.keys(errors).forEach(k => delete errors[k])\r\n\r\n  try {\r\n    const payload = {\r\n      family_head_name: form.family_head_name,\r\n      contact_number: form.contact_number || null,\r\n      address: form.address,\r\n      total_members: form.total_members,\r\n      evacuation_area_id: form.evacuation_area_id || null,\r\n      status: form.status,\r\n      special_needs: form.special_needs || null,\r\n      members: form.members.filter(m => m.name)\r\n    }\r\n    await axios.post(`${baseUrl}/families`, payload)\r\n    router.push('/families')\r\n  } catch (err) {\r\n    if (err.response?.status === 422) {\r\n      Object.assign(errors, err.response.data.errors || {})\r\n    } else if (err.response?.data?.message) {\r\n      generalError.value = err.response.data.message\r\n    } else {\r\n      generalError.value = 'Failed to create family. Please try again.'\r\n    }\r\n  } finally {\r\n    submitting.value = false\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n/* Container & Card */\r\n.container {\r\n  max-width: 800px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n}\r\n.card {\r\n  background-color: #fff;\r\n  border-radius: 10px;\r\n  padding: 30px;\r\n  box-shadow: 0 2px 12px rgba(0,0,0,0.08);\r\n}\r\n\r\n/* Header */\r\n.header {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 30px;\r\n}\r\n.header h1 {\r\n  font-size: 2.5rem;\r\n  margin: 0;\r\n}\r\n.header p {\r\n  color: #555;\r\n  margin-top: 5px;\r\n}\r\n.back-link {\r\n  color: #4f46e5;\r\n  text-decoration: none;\r\n  font-weight: 500;\r\n}\r\n.back-link:hover {\r\n  text-decoration: underline;\r\n}\r\n.arrow {\r\n  margin-right: 5px;\r\n}\r\n\r\n/* Error Messages */\r\n.error-message {\r\n  background-color: #fef2f2;\r\n  border-left: 4px solid #f87171;\r\n  color: #b91c1c;\r\n  padding: 15px;\r\n  border-radius: 5px;\r\n  margin-bottom: 20px;\r\n}\r\n.error-text {\r\n  color: #b91c1c;\r\n  font-size: 0.875rem;\r\n  margin-top: 5px;\r\n}\r\n\r\n/* Form Layout */\r\n.form-row {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 20px;\r\n  margin-bottom: 20px;\r\n}\r\n.two-cols > .form-group {\r\n  flex: 1 1 45%;\r\n}\r\n.three-cols > .form-group {\r\n  flex: 1 1 30%;\r\n}\r\n.form-group {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\nlabel {\r\n  margin-bottom: 5px;\r\n  font-weight: 500;\r\n}\r\n.required {\r\n  color: #dc2626;\r\n}\r\n\r\n/* Inputs and Selects */\r\ninput, select, textarea {\r\n  padding: 10px;\r\n  border: 1px solid #d1d5db;\r\n  border-radius: 8px;\r\n  font-size: 1rem;\r\n  transition: all 0.2s;\r\n}\r\ninput:focus, select:focus, textarea:focus {\r\n  outline: none;\r\n  border-color: #4f46e5;\r\n  box-shadow: 0 0 0 2px rgba(79,70,229,0.2);\r\n}\r\n\r\n/* Members Section */\r\n.members-section h3 {\r\n  font-size: 1.25rem;\r\n  font-weight: 600;\r\n  margin-bottom: 15px;\r\n}\r\n.member-card {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 15px;\r\n  background-color: #f9fafb;\r\n  padding: 15px;\r\n  border-radius: 8px;\r\n  align-items: center;\r\n  margin-bottom: 10px;\r\n}\r\n.member-card input, .member-card select {\r\n  flex: 1 1 20%;\r\n}\r\n.remove-btn {\r\n  background-color: #dc2626;\r\n  color: #fff;\r\n  border: none;\r\n  padding: 8px 12px;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  flex: 1 1 15%;\r\n}\r\n.remove-btn:hover {\r\n  background-color: #b91c1c;\r\n}\r\n.add-btn {\r\n  background-color: #16a34a;\r\n  color: #fff;\r\n  border: none;\r\n  padding: 10px 15px;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  margin-top: 5px;\r\n}\r\n.add-btn:hover {\r\n  background-color: #15803d;\r\n}\r\n.note {\r\n  font-size: 0.875rem;\r\n  color: #6b7280;\r\n  margin-top: 5px;\r\n}\r\n\r\n/* Actions */\r\n.form-actions {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 15px;\r\n  margin-top: 25px;\r\n}\r\n.cancel-btn {\r\n  background: none;\r\n  border: 1px solid #d1d5db;\r\n  padding: 10px 20px;\r\n  border-radius: 6px;\r\n  text-decoration: none;\r\n  color: #111827;\r\n}\r\n.cancel-btn:hover {\r\n  background-color: #f3f4f6;\r\n}\r\n.submit-btn {\r\n  background-color: #4f46e5;\r\n  color: #fff;\r\n  border: none;\r\n  padding: 10px 20px;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n}\r\n.submit-btn:hover {\r\n  background-color: #4338ca;\r\n}\r\n.submit-btn:disabled {\r\n  opacity: 0.6;\r\n  cursor: not-allowed;\r\n}\r\n\r\n/* Responsive */\r\n@media (max-width: 768px) {\r\n  .two-cols > .form-group, .three-cols > .form-group {\r\n    flex: 1 1 100%;\r\n  }\r\n  .member-card {\r\n    flex-direction: column;\r\n    align-items: stretch;\r\n  }\r\n  .member-card input, .member-card select, .remove-btn {\r\n    flex: 1 1 100%;\r\n  }\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}