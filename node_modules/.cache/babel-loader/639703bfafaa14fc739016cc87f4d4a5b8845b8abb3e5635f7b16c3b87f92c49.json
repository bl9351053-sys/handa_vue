{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { ref, onMounted, onUnmounted, computed } from 'vue';\nimport { useRoute } from 'vue-router';\nimport EvacuationAreaService from '@/services/EvacuationAreaService';\nimport L from 'leaflet';\nexport default {\n  __name: 'EvacuationAreaDetail',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const route = useRoute();\n    const area = ref({});\n    const families = ref([]);\n    const loading = ref(true);\n    const error = ref(null);\n\n    // User location for distance calculation\n    const userLocation = ref(null);\n\n    // Map and marker references\n    let map = null;\n    let marker = null;\n\n    /**\r\n     * Calculate occupancy percentage\r\n     */\n    function getCapacityPercent() {\n      if (!area.value.capacity) return 0;\n      return Math.min(100, (area.value.current_occupancy ?? 0) / area.value.capacity * 100);\n    }\n\n    /**\r\n     * Check if we can register a family (has space)\r\n     */\n    const canRegisterFamily = computed(() => {\n      return (area.value.current_occupancy ?? 0) < (area.value.capacity ?? 0);\n    });\n\n    /**\r\n     * Format date helper\r\n     */\n    function formatDate(dateString) {\n      if (!dateString) return '‚Äî';\n      try {\n        const date = new Date(dateString);\n        return date.toLocaleDateString('en-US', {\n          year: 'numeric',\n          month: 'short',\n          day: 'numeric',\n          hour: '2-digit',\n          minute: '2-digit'\n        });\n      } catch (e) {\n        return dateString;\n      }\n    }\n\n    /**\r\n     * Capitalize first letter\r\n     */\n    function capitalizeFirst(str) {\n      if (!str) return '';\n      return str.charAt(0).toUpperCase() + str.slice(1);\n    }\n\n    /**\r\n     * Calculate distance between two coordinates using Haversine formula\r\n     * @param {number} lat1 - Latitude of first point\r\n     * @param {number} lon1 - Longitude of first point\r\n     * @param {number} lat2 - Latitude of second point\r\n     * @param {number} lon2 - Longitude of second point\r\n     * @returns {number} Distance in kilometers\r\n     */\n    function calculateDistance(lat1, lon1, lat2, lon2) {\n      const R = 6371; // Earth's radius in kilometers\n      const dLat = (lat2 - lat1) * Math.PI / 180;\n      const dLon = (lon2 - lon1) * Math.PI / 180;\n      const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) * Math.sin(dLon / 2) * Math.sin(dLon / 2);\n      const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n      return R * c;\n    }\n\n    /**\r\n     * Get user location using Geolocation API\r\n     */\n    function getUserLocation() {\n      return new Promise(resolve => {\n        if (!navigator.geolocation) {\n          console.warn('[EvacDetail] Geolocation not supported');\n          resolve(null);\n          return;\n        }\n        navigator.geolocation.getCurrentPosition(position => {\n          const location = {\n            latitude: position.coords.latitude,\n            longitude: position.coords.longitude\n          };\n          console.debug('[EvacDetail] User location:', location);\n          resolve(location);\n        }, error => {\n          console.warn('[EvacDetail] Geolocation error:', error.message);\n          resolve(null); // Resolve with null instead of rejecting to allow the app to continue\n        }, {\n          enableHighAccuracy: true,\n          timeout: 10000,\n          maximumAge: 300000 // 5 minutes\n        });\n      });\n    }\n\n    /**\r\n     * Initialize the Leaflet map\r\n     */\n    function initializeMap() {\n      if (!area.value.latitude || !area.value.longitude) {\n        console.warn('[EvacDetail] No coordinates available for map');\n        return;\n      }\n\n      // Clean up existing map if any\n      cleanupMap();\n      try {\n        // Initialize map\n        map = L.map('map').setView([area.value.latitude, area.value.longitude], 15);\n\n        // Add OpenStreetMap tiles\n        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n          attribution: '¬© OpenStreetMap contributors'\n        }).addTo(map);\n\n        // Add marker\n        marker = L.marker([area.value.latitude, area.value.longitude]).addTo(map).bindPopup(`<b>${area.value.name || 'Evacuation Area'}</b><br>${area.value.address || ''}`).openPopup();\n        console.debug('[EvacDetail] Map initialized');\n      } catch (e) {\n        console.error('[EvacDetail] Map initialization error:', e);\n      }\n    }\n\n    /**\r\n     * Clean up the map to prevent memory leaks\r\n     */\n    function cleanupMap() {\n      if (map) {\n        map.remove();\n        map = null;\n        marker = null;\n        console.debug('[EvacDetail] Map cleaned up');\n      }\n    }\n\n    /**\r\n     * Fetch evacuation area details\r\n     */\n    async function fetchArea() {\n      loading.value = true;\n      error.value = null;\n      try {\n        const id = route.params.id;\n        console.debug('[EvacDetail] fetching area with id:', id);\n\n        // Get user location for accurate distance calculation\n        userLocation.value = await getUserLocation();\n        const response = await EvacuationAreaService.getById(id, userLocation.value?.latitude, userLocation.value?.longitude);\n        area.value = response || {};\n\n        // Normalize numeric fields to avoid runtime template errors (toFixed expects Number)\n        area.value.capacity = area.value.capacity === null || area.value.capacity === undefined ? 0 : Number(area.value.capacity);\n        if (Number.isNaN(area.value.capacity)) area.value.capacity = 0;\n        area.value.current_occupancy = area.value.current_occupancy === null || area.value.current_occupancy === undefined ? 0 : Number(area.value.current_occupancy);\n        if (Number.isNaN(area.value.current_occupancy)) area.value.current_occupancy = 0;\n        area.value.distance = area.value.distance === null || area.value.distance === undefined ? null : Number(area.value.distance);\n        if (area.value.distance !== null && Number.isNaN(area.value.distance)) area.value.distance = null;\n\n        // Calculate distance on frontend if not provided by API and we have user location\n        if (area.value.distance === null && userLocation.value && area.value.latitude && area.value.longitude) {\n          area.value.distance = calculateDistance(userLocation.value.latitude, userLocation.value.longitude, area.value.latitude, area.value.longitude);\n        }\n        families.value = area.value.families || [];\n        console.log('[EvacDetail] Area loaded:', {\n          id: area.value.id,\n          name: area.value.name,\n          capacity: area.value.capacity,\n          families_count: families.value.length\n        });\n\n        // Initialize map after data is loaded\n        initializeMap();\n      } catch (e) {\n        console.error('[EvacDetail] fetch error', e);\n        error.value = e.response?.data?.message || e.message || 'Failed to load evacuation area';\n      } finally {\n        loading.value = false;\n      }\n    }\n    onMounted(() => {\n      fetchArea();\n    });\n    onUnmounted(() => {\n      cleanupMap();\n    });\n    const __returned__ = {\n      route,\n      area,\n      families,\n      loading,\n      error,\n      userLocation,\n      get map() {\n        return map;\n      },\n      set map(v) {\n        map = v;\n      },\n      get marker() {\n        return marker;\n      },\n      set marker(v) {\n        marker = v;\n      },\n      getCapacityPercent,\n      canRegisterFamily,\n      formatDate,\n      capitalizeFirst,\n      calculateDistance,\n      getUserLocation,\n      initializeMap,\n      cleanupMap,\n      fetchArea,\n      ref,\n      onMounted,\n      onUnmounted,\n      computed,\n      get useRoute() {\n        return useRoute;\n      },\n      get EvacuationAreaService() {\n        return EvacuationAreaService;\n      },\n      get L() {\n        return L;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","onUnmounted","computed","useRoute","EvacuationAreaService","L","route","area","families","loading","error","userLocation","map","marker","getCapacityPercent","value","capacity","Math","min","current_occupancy","canRegisterFamily","formatDate","dateString","date","Date","toLocaleDateString","year","month","day","hour","minute","e","capitalizeFirst","str","charAt","toUpperCase","slice","calculateDistance","lat1","lon1","lat2","lon2","R","dLat","PI","dLon","a","sin","cos","c","atan2","sqrt","getUserLocation","Promise","resolve","navigator","geolocation","console","warn","getCurrentPosition","position","location","latitude","coords","longitude","debug","message","enableHighAccuracy","timeout","maximumAge","initializeMap","cleanupMap","setView","tileLayer","attribution","addTo","bindPopup","name","address","openPopup","remove","fetchArea","id","params","response","getById","undefined","Number","isNaN","distance","log","families_count","length","data"],"sources":["C:/VUEprojects/crud-app/src/pages/resident_pages/EvacuationAreaDetail.vue"],"sourcesContent":["<template>\r\n  <div class=\"evac-detail\">\r\n    <!-- Loading State -->\r\n    <div v-if=\"loading\" class=\"card\">\r\n      <div class=\"card-header\">\r\n        <div class=\"spinner-border spinner-sm me-2\"></div>\r\n        Loading evacuation area‚Ä¶\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Error State -->\r\n    <div v-else-if=\"error\" class=\"card\">\r\n      <div class=\"card-header\">‚ö†Ô∏è Error</div>\r\n      <div class=\"error-msg p-3\">{{ error }}</div>\r\n    </div>\r\n\r\n    <!-- Main Content -->\r\n    <div v-else>\r\n      <!-- Area Overview Card -->\r\n      <div class=\"card\">\r\n        <div class=\"card-header-flex\">\r\n          <h1 class=\"card-title\">üè¢ {{ area.name || 'Evacuation Area' }}</h1>\r\n          <router-link to=\"/resident_pages/evacuation-areas\" class=\"btn btn-secondary\">\r\n            ‚Üê Back to List\r\n          </router-link>\r\n        </div>\r\n        \r\n        <div class=\"grid-2col\">\r\n          <!-- Left Column: Details -->\r\n          <div>\r\n            <h3 class=\"detail-title\">Details</h3>\r\n            \r\n            <div class=\"mb-1\">\r\n              <strong>Address:</strong>\r\n              <p class=\"text-muted\" style=\"margin-top: 0.25rem;\">\r\n                {{ area.address || '(No address data)' }}\r\n              </p>\r\n            </div>\r\n            \r\n            <div class=\"mb-1\">\r\n              <strong>Coordinates:</strong>\r\n              <p class=\"text-muted\" style=\"margin-top: 0.25rem;\">\r\n                {{ area.latitude ?? '‚Äî' }}, {{ area.longitude ?? '‚Äî' }}\r\n              </p>\r\n            </div>\r\n\r\n            <div v-if=\"area.distance !== null\" class=\"mb-1\">\r\n              <strong>Distance from your location:</strong>\r\n              <p class=\"text-muted\" style=\"margin-top: 0.25rem;\">\r\n                {{ area.distance.toFixed(2) }} km\r\n              </p>\r\n            </div>\r\n            \r\n            <div class=\"mb-1\">\r\n              <strong>Capacity:</strong>\r\n              <p class=\"text-muted\" style=\"margin-top: 0.25rem;\">\r\n                {{ area.capacity ?? 'N/A' }} people\r\n              </p>\r\n            </div>\r\n            \r\n            <div class=\"mb-1\">\r\n              <strong>Current Occupancy:</strong>\r\n              <p class=\"text-muted\" style=\"margin-top: 0.25rem;\">\r\n                {{ area.current_occupancy ?? 0 }} / {{ area.capacity ?? 'N/A' }} ({{ getCapacityPercent().toFixed(0) }}%)\r\n              </p>\r\n              <div class=\"progress-bar-container\" style=\"height: 20px; border-radius: 10px; margin-top: 0.5rem;\">\r\n                <div \r\n                  class=\"progress-bar\" \r\n                  :class=\"getCapacityPercent() >= 90 ? 'danger' : (getCapacityPercent() >= 70 ? 'warning' : 'success')\"\r\n                  :style=\"{ width: getCapacityPercent() + '%', 'border-radius': '10px', transition: 'width 0.3s' }\"\r\n                ></div>\r\n              </div>\r\n            </div>\r\n            \r\n            <div class=\"mb-1\">\r\n              <strong>Available Space:</strong>\r\n              <p class=\"text-muted\" style=\"margin-top: 0.25rem;\">\r\n                {{ (area.capacity - (area.current_occupancy ?? 0)) || 0 }} people\r\n              </p>\r\n            </div>\r\n            \r\n            <div class=\"mb-1\">\r\n              <strong>Status:</strong>\r\n              <p style=\"margin-top: 0.25rem;\">\r\n                <span :class=\"['badge', 'badge-' + (area.status == 'available' ? 'success' : (area.status == 'full' ? 'danger' : 'warning'))]\">\r\n                  {{ capitalizeFirst(area.status) || 'Unknown' }}\r\n                </span>\r\n              </p>\r\n            </div>\r\n            \r\n\r\n            \r\n            <div v-if=\"area.facilities\" class=\"mb-1\">\r\n              <strong>Facilities:</strong>\r\n              <p class=\"text-muted\" style=\"margin-top: 0.25rem;\">{{ area.facilities }}</p>\r\n            </div>\r\n            \r\n            <div v-if=\"area.contact_number\" class=\"mb-1\">\r\n              <strong>Contact Number:</strong>\r\n              <p class=\"text-muted\" style=\"margin-top: 0.25rem;\">{{ area.contact_number }}</p>\r\n            </div>\r\n          </div>\r\n          \r\n          <!-- Right Column: Map & Action -->\r\n          <div>\r\n            <h3 class=\"detail-title\">Location</h3>\r\n            <div id=\"map\" class=\"map-container\"></div>\r\n            \r\n            <router-link \r\n              v-if=\"area.id && canRegisterFamily\"\r\n              :to=\"`/resident_pages/evacuation-areas/${area.id}/register-family`\"\r\n              class=\"btn btn-primary btn-large\"\r\n            >\r\n              üë• Register My Family\r\n            </router-link>\r\n            <div v-else-if=\"!area.id\" class=\"btn btn-primary btn-large\" style=\"opacity: 0.5; cursor: not-allowed;\">\r\n              üë• Loading...\r\n            </div>\r\n            <div v-else class=\"btn btn-primary btn-large\" style=\"opacity: 0.5; cursor: not-allowed;\">\r\n              ‚ùå Capacity Full\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Families List -->\r\n      <div class=\"card\">\r\n        <div class=\"card-header\">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Families ({{ families ? families.length : 0 }})</div>\r\n        \r\n        <div v-if=\"families && families.length\" class=\"table-responsive\">\r\n          <table class=\"table\">\r\n            <thead>\r\n              <tr>\r\n                <th>Family Name</th>\r\n                <th>Members</th>\r\n                <th>Contact</th>\r\n                <th>Special Needs</th>\r\n                <th>Checked In</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr v-for=\"f in families\" :key=\"f.id\">\r\n                <td><strong>{{ f.family_head_name }}</strong></td>\r\n                <td>{{ f.total_members }}</td>\r\n                <td>{{ f.contact_number }}</td>\r\n                <td>{{ f.special_needs ?? 'None' }}</td>\r\n                <td>{{ formatDate(f.checked_in_at) ?? 'Not Checked In' }}</td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <div v-else class=\"p-1\">\r\n          <p class=\"text-muted\">No families currently in this evacuation area.</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, onUnmounted, computed } from 'vue';\r\nimport { useRoute } from 'vue-router';\r\nimport EvacuationAreaService from '@/services/EvacuationAreaService';\r\nimport L from 'leaflet';\r\n\r\nconst route = useRoute();\r\n\r\nconst area = ref({});\r\nconst families = ref([]);\r\nconst loading = ref(true);\r\nconst error = ref(null);\r\n\r\n// User location for distance calculation\r\nconst userLocation = ref(null);\r\n\r\n// Map and marker references\r\nlet map = null;\r\nlet marker = null;\r\n\r\n/**\r\n * Calculate occupancy percentage\r\n */\r\nfunction getCapacityPercent() {\r\n  if (!area.value.capacity) return 0;\r\n  return Math.min(100, ((area.value.current_occupancy ?? 0) / area.value.capacity) * 100);\r\n}\r\n\r\n/**\r\n * Check if we can register a family (has space)\r\n */\r\nconst canRegisterFamily = computed(() => {\r\n  return (area.value.current_occupancy ?? 0) < (area.value.capacity ?? 0);\r\n});\r\n\r\n/**\r\n * Format date helper\r\n */\r\nfunction formatDate(dateString) {\r\n  if (!dateString) return '‚Äî';\r\n  try {\r\n    const date = new Date(dateString);\r\n    return date.toLocaleDateString('en-US', { \r\n      year: 'numeric', \r\n      month: 'short', \r\n      day: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  } catch (e) {\r\n    return dateString;\r\n  }\r\n}\r\n\r\n/**\r\n * Capitalize first letter\r\n */\r\nfunction capitalizeFirst(str) {\r\n  if (!str) return '';\r\n  return str.charAt(0).toUpperCase() + str.slice(1);\r\n}\r\n\r\n/**\r\n * Calculate distance between two coordinates using Haversine formula\r\n * @param {number} lat1 - Latitude of first point\r\n * @param {number} lon1 - Longitude of first point\r\n * @param {number} lat2 - Latitude of second point\r\n * @param {number} lon2 - Longitude of second point\r\n * @returns {number} Distance in kilometers\r\n */\r\nfunction calculateDistance(lat1, lon1, lat2, lon2) {\r\n  const R = 6371; // Earth's radius in kilometers\r\n  const dLat = (lat2 - lat1) * Math.PI / 180;\r\n  const dLon = (lon2 - lon1) * Math.PI / 180;\r\n  const a =\r\n    Math.sin(dLat / 2) * Math.sin(dLat / 2) +\r\n    Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *\r\n    Math.sin(dLon / 2) * Math.sin(dLon / 2);\r\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n  return R * c;\r\n}\r\n\r\n/**\r\n * Get user location using Geolocation API\r\n */\r\nfunction getUserLocation() {\r\n  return new Promise((resolve) => {\r\n    if (!navigator.geolocation) {\r\n      console.warn('[EvacDetail] Geolocation not supported');\r\n      resolve(null);\r\n      return;\r\n    }\r\n\r\n    navigator.geolocation.getCurrentPosition(\r\n      (position) => {\r\n        const location = {\r\n          latitude: position.coords.latitude,\r\n          longitude: position.coords.longitude\r\n        };\r\n        console.debug('[EvacDetail] User location:', location);\r\n        resolve(location);\r\n      },\r\n      (error) => {\r\n        console.warn('[EvacDetail] Geolocation error:', error.message);\r\n        resolve(null); // Resolve with null instead of rejecting to allow the app to continue\r\n      },\r\n      {\r\n        enableHighAccuracy: true,\r\n        timeout: 10000,\r\n        maximumAge: 300000 // 5 minutes\r\n      }\r\n    );\r\n  });\r\n}\r\n\r\n/**\r\n * Initialize the Leaflet map\r\n */\r\nfunction initializeMap() {\r\n  if (!area.value.latitude || !area.value.longitude) {\r\n    console.warn('[EvacDetail] No coordinates available for map');\r\n    return;\r\n  }\r\n\r\n  // Clean up existing map if any\r\n  cleanupMap();\r\n\r\n  try {\r\n    // Initialize map\r\n    map = L.map('map').setView([area.value.latitude, area.value.longitude], 15);\r\n\r\n    // Add OpenStreetMap tiles\r\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n      attribution: '¬© OpenStreetMap contributors'\r\n    }).addTo(map);\r\n\r\n    // Add marker\r\n    marker = L.marker([area.value.latitude, area.value.longitude])\r\n      .addTo(map)\r\n      .bindPopup(`<b>${area.value.name || 'Evacuation Area'}</b><br>${area.value.address || ''}`)\r\n      .openPopup();\r\n\r\n    console.debug('[EvacDetail] Map initialized');\r\n  } catch (e) {\r\n    console.error('[EvacDetail] Map initialization error:', e);\r\n  }\r\n}\r\n\r\n/**\r\n * Clean up the map to prevent memory leaks\r\n */\r\nfunction cleanupMap() {\r\n  if (map) {\r\n    map.remove();\r\n    map = null;\r\n    marker = null;\r\n    console.debug('[EvacDetail] Map cleaned up');\r\n  }\r\n}\r\n\r\n/**\r\n * Fetch evacuation area details\r\n */\r\nasync function fetchArea() {\r\n  loading.value = true;\r\n  error.value = null;\r\n  try {\r\n    const id = route.params.id;\r\n    console.debug('[EvacDetail] fetching area with id:', id);\r\n\r\n    // Get user location for accurate distance calculation\r\n    userLocation.value = await getUserLocation();\r\n\r\n    const response = await EvacuationAreaService.getById(\r\n      id,\r\n      userLocation.value?.latitude,\r\n      userLocation.value?.longitude\r\n    );\r\n\r\n    area.value = response || {};\r\n\r\n    // Normalize numeric fields to avoid runtime template errors (toFixed expects Number)\r\n    area.value.capacity = (area.value.capacity === null || area.value.capacity === undefined) ? 0 : Number(area.value.capacity);\r\n    if (Number.isNaN(area.value.capacity)) area.value.capacity = 0;\r\n    area.value.current_occupancy = (area.value.current_occupancy === null || area.value.current_occupancy === undefined) ? 0 : Number(area.value.current_occupancy);\r\n    if (Number.isNaN(area.value.current_occupancy)) area.value.current_occupancy = 0;\r\n    area.value.distance = (area.value.distance === null || area.value.distance === undefined) ? null : Number(area.value.distance);\r\n    if (area.value.distance !== null && Number.isNaN(area.value.distance)) area.value.distance = null;\r\n\r\n    // Calculate distance on frontend if not provided by API and we have user location\r\n    if (area.value.distance === null && userLocation.value && area.value.latitude && area.value.longitude) {\r\n      area.value.distance = calculateDistance(\r\n        userLocation.value.latitude,\r\n        userLocation.value.longitude,\r\n        area.value.latitude,\r\n        area.value.longitude\r\n      );\r\n    }\r\n\r\n    families.value = area.value.families || [];\r\n\r\n    console.log('[EvacDetail] Area loaded:', {\r\n      id: area.value.id,\r\n      name: area.value.name,\r\n      capacity: area.value.capacity,\r\n      families_count: families.value.length\r\n    });\r\n\r\n    // Initialize map after data is loaded\r\n    initializeMap();\r\n  } catch (e) {\r\n    console.error('[EvacDetail] fetch error', e);\r\n    error.value = e.response?.data?.message || e.message || 'Failed to load evacuation area';\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n}\r\n\r\nonMounted(() => {\r\n  fetchArea();\r\n});\r\n\r\nonUnmounted(() => {\r\n  cleanupMap();\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.evac-detail {\r\n  padding: 1rem;\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n}\r\n\r\n/* Header Controls */\r\n.flex-between {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.flex-gap-small {\r\n  display: flex;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.mb-15 {\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n.mb-1 {\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.card-header-no-border {\r\n  border: none;\r\n  padding: 0;\r\n  background: transparent;\r\n  font-size: 1.5rem;\r\n  font-weight: 700;\r\n}\r\n\r\n/* Grid Layout */\r\n.grid-2col {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr;\r\n  gap: 2rem;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .grid-2col {\r\n    grid-template-columns: 1fr;\r\n  }\r\n}\r\n\r\n.detail-title {\r\n  margin: 0 0 1rem 0;\r\n  font-size: 1rem;\r\n  font-weight: 700;\r\n  color: #374151;\r\n}\r\n\r\n.text-muted {\r\n  color: #666;\r\n}\r\n\r\nstrong {\r\n  font-weight: 600;\r\n  color: #374151;\r\n}\r\n\r\np {\r\n  margin: 0;\r\n  line-height: 1.6;\r\n}\r\n\r\nh3 {\r\n  margin: 0;\r\n}\r\n\r\n/* Progress Bar */\r\n.progress-bar-container {\r\n  height: 20px;\r\n  border-radius: 10px;\r\n  background: #e6edf3;\r\n  overflow: hidden;\r\n}\r\n\r\n.progress-bar {\r\n  height: 100%;\r\n  transition: width 0.3s;\r\n}\r\n\r\n.progress-bar.success {\r\n  background: #28a745;\r\n}\r\n\r\n.progress-bar.warning {\r\n  background: #ffc107;\r\n}\r\n\r\n.progress-bar.danger {\r\n  background: #dc3545;\r\n}\r\n\r\n/* Badge Styles */\r\n.badge {\r\n  display: inline-block;\r\n  padding: 0.25rem 0.75rem;\r\n  border-radius: 9999px;\r\n  font-weight: 600;\r\n  font-size: 0.85rem;\r\n}\r\n\r\n.badge-success {\r\n  background: #ecfdf5;\r\n  color: #065f46;\r\n}\r\n\r\n.badge-danger {\r\n  background: #fff1f2;\r\n  color: #7f1d1d;\r\n}\r\n\r\n.badge-warning {\r\n  background: #fff7ed;\r\n  color: #92400e;\r\n}\r\n\r\n/* Cards */\r\n.card {\r\n  background: white;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\r\n  margin-bottom: 1rem;\r\n  overflow: hidden;\r\n}\r\n\r\n.card-header {\r\n  padding: 1rem;\r\n  font-weight: 700;\r\n  border-bottom: 1px solid #e6edf3;\r\n  background: linear-gradient(180deg, #f8fafc 0%, #eef2f6 100%);\r\n  font-size: 1rem;\r\n}\r\n\r\n.card-header-flex {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  gap: 1rem;\r\n}\r\n\r\n.card-title {\r\n  margin: 0;\r\n  font-size: 1.5rem;\r\n  font-weight: 700;\r\n}\r\n\r\n/* Map Container */\r\n.map-container {\r\n  height: 300px;\r\n  border-radius: 8px;\r\n  border: 1px solid #e6edf3;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n/* Buttons */\r\n.btn {\r\n  padding: 8px 12px;\r\n  border-radius: 6px;\r\n  color: white;\r\n  text-decoration: none;\r\n  background: #667eea;\r\n  border: none;\r\n  cursor: pointer;\r\n  font-size: 0.9rem;\r\n  transition: background 200ms ease;\r\n  display: inline-block;\r\n  text-align: center;\r\n}\r\n\r\n.btn:hover {\r\n  opacity: 0.9;\r\n}\r\n\r\n.btn-secondary {\r\n  background: #6c757d;\r\n}\r\n\r\n.btn-primary {\r\n  background: #667eea;\r\n}\r\n\r\n.btn-large {\r\n  width: 100%;\r\n  padding: 12px;\r\n  font-size: 1rem;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n/* Table Styles */\r\n.table-responsive {\r\n  overflow: auto;\r\n}\r\n\r\n.table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n}\r\n\r\n.table thead {\r\n  background: linear-gradient(180deg, #f8fafc 0%, #eef2f6 100%);\r\n}\r\n\r\n.table th {\r\n  padding: 10px;\r\n  border-bottom: 2px solid #ddd;\r\n  text-align: left;\r\n  font-weight: 700;\r\n  color: #374151;\r\n  font-size: 0.875rem;\r\n}\r\n\r\n.table td {\r\n  padding: 10px;\r\n  border-bottom: 1px solid #eee;\r\n}\r\n\r\n.table tbody tr:nth-child(even) {\r\n  background: #fbfdfe;\r\n}\r\n\r\n.table tbody tr:hover {\r\n  background: #f9fafb;\r\n}\r\n\r\n.text-center {\r\n  text-align: center;\r\n}\r\n\r\n.p-1 {\r\n  padding: 1rem;\r\n}\r\n\r\n.error-msg {\r\n  color: #b00020;\r\n  font-size: 0.9rem;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}