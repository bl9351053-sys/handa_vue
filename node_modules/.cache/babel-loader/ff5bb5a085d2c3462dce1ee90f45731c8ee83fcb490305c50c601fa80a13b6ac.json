{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport { ref, onMounted, inject } from 'vue';\nimport axios from 'axios';\nexport default {\n  __name: 'FacilitiesList',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const baseUrl = inject('baseUrl', '');\n    const facilities = ref([]);\n    const loading = ref(false);\n    const generalError = ref('');\n    onMounted(async () => {\n      await fetchFacilities();\n    });\n    async function fetchFacilities() {\n      loading.value = true;\n      generalError.value = '';\n      try {\n        const res = await axios.get(`${baseUrl}/facilities`);\n        facilities.value = res.data?.data || res.data || [];\n      } catch (err) {\n        generalError.value = 'Failed to load facilities. Please try again.';\n        console.error('Fetch facilities error:', err);\n      } finally {\n        loading.value = false;\n      }\n    }\n    function getStatusBadge(status) {\n      const badges = {\n        operational: 'bg-green-100 text-green-800',\n        limited: 'bg-yellow-100 text-yellow-800',\n        offline: 'bg-gray-100 text-gray-800',\n        emergency: 'bg-red-100 text-red-800'\n      };\n      return badges[status] || 'bg-gray-100 text-gray-800';\n    }\n    function capitalizeStatus(status) {\n      return status.charAt(0).toUpperCase() + status.slice(1);\n    }\n    function formatDate(date) {\n      if (!date) return 'Never';\n      return new Date(date).toLocaleDateString('en-US', {\n        month: 'short',\n        day: 'numeric',\n        year: 'numeric'\n      });\n    }\n    async function deleteFacility(id) {\n      if (!confirm('Are you sure you want to delete this facility?')) return;\n      try {\n        await axios.delete(`${baseUrl}/facilities/${id}`);\n        facilities.value = facilities.value.filter(f => f.id !== id);\n      } catch (err) {\n        generalError.value = 'Failed to delete facility. Please try again.';\n        console.error('Delete facility error:', err);\n      }\n    }\n    const __returned__ = {\n      baseUrl,\n      facilities,\n      loading,\n      generalError,\n      fetchFacilities,\n      getStatusBadge,\n      capitalizeStatus,\n      formatDate,\n      deleteFacility,\n      ref,\n      onMounted,\n      inject,\n      get axios() {\n        return axios;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","inject","axios","baseUrl","facilities","loading","generalError","fetchFacilities","value","res","get","data","err","console","error","getStatusBadge","status","badges","operational","limited","offline","emergency","capitalizeStatus","charAt","toUpperCase","slice","formatDate","date","Date","toLocaleDateString","month","day","year","deleteFacility","id","confirm","delete","filter","f"],"sources":["C:/VUEprojects/crud-app/src/pages/FacilitiesList.vue"],"sourcesContent":["<template>\r\n  <div class=\"min-h-screen bg-gray-100 p-6\">\r\n    <div class=\"max-w-7xl mx-auto\">\r\n      <!-- Header -->\r\n      <div class=\"mb-8 flex justify-between items-center\">\r\n        <div class=\"pr-4 flex-1 min-w-0\">\r\n          <h1 class=\"text-4xl font-bold text-gray-900 truncate\">Facilities</h1>\r\n          <p class=\"text-gray-600 mt-1 truncate\">Monitor emergency facilities and resources</p>\r\n        </div>\r\n        <router-link to=\"/facilities/create\" class=\"ml-4 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 font-medium flex items-center gap-2 whitespace-nowrap\">\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 4v16m8-8H4\" />\r\n          </svg>\r\n          Add Facility\r\n        </router-link>\r\n      </div>\r\n\r\n      <!-- Error Message -->\r\n      <div v-if=\"generalError\" class=\"mb-6 bg-red-50 border-l-4 border-red-500 text-red-800 px-6 py-4 rounded\">\r\n        <p class=\"text-sm\">{{ generalError }}</p>\r\n      </div>\r\n\r\n      <!-- Loading State -->\r\n      <div v-if=\"loading\" class=\"bg-white rounded-lg shadow p-8 text-center\">\r\n        <div class=\"inline-flex items-center gap-2\">\r\n          <svg class=\"animate-spin h-6 w-6 text-indigo-600\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n            <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\r\n            <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8v8z\"></path>\r\n          </svg>\r\n          <span class=\"text-gray-600\">Loading facilities...</span>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Facilities Table -->\r\n      <div v-else class=\"bg-white rounded-lg shadow overflow-hidden\">\r\n        <div class=\"w-full overflow-x-auto\">\r\n        <table class=\"min-w-full divide-y divide-gray-200\">\r\n          <thead class=\"bg-gray-50\">\r\n            <tr>\r\n              <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Name</th>\r\n              <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Type</th>\r\n              <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Status</th>\r\n              <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Staff</th>\r\n              <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Last Checked</th>\r\n              <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Actions</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody class=\"bg-white divide-y divide-gray-200\">\r\n            <tr v-for=\"facility in facilities\" :key=\"facility.id\" class=\"hover:bg-gray-50\">\r\n              <td class=\"px-6 py-4 whitespace-nowrap\">\r\n                <div class=\"text-sm font-medium text-gray-900\">{{ facility.name }}</div>\r\n                <div class=\"text-sm text-gray-500\">{{ (facility.address || '').substring(0, 40) }}{{ (facility.address && facility.address.length>40) ? '...' : '' }}</div>\r\n              </td>\r\n              <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                {{ facility.type }}\r\n              </td>\r\n              <td class=\"px-6 py-4 whitespace-nowrap\">\r\n                <span :class=\"getStatusBadge(facility.status)\" class=\"px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full\">\r\n                  {{ capitalizeStatus(facility.status) }}\r\n                </span>\r\n              </td>\r\n              <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                {{ facility.staff_count }}\r\n              </td>\r\n              <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                {{ formatDate(facility.last_checked) }}\r\n              </td>\r\n              <td class=\"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-3\">\r\n                <router-link :to=\"`/facilities/${facility.id}`\" class=\"text-indigo-600 hover:text-indigo-900\">View</router-link>\r\n                <router-link :to=\"`/facilities/${facility.id}/edit`\" class=\"text-green-600 hover:text-green-900\">Edit</router-link>\r\n                <button @click=\"deleteFacility(facility.id)\" class=\"text-red-600 hover:text-red-900\">Delete</button>\r\n              </td>\r\n            </tr>\r\n            <tr v-if=\"facilities.length === 0\">\r\n              <td colspan=\"6\" class=\"px-6 py-4 text-center text-gray-500\">No facilities found</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, inject } from 'vue'\r\nimport axios from 'axios'\r\n\r\nconst baseUrl = inject('baseUrl', '')\r\n\r\nconst facilities = ref([])\r\nconst loading = ref(false)\r\nconst generalError = ref('')\r\n\r\nonMounted(async () => {\r\n  await fetchFacilities()\r\n})\r\n\r\nasync function fetchFacilities() {\r\n  loading.value = true\r\n  generalError.value = ''\r\n  try {\r\n    const res = await axios.get(`${baseUrl}/facilities`)\r\n    facilities.value = res.data?.data || res.data || []\r\n  } catch (err) {\r\n    generalError.value = 'Failed to load facilities. Please try again.'\r\n    console.error('Fetch facilities error:', err)\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\nfunction getStatusBadge(status) {\r\n  const badges = {\r\n    operational: 'bg-green-100 text-green-800',\r\n    limited: 'bg-yellow-100 text-yellow-800',\r\n    offline: 'bg-gray-100 text-gray-800',\r\n    emergency: 'bg-red-100 text-red-800'\r\n  }\r\n  return badges[status] || 'bg-gray-100 text-gray-800'\r\n}\r\n\r\nfunction capitalizeStatus(status) {\r\n  return status.charAt(0).toUpperCase() + status.slice(1)\r\n}\r\n\r\nfunction formatDate(date) {\r\n  if (!date) return 'Never'\r\n  return new Date(date).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })\r\n}\r\n\r\nasync function deleteFacility(id) {\r\n  if (!confirm('Are you sure you want to delete this facility?')) return\r\n  \r\n  try {\r\n    await axios.delete(`${baseUrl}/facilities/${id}`)\r\n    facilities.value = facilities.value.filter(f => f.id !== id)\r\n  } catch (err) {\r\n    generalError.value = 'Failed to delete facility. Please try again.'\r\n    console.error('Delete facility error:', err)\r\n  }\r\n}\r\n</script>\r\n"],"mappings":";;AAqFA,SAASA,GAAG,EAAEC,SAAS,EAAEC,MAAM,QAAQ,KAAK;AAC5C,OAAOC,KAAK,MAAM,OAAO;;;;;;;IAEzB,MAAMC,OAAO,GAAGF,MAAM,CAAC,SAAS,EAAE,EAAE,CAAC;IAErC,MAAMG,UAAU,GAAGL,GAAG,CAAC,EAAE,CAAC;IAC1B,MAAMM,OAAO,GAAGN,GAAG,CAAC,KAAK,CAAC;IAC1B,MAAMO,YAAY,GAAGP,GAAG,CAAC,EAAE,CAAC;IAE5BC,SAAS,CAAC,YAAY;MACpB,MAAMO,eAAe,CAAC,CAAC;IACzB,CAAC,CAAC;IAEF,eAAeA,eAAeA,CAAA,EAAG;MAC/BF,OAAO,CAACG,KAAK,GAAG,IAAI;MACpBF,YAAY,CAACE,KAAK,GAAG,EAAE;MACvB,IAAI;QACF,MAAMC,GAAG,GAAG,MAAMP,KAAK,CAACQ,GAAG,CAAC,GAAGP,OAAO,aAAa,CAAC;QACpDC,UAAU,CAACI,KAAK,GAAGC,GAAG,CAACE,IAAI,EAAEA,IAAI,IAAIF,GAAG,CAACE,IAAI,IAAI,EAAE;MACrD,CAAC,CAAC,OAAOC,GAAG,EAAE;QACZN,YAAY,CAACE,KAAK,GAAG,8CAA8C;QACnEK,OAAO,CAACC,KAAK,CAAC,yBAAyB,EAAEF,GAAG,CAAC;MAC/C,CAAC,SAAS;QACRP,OAAO,CAACG,KAAK,GAAG,KAAK;MACvB;IACF;IAEA,SAASO,cAAcA,CAACC,MAAM,EAAE;MAC9B,MAAMC,MAAM,GAAG;QACbC,WAAW,EAAE,6BAA6B;QAC1CC,OAAO,EAAE,+BAA+B;QACxCC,OAAO,EAAE,2BAA2B;QACpCC,SAAS,EAAE;MACb,CAAC;MACD,OAAOJ,MAAM,CAACD,MAAM,CAAC,IAAI,2BAA2B;IACtD;IAEA,SAASM,gBAAgBA,CAACN,MAAM,EAAE;MAChC,OAAOA,MAAM,CAACO,MAAM,CAAC,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,GAAGR,MAAM,CAACS,KAAK,CAAC,CAAC,CAAC;IACzD;IAEA,SAASC,UAAUA,CAACC,IAAI,EAAE;MACxB,IAAI,CAACA,IAAI,EAAE,OAAO,OAAO;MACzB,OAAO,IAAIC,IAAI,CAACD,IAAI,CAAC,CAACE,kBAAkB,CAAC,OAAO,EAAE;QAAEC,KAAK,EAAE,OAAO;QAAEC,GAAG,EAAE,SAAS;QAAEC,IAAI,EAAE;MAAU,CAAC,CAAC;IACxG;IAEA,eAAeC,cAAcA,CAACC,EAAE,EAAE;MAChC,IAAI,CAACC,OAAO,CAAC,gDAAgD,CAAC,EAAE;MAEhE,IAAI;QACF,MAAMjC,KAAK,CAACkC,MAAM,CAAC,GAAGjC,OAAO,eAAe+B,EAAE,EAAE,CAAC;QACjD9B,UAAU,CAACI,KAAK,GAAGJ,UAAU,CAACI,KAAK,CAAC6B,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACJ,EAAE,KAAKA,EAAE,CAAC;MAC9D,CAAC,CAAC,OAAOtB,GAAG,EAAE;QACZN,YAAY,CAACE,KAAK,GAAG,8CAA8C;QACnEK,OAAO,CAACC,KAAK,CAAC,wBAAwB,EAAEF,GAAG,CAAC;MAC9C;IACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}