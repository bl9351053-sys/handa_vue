{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { ref, onMounted, onUnmounted } from 'vue';\nimport { useRoute } from 'vue-router';\nimport axios from 'axios';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\nexport default {\n  __name: 'EmergencyAlertShow',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const route = useRoute();\n    const alert = ref(null);\n    const loading = ref(false);\n    const error = ref(null);\n    const mapError = ref(null);\n    let leafletMap = null;\n    const load = async () => {\n      loading.value = true;\n      error.value = null;\n      try {\n        const res = await axios.get(`/emergency-alerts/${route.params.id}`);\n        alert.value = res.data.alert || res.data;\n\n        // Initialize map if coordinates exist\n        if (alert.value.latitude && alert.value.longitude) {\n          setTimeout(() => {\n            initializeMap(parseFloat(alert.value.latitude), parseFloat(alert.value.longitude));\n          }, 100);\n        }\n      } catch (e) {\n        console.error(e);\n        error.value = 'Failed to load alert details';\n      } finally {\n        loading.value = false;\n      }\n    };\n    const formatDate = dateString => {\n      if (!dateString) return 'N/A';\n      return new Date(dateString).toLocaleString();\n    };\n    function initializeMap(lat, lng) {\n      const mapContainer = document.getElementById('show-emergency-alert-map');\n      if (!mapContainer) {\n        mapError.value = 'Map container not found';\n        return;\n      }\n      if (leafletMap) {\n        leafletMap.remove();\n        leafletMap = null;\n      }\n\n      // Fix Leaflet icon paths for bundlers\n      delete L.Icon.Default.prototype._getIconUrl;\n      L.Icon.Default.mergeOptions({\n        iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\n        iconUrl: require('leaflet/dist/images/marker-icon.png'),\n        shadowUrl: require('leaflet/dist/images/marker-shadow.png')\n      });\n      leafletMap = L.map(mapContainer).setView([lat, lng], 12);\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n        attribution: '&copy; OpenStreetMap contributors',\n        maxZoom: 19\n      }).addTo(leafletMap);\n      L.marker([lat, lng]).addTo(leafletMap);\n    }\n    onMounted(load);\n    onUnmounted(() => {\n      if (leafletMap) leafletMap.remove();\n    });\n    const __returned__ = {\n      route,\n      alert,\n      loading,\n      error,\n      mapError,\n      get leafletMap() {\n        return leafletMap;\n      },\n      set leafletMap(v) {\n        leafletMap = v;\n      },\n      load,\n      formatDate,\n      initializeMap,\n      ref,\n      onMounted,\n      onUnmounted,\n      get useRoute() {\n        return useRoute;\n      },\n      get axios() {\n        return axios;\n      },\n      get L() {\n        return L;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","onUnmounted","useRoute","axios","L","route","alert","loading","error","mapError","leafletMap","load","value","res","get","params","id","data","latitude","longitude","setTimeout","initializeMap","parseFloat","e","console","formatDate","dateString","Date","toLocaleString","lat","lng","mapContainer","document","getElementById","remove","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","require","iconUrl","shadowUrl","map","setView","tileLayer","attribution","maxZoom","addTo","marker"],"sources":["C:/VUEprojects/crud-app/src/pages/EmergencyAlertShow.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <!-- Header -->\r\n    <div class=\"header\">\r\n      <h1 class=\"title\">üö® Emergency Alert Details</h1>\r\n      <router-link to=\"/emergency-alerts\" class=\"btn-back\">‚Üê Back</router-link>\r\n    </div>\r\n\r\n    <!-- Loading & Error -->\r\n    <div v-if=\"loading\" class=\"loading\">Loading‚Ä¶</div>\r\n    <div v-if=\"error\" class=\"alert-error\">{{ error }}</div>\r\n\r\n    <!-- Alert Details -->\r\n    <div v-if=\"!loading && alert\" class=\"alert-card\">\r\n      <div class=\"alert-header\">\r\n        <div class=\"alert-title-section\">\r\n          <h2>{{ alert.title }}</h2>\r\n          <div class=\"alert-meta\">\r\n            <span class=\"severity\" :class=\"alert.severity\">{{ alert.severity.toUpperCase() }}</span>\r\n            <span class=\"status\" :class=\"alert.status\">{{ alert.status.toUpperCase() }}</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"alert-actions\">\r\n          <router-link :to=\"`/emergency-alerts/${alert.id}/edit`\" class=\"btn-edit\">Edit</router-link>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"alert-content\">\r\n        <div class=\"info-grid\">\r\n          <div class=\"info-item\">\r\n            <label>Area:</label>\r\n            <span>{{ alert.area }}</span>\r\n          </div>\r\n          <div class=\"info-item\" v-if=\"alert.latitude && alert.longitude\">\r\n            <label>Coordinates:</label>\r\n            <span>{{ alert.latitude.toFixed(6) }}, {{ alert.longitude.toFixed(6) }}</span>\r\n          </div>\r\n          <div class=\"info-item\">\r\n            <label>Created:</label>\r\n            <span>{{ formatDate(alert.created_at) }}</span>\r\n          </div>\r\n          <div class=\"info-item\">\r\n            <label>Last Updated:</label>\r\n            <span>{{ formatDate(alert.updated_at) }}</span>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"description-section\">\r\n          <h3>Description</h3>\r\n          <p>{{ alert.description }}</p>\r\n        </div>\r\n\r\n        <!-- Map Section -->\r\n        <div v-if=\"alert.latitude && alert.longitude\" class=\"map-section\">\r\n          <h3>üìç Location</h3>\r\n          <div v-if=\"mapError\" class=\"alert-error\">{{ mapError }}</div>\r\n          <div v-else id=\"show-emergency-alert-map\" class=\"map\"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, onUnmounted } from 'vue';\r\nimport { useRoute } from 'vue-router';\r\nimport axios from 'axios';\r\nimport L from 'leaflet';\r\nimport 'leaflet/dist/leaflet.css';\r\n\r\nconst route = useRoute();\r\n\r\nconst alert = ref(null);\r\nconst loading = ref(false);\r\nconst error = ref(null);\r\nconst mapError = ref(null);\r\nlet leafletMap = null;\r\n\r\nconst load = async () => {\r\n  loading.value = true;\r\n  error.value = null;\r\n  try {\r\n    const res = await axios.get(`/emergency-alerts/${route.params.id}`);\r\n    alert.value = res.data.alert || res.data;\r\n\r\n    // Initialize map if coordinates exist\r\n    if (alert.value.latitude && alert.value.longitude) {\r\n      setTimeout(() => {\r\n        initializeMap(parseFloat(alert.value.latitude), parseFloat(alert.value.longitude));\r\n      }, 100);\r\n    }\r\n\r\n  } catch (e) {\r\n    console.error(e);\r\n    error.value = 'Failed to load alert details';\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n};\r\n\r\nconst formatDate = (dateString) => {\r\n  if (!dateString) return 'N/A';\r\n  return new Date(dateString).toLocaleString();\r\n};\r\n\r\nfunction initializeMap(lat, lng) {\r\n  const mapContainer = document.getElementById('show-emergency-alert-map');\r\n  if (!mapContainer) {\r\n    mapError.value = 'Map container not found';\r\n    return;\r\n  }\r\n\r\n  if (leafletMap) {\r\n    leafletMap.remove();\r\n    leafletMap = null;\r\n  }\r\n\r\n  // Fix Leaflet icon paths for bundlers\r\n  delete L.Icon.Default.prototype._getIconUrl;\r\n  L.Icon.Default.mergeOptions({\r\n    iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\r\n    iconUrl: require('leaflet/dist/images/marker-icon.png'),\r\n    shadowUrl: require('leaflet/dist/images/marker-shadow.png'),\r\n  });\r\n\r\n  leafletMap = L.map(mapContainer).setView([lat, lng], 12);\r\n\r\n  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n    attribution: '&copy; OpenStreetMap contributors',\r\n    maxZoom: 19\r\n  }).addTo(leafletMap);\r\n\r\n  L.marker([lat, lng]).addTo(leafletMap);\r\n}\r\n\r\nonMounted(load);\r\n\r\nonUnmounted(() => {\r\n  if (leafletMap) leafletMap.remove();\r\n});\r\n</script>\r\n\r\n<style>\r\n.container { max-width: 800px; margin: 20px auto; padding: 0 16px; font-family: Arial, sans-serif; }\r\n.header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }\r\n.title { font-size: 24px; font-weight: bold; color: #333; }\r\n.btn-back { padding: 8px 16px; background: #ccc; color: #333; border-radius: 6px; text-decoration: none; }\r\n.btn-back:hover { background: #bbb; }\r\n.loading { text-align: center; padding: 16px; color: #555; }\r\n.alert-error { background: #ffe5e5; color: #b30000; padding: 12px 16px; border-radius: 8px; margin-bottom: 16px; }\r\n\r\n.alert-card { background: #fff; border-radius: 12px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); overflow: hidden; }\r\n.alert-header { background: #f8f9fa; padding: 24px; border-bottom: 1px solid #e9ecef; }\r\n.alert-title-section h2 { font-size: 28px; margin: 0 0 12px 0; color: #333; }\r\n.alert-meta { display: flex; gap: 12px; }\r\n.severity { padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: bold; color: white; }\r\n.severity.low { background: #28a745; }\r\n.severity.medium { background: #ffc107; color: #333; }\r\n.severity.high { background: #dc3545; }\r\n.status { padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: bold; }\r\n.status.active { background: #007bff; color: white; }\r\n.status.inactive { background: #6c757d; color: white; }\r\n.alert-actions { margin-top: 16px; }\r\n.btn-edit { padding: 8px 16px; background: #007bff; color: white; border-radius: 6px; text-decoration: none; }\r\n.btn-edit:hover { background: #0056b3; }\r\n\r\n.alert-content { padding: 24px; }\r\n.info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 24px; }\r\n.info-item { display: flex; flex-direction: column; }\r\n.info-item label { font-weight: bold; color: #666; font-size: 14px; margin-bottom: 4px; }\r\n.info-item span { color: #333; }\r\n\r\n.description-section { margin-bottom: 24px; }\r\n.description-section h3 { font-size: 20px; margin-bottom: 12px; color: #333; }\r\n.description-section p { line-height: 1.6; color: #555; }\r\n\r\n.map-section { margin-top: 24px; padding: 16px; background: #f9f9f9; border-radius: 8px; border: 1px solid #ddd; }\r\n.map-section h3 { font-weight: bold; margin-bottom: 12px; color: #333; }\r\n.map { width: 100%; height: 300px; border-radius: 6px; border: 1px solid #ddd; }\r\n\r\n@media (max-width: 768px) {\r\n  .info-grid { grid-template-columns: 1fr; }\r\n  .alert-meta { flex-direction: column; gap: 8px; }\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}