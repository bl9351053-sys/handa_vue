{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { ref, onMounted } from 'vue';\nimport api from '../services/api';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport { useRoute } from 'vue-router';\nexport default {\n  __name: 'PredictionShow',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const route = useRoute();\n    const id = route.params.id;\n    const prediction = ref({});\n    function formatDate(dt) {\n      if (!dt) return 'N/A';\n      try {\n        return new Date(dt).toLocaleString();\n      } catch {\n        return dt;\n      }\n    }\n    onMounted(async () => {\n      try {\n        const res = await api.get(`/disaster-predictions/${id}`);\n        prediction.value = res.data;\n        if (prediction.value.latitude && prediction.value.longitude) {\n          const map = L.map('map').setView([prediction.value.latitude, prediction.value.longitude], 13);\n          L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);\n          const marker = L.marker([prediction.value.latitude, prediction.value.longitude]).addTo(map);\n          marker.bindPopup(`<strong>${prediction.value.location_name || 'Location'}</strong><br>${prediction.value.disaster_type || ''}`).openPopup();\n          const radius = (prediction.value.risk_level || 0) * 500;\n          const color = prediction.value.risk_level >= 8 ? '#dc3545' : prediction.value.risk_level >= 6 ? '#fd7e14' : prediction.value.risk_level >= 4 ? '#ffc107' : '#28a745';\n          L.circle([prediction.value.latitude, prediction.value.longitude], {\n            color,\n            fillColor: color,\n            fillOpacity: 0.2,\n            radius\n          }).addTo(map);\n        } else {\n          document.getElementById('map').innerHTML = '<p class=\"text-center text-muted mt-3\">No map available for this prediction.</p>';\n        }\n      } catch (e) {\n        console.error('load show failed', e);\n      }\n    });\n    const __returned__ = {\n      route,\n      id,\n      prediction,\n      formatDate,\n      ref,\n      onMounted,\n      get api() {\n        return api;\n      },\n      get L() {\n        return L;\n      },\n      get useRoute() {\n        return useRoute;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","api","L","useRoute","route","id","params","prediction","formatDate","dt","Date","toLocaleString","res","get","value","data","latitude","longitude","map","setView","tileLayer","addTo","marker","bindPopup","location_name","disaster_type","openPopup","radius","risk_level","color","circle","fillColor","fillOpacity","document","getElementById","innerHTML","e","console","error"],"sources":["C:/VUEprojects/crud-app/src/pages/PredictionShow.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"mb-6 flex justify-between items-center\">\r\n      <div>\r\n        <h2 class=\"text-2xl font-semibold\">Prediction Details</h2>\r\n        <p class=\"text-sm text-gray-500\">View prediction information</p>\r\n      </div>\r\n      <div class=\"space-x-2\">\r\n        <router-link :to=\"`/predictions/${id}/edit`\" class=\"bg-blue-600 text-white px-4 py-2 rounded\">Edit</router-link>\r\n        <router-link to=\"/predictions\" class=\"bg-gray-600 text-white px-4 py-2 rounded\">Back</router-link>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"bg-white rounded shadow p-6\">\r\n      <h3 class=\"text-xl font-bold mb-2\">{{ prediction.disaster_type }} - {{ prediction.location_name || 'N/A' }}</h3>\r\n      <p class=\"text-gray-700 whitespace-pre-line mb-4\">{{ prediction.description || 'No description' }}</p>\r\n\r\n      <div class=\"grid grid-cols-2 gap-4 mb-6\">\r\n        <div class=\"bg-purple-50 p-4 rounded\">\r\n          <p class=\"text-sm text-gray-500\">Affected Areas</p>\r\n          <p class=\"font-semibold text-gray-800\">{{ prediction.affected_areas || 'Not specified' }}</p>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"grid grid-cols-2 gap-4 mb-6\">\r\n        <div class=\"bg-green-50 p-4 rounded\">\r\n          <p class=\"text-sm text-gray-500\">Risk Level</p>\r\n          <p class=\"text-2xl font-bold text-green-600\">{{ prediction.risk_level || 'N/A' }}/10</p>\r\n        </div>\r\n        <div class=\"bg-indigo-50 p-4 rounded\">\r\n          <p class=\"text-sm text-gray-500\">Estimated Recovery Time</p>\r\n          <p class=\"text-2xl font-bold text-indigo-600\">{{ prediction.predicted_recovery_days ? '~' + prediction.predicted_recovery_days + ' days' : 'N/A' }}</p>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"grid grid-cols-2 gap-4 border-t pt-4\">\r\n        <div>\r\n          <p class=\"text-sm text-gray-500\">Predicted Date</p>\r\n          <p class=\"font-semibold\">{{ formatDate(prediction.predicted_date) }}</p>\r\n        </div>\r\n        <div>\r\n          <p class=\"text-sm text-gray-500\">Valid Until</p>\r\n          <p class=\"font-semibold\">{{ formatDate(prediction.valid_until) }}</p>\r\n        </div>\r\n        <div>\r\n          <p class=\"text-sm text-gray-500\">Created By</p>\r\n          <p class=\"font-semibold\">{{ prediction.user?.name || 'N/A' }}</p>\r\n        </div>\r\n        <div>\r\n          <p class=\"text-sm text-gray-500\">Created At</p>\r\n          <p class=\"font-semibold\">{{ formatDate(prediction.created_at) }}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"mt-6 bg-white rounded shadow p-6\">\r\n      <h4 class=\"mb-2\">Location Map</h4>\r\n      <div id=\"map\" style=\"height:400px\"></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport api from '../services/api';\r\nimport L from 'leaflet';\r\nimport 'leaflet/dist/leaflet.css';\r\nimport { useRoute } from 'vue-router';\r\n\r\nconst route = useRoute();\r\nconst id = route.params.id;\r\nconst prediction = ref({});\r\n\r\nfunction formatDate(dt) {\r\n  if (!dt) return 'N/A';\r\n  try { return new Date(dt).toLocaleString(); } catch { return dt; }\r\n}\r\n\r\nonMounted(async () => {\r\n  try {\r\n    const res = await api.get(`/disaster-predictions/${id}`);\r\n    prediction.value = res.data;\r\n    if (prediction.value.latitude && prediction.value.longitude) {\r\n      const map = L.map('map').setView([prediction.value.latitude, prediction.value.longitude], 13);\r\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);\r\n      const marker = L.marker([prediction.value.latitude, prediction.value.longitude]).addTo(map);\r\n      marker.bindPopup(`<strong>${prediction.value.location_name || 'Location'}</strong><br>${prediction.value.disaster_type || ''}`).openPopup();\r\n      const radius = (prediction.value.risk_level || 0) * 500;\r\n      const color = prediction.value.risk_level >= 8 ? '#dc3545' : (prediction.value.risk_level >= 6 ? '#fd7e14' : (prediction.value.risk_level >=4 ? '#ffc107' : '#28a745'));\r\n      L.circle([prediction.value.latitude, prediction.value.longitude], { color, fillColor: color, fillOpacity: 0.2, radius }).addTo(map);\r\n    } else {\r\n      document.getElementById('map').innerHTML = '<p class=\"text-center text-muted mt-3\">No map available for this prediction.</p>';\r\n    }\r\n  } catch (e) {\r\n    console.error('load show failed', e);\r\n  }\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n#map { border-radius: 8px; }\r\n</style>\r\n"],"mappings":";;AA+DA,SAASA,GAAG,EAAEC,SAAS,QAAQ,KAAK;AACpC,OAAOC,GAAG,MAAM,iBAAiB;AACjC,OAAOC,CAAC,MAAM,SAAS;AACvB,OAAO,0BAA0B;AACjC,SAASC,QAAQ,QAAQ,YAAY;;;;;;;IAErC,MAAMC,KAAK,GAAGD,QAAQ,CAAC,CAAC;IACxB,MAAME,EAAE,GAAGD,KAAK,CAACE,MAAM,CAACD,EAAE;IAC1B,MAAME,UAAU,GAAGR,GAAG,CAAC,CAAC,CAAC,CAAC;IAE1B,SAASS,UAAUA,CAACC,EAAE,EAAE;MACtB,IAAI,CAACA,EAAE,EAAE,OAAO,KAAK;MACrB,IAAI;QAAE,OAAO,IAAIC,IAAI,CAACD,EAAE,CAAC,CAACE,cAAc,CAAC,CAAC;MAAE,CAAC,CAAC,MAAM;QAAE,OAAOF,EAAE;MAAE;IACnE;IAEAT,SAAS,CAAC,YAAY;MACpB,IAAI;QACF,MAAMY,GAAG,GAAG,MAAMX,GAAG,CAACY,GAAG,CAAC,yBAAyBR,EAAE,EAAE,CAAC;QACxDE,UAAU,CAACO,KAAK,GAAGF,GAAG,CAACG,IAAI;QAC3B,IAAIR,UAAU,CAACO,KAAK,CAACE,QAAQ,IAAIT,UAAU,CAACO,KAAK,CAACG,SAAS,EAAE;UAC3D,MAAMC,GAAG,GAAGhB,CAAC,CAACgB,GAAG,CAAC,KAAK,CAAC,CAACC,OAAO,CAAC,CAACZ,UAAU,CAACO,KAAK,CAACE,QAAQ,EAAET,UAAU,CAACO,KAAK,CAACG,SAAS,CAAC,EAAE,EAAE,CAAC;UAC7Ff,CAAC,CAACkB,SAAS,CAAC,oDAAoD,CAAC,CAACC,KAAK,CAACH,GAAG,CAAC;UAC5E,MAAMI,MAAM,GAAGpB,CAAC,CAACoB,MAAM,CAAC,CAACf,UAAU,CAACO,KAAK,CAACE,QAAQ,EAAET,UAAU,CAACO,KAAK,CAACG,SAAS,CAAC,CAAC,CAACI,KAAK,CAACH,GAAG,CAAC;UAC3FI,MAAM,CAACC,SAAS,CAAC,WAAWhB,UAAU,CAACO,KAAK,CAACU,aAAa,IAAI,UAAU,gBAAgBjB,UAAU,CAACO,KAAK,CAACW,aAAa,IAAI,EAAE,EAAE,CAAC,CAACC,SAAS,CAAC,CAAC;UAC3I,MAAMC,MAAM,GAAG,CAACpB,UAAU,CAACO,KAAK,CAACc,UAAU,IAAI,CAAC,IAAI,GAAG;UACvD,MAAMC,KAAK,GAAGtB,UAAU,CAACO,KAAK,CAACc,UAAU,IAAI,CAAC,GAAG,SAAS,GAAIrB,UAAU,CAACO,KAAK,CAACc,UAAU,IAAI,CAAC,GAAG,SAAS,GAAIrB,UAAU,CAACO,KAAK,CAACc,UAAU,IAAG,CAAC,GAAG,SAAS,GAAG,SAAW;UACvK1B,CAAC,CAAC4B,MAAM,CAAC,CAACvB,UAAU,CAACO,KAAK,CAACE,QAAQ,EAAET,UAAU,CAACO,KAAK,CAACG,SAAS,CAAC,EAAE;YAAEY,KAAK;YAAEE,SAAS,EAAEF,KAAK;YAAEG,WAAW,EAAE,GAAG;YAAEL;UAAO,CAAC,CAAC,CAACN,KAAK,CAACH,GAAG,CAAC;QACrI,CAAC,MAAM;UACLe,QAAQ,CAACC,cAAc,CAAC,KAAK,CAAC,CAACC,SAAS,GAAG,kFAAkF;QAC/H;MACF,CAAC,CAAC,OAAOC,CAAC,EAAE;QACVC,OAAO,CAACC,KAAK,CAAC,kBAAkB,EAAEF,CAAC,CAAC;MACtC;IACF,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}