{"ast":null,"code":"import { ref, inject, onMounted } from 'vue';\nexport default {\n  __name: 'UpdatesList',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const residentAxios = inject('residentAxios', null);\n    const axiosFallback = window.axios || null;\n    const updates = ref([]);\n    const loading = ref(false);\n    const error = ref(null);\n    const fetch = async () => {\n      loading.value = true;\n      error.value = null;\n      try {\n        const http = residentAxios || axiosFallback;\n        const res = await http.get('/disaster-updates');\n        updates.value = res.data.data || res.data || [];\n      } catch (e) {\n        console.error(e);\n        error.value = 'Failed to load updates';\n      } finally {\n        loading.value = false;\n      }\n    };\n    const remove = async id => {\n      if (!confirm('Delete this update?')) return;\n      try {\n        const http = residentAxios || axiosFallback;\n        await http.delete(`/disaster-updates/${id}`);\n        await fetch();\n      } catch (e) {\n        console.error(e);\n        alert('Failed to delete');\n      }\n    };\n    const formatDate = s => s ? new Date(s).toLocaleString() : 'N/A';\n    onMounted(fetch);\n    const __returned__ = {\n      residentAxios,\n      axiosFallback,\n      updates,\n      loading,\n      error,\n      fetch,\n      remove,\n      formatDate,\n      ref,\n      inject,\n      onMounted\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","inject","onMounted","residentAxios","axiosFallback","window","axios","updates","loading","error","fetch","value","http","res","get","data","e","console","remove","id","confirm","delete","alert","formatDate","s","Date","toLocaleString"],"sources":["C:/VUEprojects/crud-app/src/pages/updates/UpdatesList.vue"],"sourcesContent":["<template>\r\n  <div class=\"space-y-6\">\r\n    <div class=\"flex items-center justify-between\">\r\n      <h1 class=\"text-2xl font-bold\">ðŸ“‹ Disaster Updates (Admin)</h1>\r\n      <router-link to=\"/updates/create\" class=\"px-4 py-2 bg-green-600 text-white rounded\">+ Add Update</router-link>\r\n    </div>\r\n\r\n    <div v-if=\"loading\" class=\"py-6 text-gray-600\">Loading updates...</div>\r\n    <div v-if=\"error\" class=\"text-red-700\">{{ error }}</div>\r\n\r\n    <div v-if=\"updates.length\">\r\n      <div v-for=\"u in updates\" :key=\"u.id\" class=\"border rounded p-4 mb-3 flex justify-between items-start\">\r\n        <div>\r\n          <h3 class=\"font-semibold\">{{ u.title }}</h3>\r\n          <div class=\"text-sm text-gray-600\">{{ u.source }} â€¢ {{ formatDate(u.issued_at) }}</div>\r\n          <p class=\"mt-2 text-gray-700\">{{ u.description }}</p>\r\n        </div>\r\n        <div class=\"flex flex-col gap-2\">\r\n          <router-link :to=\"`/updates/${u.id}`\" class=\"px-3 py-1 bg-blue-600 text-white rounded\">View</router-link>\r\n          <router-link :to=\"`/updates/${u.id}/edit`\" class=\"px-3 py-1 bg-yellow-500 text-white rounded\">Edit</router-link>\r\n          <button @click=\"remove(u.id)\" class=\"px-3 py-1 bg-red-600 text-white rounded\">Delete</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div v-else-if=\"!loading\" class=\"text-gray-600\">No updates found.</div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, inject, onMounted } from 'vue';\r\n\r\nconst residentAxios = inject('residentAxios', null);\r\nconst axiosFallback = window.axios || null;\r\n\r\nconst updates = ref([]);\r\nconst loading = ref(false);\r\nconst error = ref(null);\r\n\r\nconst fetch = async () => {\r\n  loading.value = true; error.value = null;\r\n  try {\r\n    const http = residentAxios || axiosFallback;\r\n    const res = await http.get('/disaster-updates');\r\n    updates.value = res.data.data || res.data || [];\r\n  } catch (e) {\r\n    console.error(e); error.value = 'Failed to load updates';\r\n  } finally { loading.value = false; }\r\n};\r\n\r\nconst remove = async (id) => {\r\n  if (!confirm('Delete this update?')) return;\r\n  try {\r\n    const http = residentAxios || axiosFallback;\r\n    await http.delete(`/disaster-updates/${id}`);\r\n    await fetch();\r\n  } catch (e) { console.error(e); alert('Failed to delete'); }\r\n};\r\n\r\nconst formatDate = (s) => s ? new Date(s).toLocaleString() : 'N/A';\r\n\r\nonMounted(fetch);\r\n</script>\r\n"],"mappings":"AA8BA,SAASA,GAAG,EAAEC,MAAM,EAAEC,SAAS,QAAQ,KAAK;;;;;;;IAE5C,MAAMC,aAAa,GAAGF,MAAM,CAAC,eAAe,EAAE,IAAI,CAAC;IACnD,MAAMG,aAAa,GAAGC,MAAM,CAACC,KAAK,IAAI,IAAI;IAE1C,MAAMC,OAAO,GAAGP,GAAG,CAAC,EAAE,CAAC;IACvB,MAAMQ,OAAO,GAAGR,GAAG,CAAC,KAAK,CAAC;IAC1B,MAAMS,KAAK,GAAGT,GAAG,CAAC,IAAI,CAAC;IAEvB,MAAMU,KAAK,GAAG,MAAAA,CAAA,KAAY;MACxBF,OAAO,CAACG,KAAK,GAAG,IAAI;MAAEF,KAAK,CAACE,KAAK,GAAG,IAAI;MACxC,IAAI;QACF,MAAMC,IAAI,GAAGT,aAAa,IAAIC,aAAa;QAC3C,MAAMS,GAAG,GAAG,MAAMD,IAAI,CAACE,GAAG,CAAC,mBAAmB,CAAC;QAC/CP,OAAO,CAACI,KAAK,GAAGE,GAAG,CAACE,IAAI,CAACA,IAAI,IAAIF,GAAG,CAACE,IAAI,IAAI,EAAE;MACjD,CAAC,CAAC,OAAOC,CAAC,EAAE;QACVC,OAAO,CAACR,KAAK,CAACO,CAAC,CAAC;QAAEP,KAAK,CAACE,KAAK,GAAG,wBAAwB;MAC1D,CAAC,SAAS;QAAEH,OAAO,CAACG,KAAK,GAAG,KAAK;MAAE;IACrC,CAAC;IAED,MAAMO,MAAM,GAAG,MAAOC,EAAE,IAAK;MAC3B,IAAI,CAACC,OAAO,CAAC,qBAAqB,CAAC,EAAE;MACrC,IAAI;QACF,MAAMR,IAAI,GAAGT,aAAa,IAAIC,aAAa;QAC3C,MAAMQ,IAAI,CAACS,MAAM,CAAC,qBAAqBF,EAAE,EAAE,CAAC;QAC5C,MAAMT,KAAK,CAAC,CAAC;MACf,CAAC,CAAC,OAAOM,CAAC,EAAE;QAAEC,OAAO,CAACR,KAAK,CAACO,CAAC,CAAC;QAAEM,KAAK,CAAC,kBAAkB,CAAC;MAAE;IAC7D,CAAC;IAED,MAAMC,UAAU,GAAIC,CAAC,IAAKA,CAAC,GAAG,IAAIC,IAAI,CAACD,CAAC,CAAC,CAACE,cAAc,CAAC,CAAC,GAAG,KAAK;IAElExB,SAAS,CAACQ,KAAK,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}