{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, inject, onMounted } from 'vue';\nimport axios from 'axios';\nimport { useRouter, useRoute } from 'vue-router';\nexport default {\n  __name: 'FamilyShow',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const router = useRouter();\n    const route = useRoute();\n    const baseUrl = inject('baseUrl', '');\n    const familyId = route.params.id;\n    const family = ref({});\n    const generalError = ref('');\n    const loading = ref(true);\n    onMounted(async () => {\n      await fetchFamily();\n    });\n    async function fetchFamily() {\n      try {\n        const res = await axios.get(`${baseUrl}/families/${familyId}`);\n        family.value = res.data?.data || res.data;\n      } catch (err) {\n        generalError.value = 'Failed to load family. Please try again.';\n        console.error('Fetch family error:', err);\n      } finally {\n        loading.value = false;\n      }\n    }\n    async function deleteFamily() {\n      if (confirm('Are you sure you want to delete this family? This action cannot be undone.')) {\n        try {\n          await axios.delete(`${baseUrl}/families/${familyId}`);\n          router.push('/families');\n        } catch (err) {\n          generalError.value = 'Failed to delete family. Please try again.';\n          console.error('Delete family error:', err);\n        }\n      }\n    }\n    function getStatusBadge(status) {\n      const classes = {\n        evacuated: 'bg-green-500',\n        returned: 'bg-blue-500',\n        pending: 'bg-yellow-500'\n      };\n      return classes[status] || 'bg-gray-500';\n    }\n    function capitalizeStatus(status) {\n      return status.charAt(0).toUpperCase() + status.slice(1);\n    }\n    function formatDate(dateString) {\n      if (!dateString) return '';\n      const date = new Date(dateString);\n      return date.toLocaleDateString('en-US', {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric',\n        hour: '2-digit',\n        minute: '2-digit'\n      });\n    }\n    const __returned__ = {\n      router,\n      route,\n      baseUrl,\n      familyId,\n      family,\n      generalError,\n      loading,\n      fetchFamily,\n      deleteFamily,\n      getStatusBadge,\n      capitalizeStatus,\n      formatDate,\n      ref,\n      inject,\n      onMounted,\n      get axios() {\n        return axios;\n      },\n      get useRouter() {\n        return useRouter;\n      },\n      get useRoute() {\n        return useRoute;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","inject","onMounted","axios","useRouter","useRoute","router","route","baseUrl","familyId","params","id","family","generalError","loading","fetchFamily","res","get","value","data","err","console","error","deleteFamily","confirm","delete","push","getStatusBadge","status","classes","evacuated","returned","pending","capitalizeStatus","charAt","toUpperCase","slice","formatDate","dateString","date","Date","toLocaleDateString","year","month","day","hour","minute"],"sources":["C:/VUEprojects/crud-app/src/pages/FamilyShow.vue"],"sourcesContent":["<template>\r\n  <div class=\"min-h-screen bg-gray-100 p-6\">\r\n    <div class=\"max-w-5xl mx-auto\">\r\n      <!-- Header -->\r\n      <div class=\"mb-8 flex items-center justify-between\">\r\n        <div>\r\n          <h1 class=\"text-4xl font-bold text-gray-900\">Family Details</h1>\r\n          <p class=\"text-gray-600 mt-1\">View family information</p>\r\n        </div>\r\n        <router-link to=\"/families\" class=\"text-indigo-600 hover:text-indigo-900 font-medium flex items-center gap-1\">\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 19l-7-7 7-7\" />\r\n          </svg>\r\n          Back to Families\r\n        </router-link>\r\n      </div>\r\n\r\n      <!-- Loading -->\r\n      <div v-if=\"loading\" class=\"bg-white rounded-lg shadow p-8 text-center\">\r\n        <div class=\"inline-flex items-center gap-2\">\r\n          <svg class=\"animate-spin h-6 w-6 text-indigo-600\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n            <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\r\n            <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8v8z\"></path>\r\n          </svg>\r\n          <span class=\"text-gray-600\">Loading family...</span>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Error -->\r\n      <div v-else-if=\"generalError\" class=\"bg-white rounded-lg shadow p-8\">\r\n        <div class=\"text-red-800 bg-red-50 border-l-4 border-red-500 px-6 py-4 rounded\">\r\n          <p>{{ generalError }}</p>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Content -->\r\n      <div v-else class=\"space-y-6\">\r\n        <!-- Info Card -->\r\n        <div class=\"bg-white rounded-lg shadow-lg p-8\">\r\n          <div class=\"flex items-center justify-between mb-6\">\r\n            <div>\r\n              <h2 class=\"text-3xl font-bold text-gray-900\">{{ family.family_head_name }}</h2>\r\n              <p class=\"text-gray-600 mt-1\">Family Head</p>\r\n            </div>\r\n            <div :class=\"getStatusBadge(family.status)\" class=\"px-4 py-2 rounded-full text-white font-medium\">\r\n              {{ capitalizeStatus(family.status) }}\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Info Grid -->\r\n          <div class=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\r\n            <!-- Left Column -->\r\n            <div class=\"space-y-4\">\r\n              <div class=\"border-b pb-3\">\r\n                <p class=\"text-sm text-gray-500 uppercase tracking-wide\">Contact Number</p>\r\n                <p v-if=\"family.contact_number\" class=\"text-gray-900 font-medium\">{{ family.contact_number }}</p>\r\n                <p v-else class=\"text-gray-500 italic\">Not provided</p>\r\n              </div>\r\n\r\n              <div class=\"border-b pb-3\">\r\n                <p class=\"text-sm text-gray-500 uppercase tracking-wide\">Address</p>\r\n                <p class=\"text-gray-900 font-medium\">{{ family.address }}</p>\r\n              </div>\r\n\r\n              <div class=\"border-b pb-3\">\r\n                <p class=\"text-sm text-gray-500 uppercase tracking-wide\">Total Members</p>\r\n                <p class=\"text-gray-900 font-medium text-lg\">{{ family.total_members }} people</p>\r\n              </div>\r\n\r\n              <div class=\"border-b pb-3\">\r\n                <p class=\"text-sm text-gray-500 uppercase tracking-wide\">Evacuation Area</p>\r\n                <p v-if=\"family.evacuation_area\" class=\"text-gray-900 font-medium\">{{ family.evacuation_area.name }}</p>\r\n                <p v-else class=\"text-gray-500 italic\">Not assigned</p>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- Right Column -->\r\n            <div class=\"space-y-4\">\r\n              <div class=\"border-b pb-3\">\r\n                <p class=\"text-sm text-gray-500 uppercase tracking-wide\">Evacuated At</p>\r\n                <p v-if=\"family.evacuated_at\" class=\"text-gray-900 font-medium\">{{ formatDate(family.evacuated_at) }}</p>\r\n                <p v-else class=\"text-gray-500 italic\">Not evacuated</p>\r\n              </div>\r\n\r\n              <div class=\"border-b pb-3\">\r\n                <p class=\"text-sm text-gray-500 uppercase tracking-wide\">Created At</p>\r\n                <p v-if=\"family.created_at\" class=\"text-gray-900 font-medium\">{{ formatDate(family.created_at) }}</p>\r\n                <p v-else class=\"text-gray-500 italic\">N/A</p>\r\n              </div>\r\n\r\n              <div class=\"border-b pb-3\">\r\n                <p class=\"text-sm text-gray-500 uppercase tracking-wide\">Updated At</p>\r\n                <p v-if=\"family.updated_at\" class=\"text-gray-900 font-medium\">{{ formatDate(family.updated_at) }}</p>\r\n                <p v-else class=\"text-gray-500 italic\">N/A</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Special Needs Section -->\r\n          <div v-if=\"family.special_needs\" class=\"mt-8 pt-8 border-t\">\r\n            <h3 class=\"text-lg font-bold text-gray-900 mb-3\">Special Needs</h3>\r\n            <div class=\"bg-yellow-50 border border-yellow-200 rounded-lg p-4\">\r\n              <p class=\"text-gray-900 whitespace-pre-wrap\">{{ family.special_needs }}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Family Members Section -->\r\n        <div v-if=\"family.evacuees\" class=\"bg-white rounded-lg shadow-lg p-8\">\r\n          <h3 class=\"text-xl font-bold text-gray-900 mb-4\">Family Members ({{ family.evacuees.length }})</h3>\r\n          \r\n          <div v-if=\"family.evacuees.length > 0\" class=\"overflow-x-auto\">\r\n            <table class=\"min-w-full divide-y divide-gray-200\">\r\n              <thead class=\"bg-gray-50\">\r\n                <tr>\r\n                  <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Name</th>\r\n                  <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Age</th>\r\n                  <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Gender</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody class=\"bg-white divide-y divide-gray-200\">\r\n                <tr v-for=\"member in family.evacuees\" :key=\"member.id\" class=\"hover:bg-gray-50\">\r\n                  <td class=\"px-6 py-4 text-sm font-medium text-gray-900\">{{ member.name }}</td>\r\n                  <td class=\"px-6 py-4 text-sm text-gray-500\">{{ member.age || 'N/A' }}</td>\r\n                  <td class=\"px-6 py-4 text-sm text-gray-500\">{{ capitalizeStatus(member.gender || 'N/A') }}</td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n          <div v-else class=\"text-center py-6 text-gray-500\">\r\n            No individual members registered yet\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Actions -->\r\n        <div class=\"bg-white rounded-lg shadow p-6 flex justify-end gap-3\">\r\n          <router-link :to=\"`/families/${family.id}/edit`\" \r\n            class=\"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium\">\r\n            Edit\r\n          </router-link>\r\n          <button @click=\"deleteFamily\" class=\"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 font-medium\">\r\n            Delete\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, inject, onMounted } from 'vue'\r\nimport axios from 'axios'\r\nimport { useRouter, useRoute } from 'vue-router'\r\n\r\nconst router = useRouter()\r\nconst route = useRoute()\r\nconst baseUrl = inject('baseUrl', '')\r\nconst familyId = route.params.id\r\n\r\nconst family = ref({})\r\nconst generalError = ref('')\r\nconst loading = ref(true)\r\n\r\nonMounted(async () => {\r\n  await fetchFamily()\r\n})\r\n\r\nasync function fetchFamily() {\r\n  try {\r\n    const res = await axios.get(`${baseUrl}/families/${familyId}`)\r\n    family.value = res.data?.data || res.data\r\n  } catch (err) {\r\n    generalError.value = 'Failed to load family. Please try again.'\r\n    console.error('Fetch family error:', err)\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\nasync function deleteFamily() {\r\n  if (confirm('Are you sure you want to delete this family? This action cannot be undone.')) {\r\n    try {\r\n      await axios.delete(`${baseUrl}/families/${familyId}`)\r\n      router.push('/families')\r\n    } catch (err) {\r\n      generalError.value = 'Failed to delete family. Please try again.'\r\n      console.error('Delete family error:', err)\r\n    }\r\n  }\r\n}\r\n\r\nfunction getStatusBadge(status) {\r\n  const classes = {\r\n    evacuated: 'bg-green-500',\r\n    returned: 'bg-blue-500',\r\n    pending: 'bg-yellow-500'\r\n  }\r\n  return classes[status] || 'bg-gray-500'\r\n}\r\n\r\nfunction capitalizeStatus(status) {\r\n  return status.charAt(0).toUpperCase() + status.slice(1)\r\n}\r\n\r\nfunction formatDate(dateString) {\r\n  if (!dateString) return ''\r\n  const date = new Date(dateString)\r\n  return date.toLocaleDateString('en-US', { \r\n    year: 'numeric', \r\n    month: 'long', \r\n    day: 'numeric',\r\n    hour: '2-digit',\r\n    minute: '2-digit'\r\n  })\r\n}\r\n</script>\r\n"],"mappings":";AAsJA,SAASA,GAAG,EAAEC,MAAM,EAAEC,SAAS,QAAQ,KAAK;AAC5C,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,SAAS,EAAEC,QAAQ,QAAQ,YAAY;;;;;;;IAEhD,MAAMC,MAAM,GAAGF,SAAS,CAAC,CAAC;IAC1B,MAAMG,KAAK,GAAGF,QAAQ,CAAC,CAAC;IACxB,MAAMG,OAAO,GAAGP,MAAM,CAAC,SAAS,EAAE,EAAE,CAAC;IACrC,MAAMQ,QAAQ,GAAGF,KAAK,CAACG,MAAM,CAACC,EAAE;IAEhC,MAAMC,MAAM,GAAGZ,GAAG,CAAC,CAAC,CAAC,CAAC;IACtB,MAAMa,YAAY,GAAGb,GAAG,CAAC,EAAE,CAAC;IAC5B,MAAMc,OAAO,GAAGd,GAAG,CAAC,IAAI,CAAC;IAEzBE,SAAS,CAAC,YAAY;MACpB,MAAMa,WAAW,CAAC,CAAC;IACrB,CAAC,CAAC;IAEF,eAAeA,WAAWA,CAAA,EAAG;MAC3B,IAAI;QACF,MAAMC,GAAG,GAAG,MAAMb,KAAK,CAACc,GAAG,CAAC,GAAGT,OAAO,aAAaC,QAAQ,EAAE,CAAC;QAC9DG,MAAM,CAACM,KAAK,GAAGF,GAAG,CAACG,IAAI,EAAEA,IAAI,IAAIH,GAAG,CAACG,IAAI;MAC3C,CAAC,CAAC,OAAOC,GAAG,EAAE;QACZP,YAAY,CAACK,KAAK,GAAG,0CAA0C;QAC/DG,OAAO,CAACC,KAAK,CAAC,qBAAqB,EAAEF,GAAG,CAAC;MAC3C,CAAC,SAAS;QACRN,OAAO,CAACI,KAAK,GAAG,KAAK;MACvB;IACF;IAEA,eAAeK,YAAYA,CAAA,EAAG;MAC5B,IAAIC,OAAO,CAAC,4EAA4E,CAAC,EAAE;QACzF,IAAI;UACF,MAAMrB,KAAK,CAACsB,MAAM,CAAC,GAAGjB,OAAO,aAAaC,QAAQ,EAAE,CAAC;UACrDH,MAAM,CAACoB,IAAI,CAAC,WAAW,CAAC;QAC1B,CAAC,CAAC,OAAON,GAAG,EAAE;UACZP,YAAY,CAACK,KAAK,GAAG,4CAA4C;UACjEG,OAAO,CAACC,KAAK,CAAC,sBAAsB,EAAEF,GAAG,CAAC;QAC5C;MACF;IACF;IAEA,SAASO,cAAcA,CAACC,MAAM,EAAE;MAC9B,MAAMC,OAAO,GAAG;QACdC,SAAS,EAAE,cAAc;QACzBC,QAAQ,EAAE,aAAa;QACvBC,OAAO,EAAE;MACX,CAAC;MACD,OAAOH,OAAO,CAACD,MAAM,CAAC,IAAI,aAAa;IACzC;IAEA,SAASK,gBAAgBA,CAACL,MAAM,EAAE;MAChC,OAAOA,MAAM,CAACM,MAAM,CAAC,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,GAAGP,MAAM,CAACQ,KAAK,CAAC,CAAC,CAAC;IACzD;IAEA,SAASC,UAAUA,CAACC,UAAU,EAAE;MAC9B,IAAI,CAACA,UAAU,EAAE,OAAO,EAAE;MAC1B,MAAMC,IAAI,GAAG,IAAIC,IAAI,CAACF,UAAU,CAAC;MACjC,OAAOC,IAAI,CAACE,kBAAkB,CAAC,OAAO,EAAE;QACtCC,IAAI,EAAE,SAAS;QACfC,KAAK,EAAE,MAAM;QACbC,GAAG,EAAE,SAAS;QACdC,IAAI,EAAE,SAAS;QACfC,MAAM,EAAE;MACV,CAAC,CAAC;IACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}