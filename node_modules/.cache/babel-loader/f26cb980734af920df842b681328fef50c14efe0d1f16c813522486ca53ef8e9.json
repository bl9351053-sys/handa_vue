{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, vModelCheckbox as _vModelCheckbox, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"min-h-screen flex items-center justify-center p-4\",\n  style: {\n    \"background\": \"linear-gradient(135deg, #1e3a8a 0%, #1e40af 50%, #2563eb 100%)\"\n  }\n};\nconst _hoisted_2 = {\n  class: \"login-card w-full max-w-md p-10 rounded-2xl shadow-xl bg-white/95\"\n};\nconst _hoisted_3 = {\n  key: 0,\n  class: \"bg-red-50 border-l-4 border-red-500 text-red-800 px-4 py-3 rounded mb-6\"\n};\nconst _hoisted_4 = {\n  class: \"text-sm\"\n};\nconst _hoisted_5 = {\n  key: 0,\n  class: \"text-sm text-red-600 mt-1\"\n};\nconst _hoisted_6 = {\n  key: 0,\n  class: \"text-sm text-red-600 mt-1\"\n};\nconst _hoisted_7 = {\n  key: 0,\n  class: \"text-sm text-red-600 mt-1\"\n};\nconst _hoisted_8 = {\n  class: \"flex items-center\"\n};\nconst _hoisted_9 = [\"disabled\"];\nconst _hoisted_10 = {\n  key: 0\n};\nconst _hoisted_11 = {\n  key: 1\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[9] || (_cache[9] = _createElementVNode(\"div\", {\n    class: \"mb-8 text-center\"\n  }, [_createElementVNode(\"h1\", {\n    class: \"text-2xl font-semibold text-gray-900 mb-1\"\n  }, \"Sign in to System-E\"), _createElementVNode(\"p\", {\n    class: \"text-sm text-gray-600\"\n  }, \"Enter your credentials to access the admin panel\")], -1 /* CACHED */)), $setup.generalError ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_createElementVNode(\"p\", _hoisted_4, _toDisplayString($setup.generalError), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"form\", {\n    onSubmit: _withModifiers($setup.submit, [\"prevent\"]),\n    class: \"space-y-5\"\n  }, [_createElementVNode(\"div\", null, [_cache[4] || (_cache[4] = _createElementVNode(\"label\", {\n    class: \"block text-sm font-medium text-gray-700 mb-2\",\n    for: \"email\"\n  }, \"Email (optional)\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    id: \"email\",\n    name: \"email\",\n    type: \"email\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.form.email = $event),\n    class: \"input-field w-full px-4 py-3 border rounded-lg\",\n    placeholder: \"you@example.com\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.form.email]]), $setup.errors.email ? (_openBlock(), _createElementBlock(\"p\", _hoisted_5, _toDisplayString($setup.errors.email), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", null, [_cache[5] || (_cache[5] = _createElementVNode(\"label\", {\n    class: \"block text-sm font-medium text-gray-700 mb-2\",\n    for: \"gov_id\"\n  }, \"Government ID (optional)\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    id: \"gov_id\",\n    name: \"gov_id\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.form.gov_id = $event),\n    class: \"input-field w-full px-4 py-3 border rounded-lg\",\n    placeholder: \"123456789012\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.form.gov_id]]), _cache[6] || (_cache[6] = _createElementVNode(\"p\", {\n    class: \"text-xs text-gray-500 mt-1\"\n  }, \"Use either your Email or Government ID to sign in.\", -1 /* CACHED */)), $setup.errors.gov_id ? (_openBlock(), _createElementBlock(\"p\", _hoisted_6, _toDisplayString($setup.errors.gov_id), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", null, [_cache[7] || (_cache[7] = _createElementVNode(\"label\", {\n    class: \"block text-sm font-medium text-gray-700 mb-2\",\n    for: \"password\"\n  }, \"Password\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    id: \"password\",\n    type: \"password\",\n    name: \"password\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.form.password = $event),\n    required: \"\",\n    class: \"input-field w-full px-4 py-3 border rounded-lg\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.form.password]]), $setup.errors.password ? (_openBlock(), _createElementBlock(\"p\", _hoisted_7, _toDisplayString($setup.errors.password), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_8, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"checkbox\",\n    id: \"remember\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.form.remember = $event),\n    class: \"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelCheckbox, $setup.form.remember]]), _cache[8] || (_cache[8] = _createElementVNode(\"label\", {\n    for: \"remember\",\n    class: \"ml-2 text-sm text-gray-700\"\n  }, \"Keep me signed in\", -1 /* CACHED */))]), _createElementVNode(\"div\", null, [_createElementVNode(\"button\", {\n    type: \"submit\",\n    disabled: $setup.submitting,\n    class: \"btn-login w-full text-white font-medium py-3 px-4 rounded-lg bg-blue-600 hover:bg-blue-700\"\n  }, [!$setup.submitting ? (_openBlock(), _createElementBlock(\"span\", _hoisted_10, \"Sign In\")) : (_openBlock(), _createElementBlock(\"span\", _hoisted_11, \"Signing in...\"))], 8 /* PROPS */, _hoisted_9)])], 32 /* NEED_HYDRATION */)])]);\n}","map":{"version":3,"names":["class","style","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","$setup","generalError","_hoisted_3","_hoisted_4","_toDisplayString","onSubmit","_withModifiers","submit","for","id","name","type","form","email","$event","placeholder","errors","_hoisted_5","gov_id","_hoisted_6","password","required","_hoisted_7","_hoisted_8","remember","disabled","submitting","_hoisted_10","_hoisted_11"],"sources":["C:\\VUEprojects\\crud-app\\src\\views\\LoginView.vue"],"sourcesContent":["<template>\r\n  <div class=\"min-h-screen flex items-center justify-center p-4\" style=\"background: linear-gradient(135deg, #1e3a8a 0%, #1e40af 50%, #2563eb 100%);\">\r\n    <div class=\"login-card w-full max-w-md p-10 rounded-2xl shadow-xl bg-white/95\">\r\n      <div class=\"mb-8 text-center\">\r\n        <h1 class=\"text-2xl font-semibold text-gray-900 mb-1\">Sign in to System-E</h1>\r\n        <p class=\"text-sm text-gray-600\">Enter your credentials to access the admin panel</p>\r\n      </div>\r\n\r\n      <div v-if=\"generalError\" class=\"bg-red-50 border-l-4 border-red-500 text-red-800 px-4 py-3 rounded mb-6\">\r\n        <p class=\"text-sm\">{{ generalError }}</p>\r\n      </div>\r\n\r\n      <form @submit.prevent=\"submit\" class=\"space-y-5\">\r\n        <div>\r\n          <label class=\"block text-sm font-medium text-gray-700 mb-2\" for=\"email\">Email (optional)</label>\r\n          <input id=\"email\" name=\"email\" type=\"email\" v-model=\"form.email\" class=\"input-field w-full px-4 py-3 border rounded-lg\" placeholder=\"you@example.com\" />\r\n          <p v-if=\"errors.email\" class=\"text-sm text-red-600 mt-1\">{{ errors.email }}</p>\r\n        </div>\r\n\r\n        <div>\r\n          <label class=\"block text-sm font-medium text-gray-700 mb-2\" for=\"gov_id\">Government ID (optional)</label>\r\n          <input id=\"gov_id\" name=\"gov_id\" v-model=\"form.gov_id\" class=\"input-field w-full px-4 py-3 border rounded-lg\" placeholder=\"123456789012\" />\r\n          <p class=\"text-xs text-gray-500 mt-1\">Use either your Email or Government ID to sign in.</p>\r\n          <p v-if=\"errors.gov_id\" class=\"text-sm text-red-600 mt-1\">{{ errors.gov_id }}</p>\r\n        </div>\r\n\r\n        <div>\r\n          <label class=\"block text-sm font-medium text-gray-700 mb-2\" for=\"password\">Password</label>\r\n          <input id=\"password\" type=\"password\" name=\"password\" v-model=\"form.password\" required class=\"input-field w-full px-4 py-3 border rounded-lg\" />\r\n          <p v-if=\"errors.password\" class=\"text-sm text-red-600 mt-1\">{{ errors.password }}</p>\r\n        </div>\r\n\r\n        <div class=\"flex items-center\">\r\n          <input type=\"checkbox\" id=\"remember\" v-model=\"form.remember\" class=\"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500\" />\r\n          <label for=\"remember\" class=\"ml-2 text-sm text-gray-700\">Keep me signed in</label>\r\n        </div>\r\n\r\n        <div>\r\n          <button type=\"submit\" :disabled=\"submitting\" class=\"btn-login w-full text-white font-medium py-3 px-4 rounded-lg bg-blue-600 hover:bg-blue-700\">\r\n            <span v-if=\"!submitting\">Sign In</span>\r\n            <span v-else>Signing in...</span>\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { reactive, ref, inject } from 'vue'\r\nimport axios from 'axios'\r\nimport { useRouter } from 'vue-router'\r\n\r\nconst router = useRouter()\r\nconst baseUrl = inject('baseUrl', '')\r\n\r\nconst form = reactive({\r\n  email: '',\r\n  gov_id: '',\r\n  password: '',\r\n  remember: false\r\n})\r\n\r\nconst errors = reactive({})\r\nconst generalError = ref('')\r\nconst submitting = ref(false)\r\n\r\nasync function submit() {\r\n  submitting.value = true\r\n  generalError.value = ''\r\n  Object.keys(errors).forEach(k => delete errors[k])\r\n\r\n  try {\r\n    // Determine payload: backend accepts either email or gov_id\r\n    const payload = {};\r\n    if (form.email) {\r\n      payload.email = form.email\r\n    } else if (form.gov_id) {\r\n      payload.gov_id = form.gov_id\r\n    }\r\n    payload.password = form.password\r\n    payload.remember = form.remember\r\n\r\n    const res = await axios.post((baseUrl || '') + '/api/login', payload)\r\n    const token = res.data?.access_token || null\r\n    if (token) {\r\n      localStorage.setItem('token', token)\r\n      axios.defaults.headers.common['Authorization'] = `Bearer ${token}`\r\n    }\r\n\r\n    router.push({ name: 'Dashboard' })\r\n  } catch (err) {\r\n    if (err.response && err.response.status === 422) {\r\n      const respErrors = err.response.data.errors || {}\r\n      Object.assign(errors, respErrors)\r\n    } else if (err.response && err.response.data && err.response.data.message) {\r\n      generalError.value = err.response.data.message\r\n    } else {\r\n      generalError.value = 'Login failed. Please try again.'\r\n    }\r\n  } finally {\r\n    submitting.value = false\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.login-card { backdrop-filter: blur(6px); }\r\n.btn-login{ background: linear-gradient(90deg,#2563eb,#1e40af); }\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}