{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, onMounted } from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\nimport axios from 'axios';\nexport default {\n  __name: 'UpdateEdit',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const route = useRoute();\n    const router = useRouter();\n    const form = ref({});\n    const loading = ref(false);\n    const error = ref(null);\n    const load = async () => {\n      loading.value = true;\n      error.value = null;\n      try {\n        const http = axios;\n        const res = await http.get(`/updates/${route.params.id}`);\n        const data = res.data.data || res.data;\n        form.value = {\n          ...data\n        };\n        if (form.value.issued_at) form.value.issued_at = new Date(form.value.issued_at).toISOString().slice(0, 16);\n      } catch (e) {\n        console.error(e);\n        error.value = 'Failed to load';\n      } finally {\n        loading.value = false;\n      }\n    };\n    const submit = async () => {\n      try {\n        const payload = {\n          ...form.value\n        };\n        if (payload.issued_at) payload.issued_at = new Date(payload.issued_at).toISOString();\n        const http = axios;\n        await http.put(`/updates/${route.params.id}`, payload);\n        router.push('/updates');\n      } catch (e) {\n        console.error(e);\n        alert('Failed to update');\n      }\n    };\n    onMounted(load);\n    const __returned__ = {\n      route,\n      router,\n      form,\n      loading,\n      error,\n      load,\n      submit,\n      ref,\n      onMounted,\n      get useRoute() {\n        return useRoute;\n      },\n      get useRouter() {\n        return useRouter;\n      },\n      get axios() {\n        return axios;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","useRoute","useRouter","axios","route","router","form","loading","error","load","value","http","res","get","params","id","data","issued_at","Date","toISOString","slice","e","console","submit","payload","put","push","alert"],"sources":["C:/VUEprojects/crud-app/src/pages/updates/UpdateEdit.vue"],"sourcesContent":["<template>\r\n  <div class=\"space-y-6\">\r\n    <div class=\"flex items-center justify-between\">\r\n      <h1 class=\"text-2xl font-bold\">Edit Disaster Update</h1>\r\n      <router-link to=\"/updates\" class=\"px-4 py-2 bg-gray-300 rounded\">← Back</router-link>\r\n    </div>\r\n\r\n    <div v-if=\"loading\" class=\"py-6\">Loading…</div>\r\n    <div v-if=\"error\" class=\"text-red-700\">{{ error }}</div>\r\n\r\n    <div v-if=\"!loading\">\r\n      <form @submit.prevent=\"submit\" class=\"bg-white p-4 rounded shadow\">\r\n        <div class=\"grid grid-cols-1 gap-4\">\r\n          <input v-model=\"form.title\" placeholder=\"Title\" class=\"input\" />\r\n          <select v-model=\"form.disaster_type\" class=\"input\">\r\n            <option value=\"typhoon\">Typhoon</option>\r\n            <option value=\"earthquake\">Earthquake</option>\r\n            <option value=\"flood\">Flood</option>\r\n            <option value=\"landslide\">Landslide</option>\r\n          </select>\r\n          <select v-model=\"form.severity\" class=\"input\">\r\n            <option value=\"low\">Low</option>\r\n            <option value=\"moderate\">Moderate</option>\r\n            <option value=\"high\">High</option>\r\n            <option value=\"critical\">Critical</option>\r\n          </select>\r\n          <input v-model=\"form.source\" placeholder=\"Source\" class=\"input\" />\r\n          <textarea v-model=\"form.description\" placeholder=\"Description\" class=\"input\"></textarea>\r\n          <div class=\"flex gap-2\">\r\n            <input v-model=\"form.latitude\" placeholder=\"Latitude\" class=\"input flex-1\" />\r\n            <input v-model=\"form.longitude\" placeholder=\"Longitude\" class=\"input flex-1\" />\r\n          </div>\r\n          <input v-model=\"form.issued_at\" type=\"datetime-local\" class=\"input\" />\r\n        </div>\r\n\r\n        <div class=\"mt-4\">\r\n          <button type=\"submit\" class=\"px-4 py-2 bg-yellow-600 text-white rounded\">Save</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport { useRoute, useRouter } from 'vue-router';\r\n\r\nimport axios from 'axios';\r\nconst route = useRoute();\r\nconst router = useRouter();\r\n\r\nconst form = ref({});\r\nconst loading = ref(false);\r\nconst error = ref(null);\r\n\r\nconst load = async () => {\r\n  loading.value = true; error.value = null;\r\n  try {\r\n    const http = axios;\r\n    const res = await http.get(`/updates/${route.params.id}`);\r\n    const data = res.data.data || res.data;\r\n    form.value = { ...data };\r\n    if (form.value.issued_at) form.value.issued_at = new Date(form.value.issued_at).toISOString().slice(0,16);\r\n  } catch (e) { console.error(e); error.value = 'Failed to load'; }\r\n  finally { loading.value = false; }\r\n};\r\n\r\nconst submit = async () => {\r\n  try {\r\n    const payload = { ...form.value };\r\n    if (payload.issued_at) payload.issued_at = new Date(payload.issued_at).toISOString();\r\n    const http = axios;\r\n    await http.put(`/updates/${route.params.id}`, payload);\r\n    router.push('/updates');\r\n  } catch (e) { console.error(e); alert('Failed to update'); }\r\n};\r\n\r\nonMounted(load);\r\n</script>\r\n"],"mappings":";AA4CA,SAASA,GAAG,EAAEC,SAAS,QAAQ,KAAK;AACpC,SAASC,QAAQ,EAAEC,SAAS,QAAQ,YAAY;AAEhD,OAAOC,KAAK,MAAM,OAAO;;;;;;;IACzB,MAAMC,KAAK,GAAGH,QAAQ,CAAC,CAAC;IACxB,MAAMI,MAAM,GAAGH,SAAS,CAAC,CAAC;IAE1B,MAAMI,IAAI,GAAGP,GAAG,CAAC,CAAC,CAAC,CAAC;IACpB,MAAMQ,OAAO,GAAGR,GAAG,CAAC,KAAK,CAAC;IAC1B,MAAMS,KAAK,GAAGT,GAAG,CAAC,IAAI,CAAC;IAEvB,MAAMU,IAAI,GAAG,MAAAA,CAAA,KAAY;MACvBF,OAAO,CAACG,KAAK,GAAG,IAAI;MAAEF,KAAK,CAACE,KAAK,GAAG,IAAI;MACxC,IAAI;QACF,MAAMC,IAAI,GAAGR,KAAK;QAClB,MAAMS,GAAG,GAAG,MAAMD,IAAI,CAACE,GAAG,CAAC,YAAYT,KAAK,CAACU,MAAM,CAACC,EAAE,EAAE,CAAC;QACzD,MAAMC,IAAI,GAAGJ,GAAG,CAACI,IAAI,CAACA,IAAI,IAAIJ,GAAG,CAACI,IAAI;QACtCV,IAAI,CAACI,KAAK,GAAG;UAAE,GAAGM;QAAK,CAAC;QACxB,IAAIV,IAAI,CAACI,KAAK,CAACO,SAAS,EAAEX,IAAI,CAACI,KAAK,CAACO,SAAS,GAAG,IAAIC,IAAI,CAACZ,IAAI,CAACI,KAAK,CAACO,SAAS,CAAC,CAACE,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,CAAC,EAAC,EAAE,CAAC;MAC3G,CAAC,CAAC,OAAOC,CAAC,EAAE;QAAEC,OAAO,CAACd,KAAK,CAACa,CAAC,CAAC;QAAEb,KAAK,CAACE,KAAK,GAAG,gBAAgB;MAAE,CAAC,SACzD;QAAEH,OAAO,CAACG,KAAK,GAAG,KAAK;MAAE;IACnC,CAAC;IAED,MAAMa,MAAM,GAAG,MAAAA,CAAA,KAAY;MACzB,IAAI;QACF,MAAMC,OAAO,GAAG;UAAE,GAAGlB,IAAI,CAACI;QAAM,CAAC;QACjC,IAAIc,OAAO,CAACP,SAAS,EAAEO,OAAO,CAACP,SAAS,GAAG,IAAIC,IAAI,CAACM,OAAO,CAACP,SAAS,CAAC,CAACE,WAAW,CAAC,CAAC;QACpF,MAAMR,IAAI,GAAGR,KAAK;QAClB,MAAMQ,IAAI,CAACc,GAAG,CAAC,YAAYrB,KAAK,CAACU,MAAM,CAACC,EAAE,EAAE,EAAES,OAAO,CAAC;QACtDnB,MAAM,CAACqB,IAAI,CAAC,UAAU,CAAC;MACzB,CAAC,CAAC,OAAOL,CAAC,EAAE;QAAEC,OAAO,CAACd,KAAK,CAACa,CAAC,CAAC;QAAEM,KAAK,CAAC,kBAAkB,CAAC;MAAE;IAC7D,CAAC;IAED3B,SAAS,CAACS,IAAI,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}