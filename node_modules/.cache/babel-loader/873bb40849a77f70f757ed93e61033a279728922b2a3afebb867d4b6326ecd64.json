{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, inject, onMounted } from 'vue';\nimport { useRouter, useRoute } from 'vue-router';\nexport default {\n  __name: 'DisasterUpdateDetail',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const router = useRouter();\n    const route = useRoute();\n    const residentAxios = inject('residentAxios');\n    const update = ref(null);\n    const loading = ref(false);\n    const error = ref(null);\n    const fetchUpdate = async id => {\n      loading.value = true;\n      error.value = null;\n      try {\n        console.log('[Disaster] Fetching update:', id);\n        const response = await residentAxios.get(`/disaster-updates/${id}`);\n        if (response.data && response.data.data) {\n          update.value = response.data.data;\n          console.log('[Disaster] Update fetched:', update.value.title);\n        } else {\n          update.value = response.data || {};\n          console.log('[Disaster] Update fetched (raw):', update.value.title);\n        }\n      } catch (err) {\n        console.error('[Disaster] Fetch error:', err);\n        error.value = 'Failed to load disaster update. Please try again.';\n      } finally {\n        loading.value = false;\n      }\n    };\n    const goBack = () => {\n      console.log('[Disaster] Going back to list');\n      router.push({\n        path: '/resident_pages/disaster-updates'\n      });\n    };\n    const formatDate = dateString => {\n      try {\n        const date = new Date(dateString);\n        return date.toLocaleDateString('en-US', {\n          year: 'numeric',\n          month: 'long',\n          day: 'numeric',\n          hour: '2-digit',\n          minute: '2-digit'\n        });\n      } catch (e) {\n        return dateString;\n      }\n    };\n    const getTimeAgo = dateString => {\n      try {\n        const date = new Date(dateString);\n        const now = new Date();\n        const seconds = Math.floor((now - date) / 1000);\n        if (seconds < 60) return `${seconds}s ago`;\n        if (seconds < 3600) return `${Math.floor(seconds / 60)}m ago`;\n        if (seconds < 86400) return `${Math.floor(seconds / 3600)}h ago`;\n        if (seconds < 604800) return `${Math.floor(seconds / 86400)}d ago`;\n        return `${Math.floor(seconds / 604800)}w ago`;\n      } catch (e) {\n        return '';\n      }\n    };\n    onMounted(() => {\n      const id = route.params.id;\n      console.log('[Disaster] Component mounted with id:', id);\n      if (id) {\n        fetchUpdate(id);\n      }\n    });\n    const __returned__ = {\n      router,\n      route,\n      residentAxios,\n      update,\n      loading,\n      error,\n      fetchUpdate,\n      goBack,\n      formatDate,\n      getTimeAgo,\n      ref,\n      inject,\n      onMounted,\n      get useRouter() {\n        return useRouter;\n      },\n      get useRoute() {\n        return useRoute;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","inject","onMounted","useRouter","useRoute","router","route","residentAxios","update","loading","error","fetchUpdate","id","value","console","log","response","get","data","title","err","goBack","push","path","formatDate","dateString","date","Date","toLocaleDateString","year","month","day","hour","minute","e","getTimeAgo","now","seconds","Math","floor","params"],"sources":["C:/VUEprojects/crud-app/src/pages/resident_pages/DisasterUpdateDetail.vue"],"sourcesContent":["<template>\r\n  <div class=\"space-y-6\">\r\n    <!-- Header -->\r\n    <div class=\"flex items-center justify-between\">\r\n      <button\r\n        @click=\"goBack\"\r\n        class=\"px-4 py-2 bg-gray-300 text-gray-800 rounded-lg hover:bg-gray-400 flex items-center gap-2\"\r\n      >\r\n        ‚Üê Back\r\n      </button>\r\n    </div>\r\n\r\n    <!-- Loading State -->\r\n    <div v-if=\"loading\" class=\"text-center py-8\">\r\n      <p class=\"text-gray-600\">Loading disaster update...</p>\r\n    </div>\r\n\r\n    <!-- Error State -->\r\n    <div v-if=\"error && !loading\" class=\"bg-red-50 border border-red-200 rounded-lg p-4\">\r\n      <p class=\"text-red-800\">{{ error }}</p>\r\n    </div>\r\n\r\n    <!-- Update Detail -->\r\n    <div v-if=\"!loading && !error && update\" class=\"space-y-6\">\r\n      <!-- Severity Card -->\r\n      <div\r\n        :class=\"[\r\n          'rounded-lg p-6',\r\n          {\r\n            'bg-red-50 border-2 border-red-300': update.severity === 'critical',\r\n            'bg-orange-50 border-2 border-orange-300': update.severity === 'high',\r\n            'bg-yellow-50 border-2 border-yellow-300': update.severity === 'moderate',\r\n            'bg-blue-50 border-2 border-blue-300': update.severity === 'low',\r\n          }\r\n        ]\"\r\n      >\r\n        <div class=\"flex items-start justify-between gap-4 mb-4\">\r\n          <div>\r\n            <h1 class=\"text-3xl font-bold text-gray-800 mb-3\">{{ update.title }}</h1>\r\n            <div class=\"flex items-center gap-2 flex-wrap\">\r\n              <span\r\n                :class=\"[\r\n                  'px-4 py-2 rounded-full text-sm font-semibold',\r\n                  {\r\n                    'bg-red-600 text-white': update.severity === 'critical',\r\n                    'bg-orange-600 text-white': update.severity === 'high',\r\n                    'bg-yellow-600 text-white': update.severity === 'moderate',\r\n                    'bg-blue-600 text-white': update.severity === 'low',\r\n                  }\r\n                ]\"\r\n              >\r\n                {{ update.severity.charAt(0).toUpperCase() + update.severity.slice(1) }} Severity\r\n              </span>\r\n              <span class=\"px-4 py-2 rounded-full text-sm font-semibold bg-gray-400 text-white\">\r\n                {{ update.disaster_type.charAt(0).toUpperCase() + update.disaster_type.slice(1) }}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <p class=\"text-gray-700 text-lg leading-relaxed mb-4\">{{ update.description }}</p>\r\n\r\n        <div class=\"border-t-2 border-gray-300 pt-4 space-y-2\">\r\n          <p class=\"text-gray-700\">\r\n            <strong>Source:</strong> {{ update.source }}\r\n          </p>\r\n          <p class=\"text-gray-700\">\r\n            <strong>Issued:</strong> {{ formatDate(update.issued_at) }}\r\n          </p>\r\n          <p class=\"text-gray-600 text-sm\">\r\n            <strong>Time:</strong> {{ getTimeAgo(update.issued_at) }}\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Map Section (if coordinates available) -->\r\n      <div v-if=\"update.latitude && update.longitude\" class=\"rounded-lg overflow-hidden border border-gray-300\">\r\n        <div class=\"bg-gray-200 p-4 text-center\">\r\n          <p class=\"text-gray-600\">\r\n            üìç <strong>Affected Location:</strong> {{ update.latitude }}, {{ update.longitude }}\r\n          </p>\r\n          <p class=\"text-sm text-gray-500 mt-2\">Map visualization coming soon</p>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Related Information -->\r\n      <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n        <div class=\"bg-gray-50 border border-gray-200 rounded-lg p-4\">\r\n          <h3 class=\"font-semibold text-gray-800 mb-2\">üìå Disaster Type</h3>\r\n          <p class=\"text-gray-700\">\r\n            {{ update.disaster_type.charAt(0).toUpperCase() + update.disaster_type.slice(1) }}\r\n          </p>\r\n        </div>\r\n\r\n        <div class=\"bg-gray-50 border border-gray-200 rounded-lg p-4\">\r\n          <h3 class=\"font-semibold text-gray-800 mb-2\">‚ö†Ô∏è Severity Level</h3>\r\n          <p class=\"text-gray-700\">\r\n            {{ update.severity.charAt(0).toUpperCase() + update.severity.slice(1) }}\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Actions -->\r\n      <div class=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\r\n        <h3 class=\"font-semibold text-gray-800 mb-3\">üìã Recommended Actions</h3>\r\n        <ul class=\"list-disc list-inside space-y-2 text-gray-700\">\r\n          <li v-if=\"update.severity === 'critical'\">\r\n            Evacuate immediately to the nearest evacuation center\r\n          </li>\r\n          <li v-if=\"['critical', 'high'].includes(update.severity)\">\r\n            Monitor official government channels for updates\r\n          </li>\r\n          <li>\r\n            Prepare an emergency kit with essential supplies\r\n          </li>\r\n          <li>\r\n            Keep emergency contact numbers accessible\r\n          </li>\r\n          <li>\r\n            Help neighbors, especially the elderly and children\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, inject, onMounted } from 'vue';\r\nimport { useRouter, useRoute } from 'vue-router';\r\n\r\nconst router = useRouter();\r\nconst route = useRoute();\r\nconst residentAxios = inject('residentAxios');\r\n\r\nconst update = ref(null);\r\nconst loading = ref(false);\r\nconst error = ref(null);\r\n\r\nconst fetchUpdate = async (id) => {\r\n  loading.value = true;\r\n  error.value = null;\r\n\r\n  try {\r\n    console.log('[Disaster] Fetching update:', id);\r\n    const response = await residentAxios.get(`/disaster-updates/${id}`);\r\n\r\n    if (response.data && response.data.data) {\r\n      update.value = response.data.data;\r\n      console.log('[Disaster] Update fetched:', update.value.title);\r\n    } else {\r\n      update.value = response.data || {};\r\n      console.log('[Disaster] Update fetched (raw):', update.value.title);\r\n    }\r\n  } catch (err) {\r\n    console.error('[Disaster] Fetch error:', err);\r\n    error.value = 'Failed to load disaster update. Please try again.';\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n};\r\n\r\nconst goBack = () => {\r\n  console.log('[Disaster] Going back to list');\r\n  router.push({ path: '/resident_pages/disaster-updates' });\r\n};\r\n\r\nconst formatDate = (dateString) => {\r\n  try {\r\n    const date = new Date(dateString);\r\n    return date.toLocaleDateString('en-US', {\r\n      year: 'numeric',\r\n      month: 'long',\r\n      day: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit',\r\n    });\r\n  } catch (e) {\r\n    return dateString;\r\n  }\r\n};\r\n\r\nconst getTimeAgo = (dateString) => {\r\n  try {\r\n    const date = new Date(dateString);\r\n    const now = new Date();\r\n    const seconds = Math.floor((now - date) / 1000);\r\n\r\n    if (seconds < 60) return `${seconds}s ago`;\r\n    if (seconds < 3600) return `${Math.floor(seconds / 60)}m ago`;\r\n    if (seconds < 86400) return `${Math.floor(seconds / 3600)}h ago`;\r\n    if (seconds < 604800) return `${Math.floor(seconds / 86400)}d ago`;\r\n\r\n    return `${Math.floor(seconds / 604800)}w ago`;\r\n  } catch (e) {\r\n    return '';\r\n  }\r\n};\r\n\r\nonMounted(() => {\r\n  const id = route.params.id;\r\n  console.log('[Disaster] Component mounted with id:', id);\r\n  if (id) {\r\n    fetchUpdate(id);\r\n  }\r\n});\r\n</script>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}