{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, Fragment as _Fragment, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, vModelSelect as _vModelSelect, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"page-container\"\n};\nconst _hoisted_2 = {\n  class: \"content-wrapper\"\n};\nconst _hoisted_3 = {\n  class: \"header\"\n};\nconst _hoisted_4 = {\n  key: 0,\n  class: \"loading-card\"\n};\nconst _hoisted_5 = {\n  class: \"error-card\"\n};\nconst _hoisted_6 = {\n  class: \"card\"\n};\nconst _hoisted_7 = {\n  key: 0,\n  class: \"error-card mb-6\"\n};\nconst _hoisted_8 = {\n  class: \"grid grid-cols-1 md:grid-cols-2 gap-6\"\n};\nconst _hoisted_9 = {\n  key: 0,\n  class: \"error-text\"\n};\nconst _hoisted_10 = {\n  key: 0,\n  class: \"error-text\"\n};\nconst _hoisted_11 = {\n  key: 0,\n  class: \"error-text\"\n};\nconst _hoisted_12 = {\n  class: \"grid grid-cols-1 md:grid-cols-3 gap-6\"\n};\nconst _hoisted_13 = {\n  key: 0,\n  class: \"error-text\"\n};\nconst _hoisted_14 = [\"value\"];\nconst _hoisted_15 = {\n  key: 0,\n  class: \"error-text\"\n};\nconst _hoisted_16 = {\n  key: 0,\n  class: \"error-text\"\n};\nconst _hoisted_17 = {\n  key: 0,\n  class: \"error-text\"\n};\nconst _hoisted_18 = {\n  class: \"family-members\"\n};\nconst _hoisted_19 = {\n  class: \"space-y-3 mb-4\"\n};\nconst _hoisted_20 = [\"onUpdate:modelValue\"];\nconst _hoisted_21 = [\"onUpdate:modelValue\"];\nconst _hoisted_22 = [\"onUpdate:modelValue\"];\nconst _hoisted_23 = [\"onClick\"];\nconst _hoisted_24 = {\n  class: \"form-actions\"\n};\nconst _hoisted_25 = [\"disabled\"];\nconst _hoisted_26 = {\n  key: 0\n};\nconst _hoisted_27 = {\n  key: 1\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createCommentVNode(\" Header \"), _createElementVNode(\"div\", _hoisted_3, [_cache[8] || (_cache[8] = _createElementVNode(\"div\", null, [_createElementVNode(\"h1\", {\n    class: \"title\"\n  }, \"Edit Family\"), _createElementVNode(\"p\", {\n    class: \"subtitle\"\n  }, \"Update family information\")], -1 /* CACHED */)), _createVNode(_component_router_link, {\n    to: \"/families\",\n    class: \"back-link\"\n  }, {\n    default: _withCtx(() => [...(_cache[7] || (_cache[7] = [_createElementVNode(\"span\", {\n      class: \"arrow\"\n    }, \"â†\", -1 /* CACHED */), _createTextVNode(\" Back to Families \", -1 /* CACHED */)]))]),\n    _: 1 /* STABLE */\n  })]), _cache[23] || (_cache[23] = _createTextVNode(\" ``` \", -1 /* CACHED */)), _createCommentVNode(\" Loading \"), $setup.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [...(_cache[9] || (_cache[9] = [_createElementVNode(\"div\", {\n    class: \"loading-content\"\n  }, [_createElementVNode(\"div\", {\n    class: \"spinner\"\n  }), _createElementVNode(\"span\", null, \"Loading family...\")], -1 /* CACHED */)]))])) : $setup.generalError ? (_openBlock(), _createElementBlock(_Fragment, {\n    key: 1\n  }, [_createCommentVNode(\" Error \"), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"p\", null, _toDisplayString($setup.generalError), 1 /* TEXT */)])], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */)) : (_openBlock(), _createElementBlock(_Fragment, {\n    key: 2\n  }, [_createCommentVNode(\" Form \"), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"form\", {\n    onSubmit: _withModifiers($setup.submit, [\"prevent\"]),\n    class: \"space-y-6\"\n  }, [_createCommentVNode(\" Error Messages \"), Object.keys($setup.errors).length ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [...(_cache[10] || (_cache[10] = [_createElementVNode(\"p\", null, \"Please fix the errors below.\", -1 /* CACHED */)]))])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Row 1: Family Head & Contact \"), _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"div\", null, [_cache[11] || (_cache[11] = _createElementVNode(\"label\", {\n    class: \"label\"\n  }, [_createTextVNode(\"Family Head Name \"), _createElementVNode(\"span\", {\n    class: \"text-red-500\"\n  }, \"*\")], -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.form.family_head_name = $event),\n    type: \"text\",\n    required: \"\",\n    class: \"input-field\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.form.family_head_name]]), $setup.errors.family_head_name ? (_openBlock(), _createElementBlock(\"p\", _hoisted_9, _toDisplayString($setup.errors.family_head_name), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", null, [_cache[12] || (_cache[12] = _createElementVNode(\"label\", {\n    class: \"label\"\n  }, \"Contact Number\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.form.contact_number = $event),\n    type: \"text\",\n    class: \"input-field\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.form.contact_number]]), $setup.errors.contact_number ? (_openBlock(), _createElementBlock(\"p\", _hoisted_10, _toDisplayString($setup.errors.contact_number), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)])]), _createCommentVNode(\" Address \"), _createElementVNode(\"div\", null, [_cache[13] || (_cache[13] = _createElementVNode(\"label\", {\n    class: \"label\"\n  }, [_createTextVNode(\"Address \"), _createElementVNode(\"span\", {\n    class: \"text-red-500\"\n  }, \"*\")], -1 /* CACHED */)), _withDirectives(_createElementVNode(\"textarea\", {\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.form.address = $event),\n    rows: \"3\",\n    required: \"\",\n    class: \"input-field\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.form.address]]), $setup.errors.address ? (_openBlock(), _createElementBlock(\"p\", _hoisted_11, _toDisplayString($setup.errors.address), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createCommentVNode(\" Row 2: Total Members, Evacuation Area, Status \"), _createElementVNode(\"div\", _hoisted_12, [_createElementVNode(\"div\", null, [_cache[14] || (_cache[14] = _createElementVNode(\"label\", {\n    class: \"label\"\n  }, [_createTextVNode(\"Total Members \"), _createElementVNode(\"span\", {\n    class: \"text-red-500\"\n  }, \"*\")], -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.form.total_members = $event),\n    type: \"number\",\n    min: \"1\",\n    required: \"\",\n    class: \"input-field\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.form.total_members, void 0, {\n    number: true\n  }]]), $setup.errors.total_members ? (_openBlock(), _createElementBlock(\"p\", _hoisted_13, _toDisplayString($setup.errors.total_members), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", null, [_cache[16] || (_cache[16] = _createElementVNode(\"label\", {\n    class: \"label\"\n  }, \"Evacuation Area\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $setup.form.evacuation_area_id = $event),\n    class: \"input-field\"\n  }, [_cache[15] || (_cache[15] = _createElementVNode(\"option\", {\n    value: \"\"\n  }, \"Not assigned\", -1 /* CACHED */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.evacuationAreas, area => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      key: area.id,\n      value: area.id\n    }, _toDisplayString(area.name), 9 /* TEXT, PROPS */, _hoisted_14);\n  }), 128 /* KEYED_FRAGMENT */))], 512 /* NEED_PATCH */), [[_vModelSelect, $setup.form.evacuation_area_id]]), $setup.errors.evacuation_area_id ? (_openBlock(), _createElementBlock(\"p\", _hoisted_15, _toDisplayString($setup.errors.evacuation_area_id), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", null, [_cache[18] || (_cache[18] = _createElementVNode(\"label\", {\n    class: \"label\"\n  }, [_createTextVNode(\"Status \"), _createElementVNode(\"span\", {\n    class: \"text-red-500\"\n  }, \"*\")], -1 /* CACHED */)), _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $setup.form.status = $event),\n    required: \"\",\n    class: \"input-field\"\n  }, [...(_cache[17] || (_cache[17] = [_createElementVNode(\"option\", {\n    value: \"pending\"\n  }, \"Pending\", -1 /* CACHED */), _createElementVNode(\"option\", {\n    value: \"evacuated\"\n  }, \"Evacuated\", -1 /* CACHED */), _createElementVNode(\"option\", {\n    value: \"returned\"\n  }, \"Returned\", -1 /* CACHED */)]))], 512 /* NEED_PATCH */), [[_vModelSelect, $setup.form.status]]), $setup.errors.status ? (_openBlock(), _createElementBlock(\"p\", _hoisted_16, _toDisplayString($setup.errors.status), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)])]), _createCommentVNode(\" Special Needs \"), _createElementVNode(\"div\", null, [_cache[19] || (_cache[19] = _createElementVNode(\"label\", {\n    class: \"label\"\n  }, \"Special Needs\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"textarea\", {\n    \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => $setup.form.special_needs = $event),\n    rows: \"2\",\n    class: \"input-field\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.form.special_needs]]), $setup.errors.special_needs ? (_openBlock(), _createElementBlock(\"p\", _hoisted_17, _toDisplayString($setup.errors.special_needs), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createCommentVNode(\" Family Members \"), _createElementVNode(\"div\", _hoisted_18, [_cache[21] || (_cache[21] = _createElementVNode(\"h3\", null, \"Family Members\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_19, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.form.members, (member, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: index,\n      class: \"member-card\"\n    }, [_withDirectives(_createElementVNode(\"input\", {\n      \"onUpdate:modelValue\": $event => member.name = $event,\n      type: \"text\",\n      placeholder: \"Name\",\n      required: \"\",\n      class: \"member-input\"\n    }, null, 8 /* PROPS */, _hoisted_20), [[_vModelText, member.name]]), _withDirectives(_createElementVNode(\"input\", {\n      \"onUpdate:modelValue\": $event => member.age = $event,\n      type: \"number\",\n      placeholder: \"Age\",\n      min: \"0\",\n      class: \"member-input\"\n    }, null, 8 /* PROPS */, _hoisted_21), [[_vModelText, member.age, void 0, {\n      number: true\n    }]]), _withDirectives(_createElementVNode(\"select\", {\n      \"onUpdate:modelValue\": $event => member.gender = $event,\n      class: \"member-input\"\n    }, [...(_cache[20] || (_cache[20] = [_createElementVNode(\"option\", {\n      value: \"\"\n    }, \"Gender\", -1 /* CACHED */), _createElementVNode(\"option\", {\n      value: \"male\"\n    }, \"Male\", -1 /* CACHED */), _createElementVNode(\"option\", {\n      value: \"female\"\n    }, \"Female\", -1 /* CACHED */)]))], 8 /* PROPS */, _hoisted_22), [[_vModelSelect, member.gender]]), _createElementVNode(\"button\", {\n      type: \"button\",\n      onClick: $event => $setup.removeMember(index, member.id),\n      class: \"remove-btn\"\n    }, \"Remove\", 8 /* PROPS */, _hoisted_23)]);\n  }), 128 /* KEYED_FRAGMENT */))]), _createElementVNode(\"button\", {\n    type: \"button\",\n    onClick: $setup.addMember,\n    class: \"add-btn\"\n  }, \"+ Add Member\")]), _createCommentVNode(\" Actions \"), _createElementVNode(\"div\", _hoisted_24, [_createVNode(_component_router_link, {\n    to: \"/families\",\n    class: \"cancel-btn\"\n  }, {\n    default: _withCtx(() => [...(_cache[22] || (_cache[22] = [_createTextVNode(\"Cancel\", -1 /* CACHED */)]))]),\n    _: 1 /* STABLE */\n  }), _createElementVNode(\"button\", {\n    type: \"submit\",\n    disabled: $setup.submitting,\n    class: \"submit-btn\"\n  }, [!$setup.submitting ? (_openBlock(), _createElementBlock(\"span\", _hoisted_26, \"Update Family\")) : (_openBlock(), _createElementBlock(\"span\", _hoisted_27, \"Updating...\"))], 8 /* PROPS */, _hoisted_25)])], 32 /* NEED_HYDRATION */)])], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))]), _cache[24] || (_cache[24] = _createTextVNode(\" ``` \", -1 /* CACHED */))]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createCommentVNode","_hoisted_3","_createVNode","_component_router_link","to","_cache","$setup","loading","_hoisted_4","generalError","_Fragment","key","_hoisted_5","_toDisplayString","_hoisted_6","onSubmit","_withModifiers","submit","Object","keys","errors","length","_hoisted_7","_hoisted_8","form","family_head_name","$event","type","required","_hoisted_9","contact_number","_hoisted_10","address","rows","_hoisted_11","_hoisted_12","total_members","min","number","_hoisted_13","evacuation_area_id","value","_renderList","evacuationAreas","area","id","name","_hoisted_14","_hoisted_15","status","_hoisted_16","special_needs","_hoisted_17","_hoisted_18","_hoisted_19","members","member","index","placeholder","age","gender","onClick","removeMember","_hoisted_23","addMember","_hoisted_24","disabled","submitting","_hoisted_26","_hoisted_27"],"sources":["C:\\VUEprojects\\crud-app\\src\\pages\\FamilyEdit.vue"],"sourcesContent":["<template>\r\n  <div class=\"page-container\">\r\n    <div class=\"content-wrapper\">\r\n      <!-- Header -->\r\n      <div class=\"header\">\r\n        <div>\r\n          <h1 class=\"title\">Edit Family</h1>\r\n          <p class=\"subtitle\">Update family information</p>\r\n        </div>\r\n        <router-link to=\"/families\" class=\"back-link\">\r\n          <span class=\"arrow\">&#8592;</span> Back to Families\r\n        </router-link>\r\n      </div>\r\n\r\n```\r\n  <!-- Loading -->\r\n  <div v-if=\"loading\" class=\"loading-card\">\r\n    <div class=\"loading-content\">\r\n      <div class=\"spinner\"></div>\r\n      <span>Loading family...</span>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- Error -->\r\n  <div v-else-if=\"generalError\" class=\"error-card\">\r\n    <p>{{ generalError }}</p>\r\n  </div>\r\n\r\n  <!-- Form -->\r\n  <div v-else class=\"card\">\r\n    <form @submit.prevent=\"submit\" class=\"space-y-6\">\r\n      <!-- Error Messages -->\r\n      <div v-if=\"Object.keys(errors).length\" class=\"error-card mb-6\">\r\n        <p>Please fix the errors below.</p>\r\n      </div>\r\n\r\n      <!-- Row 1: Family Head & Contact -->\r\n      <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n        <div>\r\n          <label class=\"label\">Family Head Name <span class=\"text-red-500\">*</span></label>\r\n          <input v-model=\"form.family_head_name\" type=\"text\" required class=\"input-field\" />\r\n          <p v-if=\"errors.family_head_name\" class=\"error-text\">{{ errors.family_head_name }}</p>\r\n        </div>\r\n        <div>\r\n          <label class=\"label\">Contact Number</label>\r\n          <input v-model=\"form.contact_number\" type=\"text\" class=\"input-field\" />\r\n          <p v-if=\"errors.contact_number\" class=\"error-text\">{{ errors.contact_number }}</p>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Address -->\r\n      <div>\r\n        <label class=\"label\">Address <span class=\"text-red-500\">*</span></label>\r\n        <textarea v-model=\"form.address\" rows=\"3\" required class=\"input-field\"></textarea>\r\n        <p v-if=\"errors.address\" class=\"error-text\">{{ errors.address }}</p>\r\n      </div>\r\n\r\n      <!-- Row 2: Total Members, Evacuation Area, Status -->\r\n      <div class=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n        <div>\r\n          <label class=\"label\">Total Members <span class=\"text-red-500\">*</span></label>\r\n          <input v-model.number=\"form.total_members\" type=\"number\" min=\"1\" required class=\"input-field\" />\r\n          <p v-if=\"errors.total_members\" class=\"error-text\">{{ errors.total_members }}</p>\r\n        </div>\r\n        <div>\r\n          <label class=\"label\">Evacuation Area</label>\r\n          <select v-model=\"form.evacuation_area_id\" class=\"input-field\">\r\n            <option value=\"\">Not assigned</option>\r\n            <option v-for=\"area in evacuationAreas\" :key=\"area.id\" :value=\"area.id\">{{ area.name }}</option>\r\n          </select>\r\n          <p v-if=\"errors.evacuation_area_id\" class=\"error-text\">{{ errors.evacuation_area_id }}</p>\r\n        </div>\r\n        <div>\r\n          <label class=\"label\">Status <span class=\"text-red-500\">*</span></label>\r\n          <select v-model=\"form.status\" required class=\"input-field\">\r\n            <option value=\"pending\">Pending</option>\r\n            <option value=\"evacuated\">Evacuated</option>\r\n            <option value=\"returned\">Returned</option>\r\n          </select>\r\n          <p v-if=\"errors.status\" class=\"error-text\">{{ errors.status }}</p>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Special Needs -->\r\n      <div>\r\n        <label class=\"label\">Special Needs</label>\r\n        <textarea v-model=\"form.special_needs\" rows=\"2\" class=\"input-field\"></textarea>\r\n        <p v-if=\"errors.special_needs\" class=\"error-text\">{{ errors.special_needs }}</p>\r\n      </div>\r\n\r\n      <!-- Family Members -->\r\n      <div class=\"family-members\">\r\n        <h3>Family Members</h3>\r\n        <div class=\"space-y-3 mb-4\">\r\n          <div v-for=\"(member, index) in form.members\" :key=\"index\" class=\"member-card\">\r\n            <input v-model=\"member.name\" type=\"text\" placeholder=\"Name\" required class=\"member-input\" />\r\n            <input v-model.number=\"member.age\" type=\"number\" placeholder=\"Age\" min=\"0\" class=\"member-input\" />\r\n            <select v-model=\"member.gender\" class=\"member-input\">\r\n              <option value=\"\">Gender</option>\r\n              <option value=\"male\">Male</option>\r\n              <option value=\"female\">Female</option>\r\n            </select>\r\n            <button type=\"button\" @click=\"removeMember(index, member.id)\" class=\"remove-btn\">Remove</button>\r\n          </div>\r\n        </div>\r\n        <button type=\"button\" @click=\"addMember\" class=\"add-btn\">+ Add Member</button>\r\n      </div>\r\n\r\n      <!-- Actions -->\r\n      <div class=\"form-actions\">\r\n        <router-link to=\"/families\" class=\"cancel-btn\">Cancel</router-link>\r\n        <button type=\"submit\" :disabled=\"submitting\" class=\"submit-btn\">\r\n          <span v-if=\"!submitting\">Update Family</span>\r\n          <span v-else>Updating...</span>\r\n        </button>\r\n      </div>\r\n    </form>\r\n  </div>\r\n</div>\r\n```\r\n\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { reactive, ref, inject, onMounted } from 'vue'\r\nimport axios from 'axios'\r\nimport { useRouter, useRoute } from 'vue-router'\r\n\r\nconst router = useRouter()\r\nconst route = useRoute()\r\nconst baseUrl = inject('baseUrl', '')\r\nconst familyId = route.params.id\r\n\r\nconst form = reactive({\r\n  family_head_name: '',\r\n  contact_number: '',\r\n  address: '',\r\n  total_members: 1,\r\n  evacuation_area_id: '',\r\n  status: 'pending',\r\n  special_needs: '',\r\n  members: []\r\n})\r\nconst errors = reactive({})\r\nconst generalError = ref('')\r\nconst submitting = ref(false)\r\nconst loading = ref(true)\r\nconst evacuationAreas = ref([])\r\nconst deletedMemberIds = ref([])\r\n\r\nonMounted(async () => {\r\n  await Promise.all([fetchFamily(), fetchEvacuationAreas()])\r\n})\r\n\r\nasync function fetchFamily() {\r\n  try {\r\n    const res = await axios.get(`${baseUrl}/families/${familyId}`)\r\n    const family = res.data?.data || res.data\r\n    Object.assign(form, family)\r\n  } catch (err) {\r\n    generalError.value = 'Failed to load family. Please try again.'\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\nasync function fetchEvacuationAreas() {\r\n  try {\r\n    const res = await axios.get(`${baseUrl}/evacuation-areas`)\r\n    evacuationAreas.value = res.data?.data || res.data || []\r\n  } catch (err) {\r\n    console.error('Failed to fetch evacuation areas:', err)\r\n  }\r\n}\r\n\r\nfunction addMember() {\r\n  form.members.push({ name: '', age: null, gender: '' })\r\n}\r\n\r\nfunction removeMember(index, memberId) {\r\n  if (memberId) deletedMemberIds.value.push(memberId)\r\n  form.members.splice(index, 1)\r\n}\r\n\r\nasync function submit() {\r\n  submitting.value = true\r\n  generalError.value = ''\r\n  Object.keys(errors).forEach(k => delete errors[k])\r\n\r\n  try {\r\n    const payload = {\r\n      family_head_name: form.family_head_name,\r\n      contact_number: form.contact_number || null,\r\n      address: form.address,\r\n      total_members: form.total_members,\r\n      evacuation_area_id: form.evacuation_area_id || null,\r\n      status: form.status,\r\n      special_needs: form.special_needs || null,\r\n      members: form.members,\r\n      deleted_ids: deletedMemberIds.value.join(',')\r\n    }\r\n    await axios.put(`${baseUrl}/families/${familyId}`, payload)\r\n    router.push('/families')\r\n  } catch (err) {\r\n    if (err.response?.status === 422) Object.assign(errors, err.response.data.errors || {})\r\n    else generalError.value = err.response?.data?.message || 'Failed to update family. Please try again.'\r\n  } finally {\r\n    submitting.value = false\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.page-container { min-height: 100vh; background: #f0f4f8; padding: 30px; font-family: 'Inter', sans-serif; }\r\n.content-wrapper { max-width: 900px; margin: 0 auto; }\r\n\r\n.header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }\r\n.title { font-size: 2.5rem; font-weight: 700; background: linear-gradient(90deg,#6366f1,#4f46e5); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }\r\n.subtitle { font-size: 1rem; color: #4b5563; margin-top: 4px; }\r\n.back-link { font-weight: 500; color: #6366f1; text-decoration: none; display: flex; align-items: center; gap: 5px; }\r\n.back-link:hover { color: #4338ca; text-decoration: underline; }\r\n\r\n.card { background: rgba(255,255,255,0.98); padding: 30px; border-radius: 25px; box-shadow: 0 15px 35px rgba(0,0,0,0.1); }\r\n\r\n.loading-card, .error-card { text-align: center; margin-bottom: 20px; }\r\n.loading-card { background: rgba(255,255,255,0.95); padding: 40px; border-radius: 20px; box-shadow: 0 15px 35px rgba(0,0,0,0.12); display: flex; justify-content: center; align-items: center; gap: 12px; }\r\n.spinner { width: 32px; height: 32px; border: 4px solid #e0e7ff; border-top: 4px solid #6366f1; border-radius: 50%; animation: spin 1s linear infinite; }\r\n@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }\r\n.error-card { background: rgba(254,226,226,0.95); color: #b91c1c; padding: 20px; border-left: 6px solid #f43f5e; border-radius: 15px; font-weight: 500; box-shadow: 0 8px 25px rgba(0,0,0,0.08); }\r\n\r\n.label { display:block; font-size:0.875rem; font-weight:500; color:#374151; margin-bottom:6px; }\r\n.input-field { width:100%; padding:10px 12px; border:1px solid #d1d5db; border-radius:8px; outline:none; transition:0.2s; }\r\n.input-field:focus { border-color:#4f46e5; box-shadow:0 0 0 2px rgba(79,70,229,0.2); }\r\n\r\n.family-members h3 { font-weight:600; margin-bottom:8px; color:#111827; }\r\n.member-card { display:grid; grid-template-columns:1fr 1fr 1fr auto; gap:8px; padding:10px; background:#f3f4f6; border-radius:8px; }\r\n.member-input { width:100%; padding:8px; border:1px solid #d1d5db; border-radius:6px; outline:none; transition:0.2s; }\r\n.member-input:focus { border-color:#4f46e5; box-shadow:0 0 0 2px rgba(79,70,229,0.2); }\r\n.remove-btn { background:#dc2626; color:#fff; border:none; border-radius:6px; font-weight:500; cursor:pointer; transition:0.2s; }\r\n.remove-btn:hover { background:#b91c1c; }\r\n.add-btn { background:#16a34a; color:#fff; padding:10px 16px; border-radius:8px; font-weight:500; cursor:pointer; transition:0.2s; }\r\n.add-btn:hover { background:#15803d; }\r\n\r\n.form-actions { display:flex; justify-content:end; gap:12px; margin-top:16px; }\r\n.cancel-btn { padding:10px 16px; border:1px solid #d1d5db; border-radius:8px; font-weight:500; color:#374151; text-align:center; }\r\n.cancel-btn:hover { background:#f9fafb; }\r\n.submit-btn { background:#4f46e5; color:#fff; padding:10px 16px; border-radius:8px; font-weight:500; transition:0.2s; }\r\n.submit-btn:hover { background:#4338ca; }\r\n.submit-btn:disabled { opacity:0.6; cursor:not-allowed; }\r\n\r\n.error-text { color:#b91c1c; font-size:0.875rem; margin-top:4px; }\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}