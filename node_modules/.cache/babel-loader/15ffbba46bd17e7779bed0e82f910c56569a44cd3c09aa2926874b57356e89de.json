{"ast":null,"code":"import { ref, onMounted } from 'vue';\nimport EvacuationAreaService from '@/services/EvacuationAreaService.js';\nexport default {\n  __name: 'EvacuationAreaList',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const areas = ref([]);\n    const loading = ref(false);\n    const deleting = ref(false);\n    const successMessage = ref('');\n    const errorMessage = ref('');\n\n    /**\r\n     * Fetch all evacuation areas from API\r\n     */\n    const fetchAreas = async () => {\n      loading.value = true;\n      errorMessage.value = '';\n      try {\n        areas.value = await EvacuationAreaService.getAll();\n      } catch (error) {\n        errorMessage.value = error.response?.data?.message || 'Failed to fetch evacuation areas';\n        console.error('Error fetching areas:', error);\n      } finally {\n        loading.value = false;\n      }\n    };\n\n    /**\r\n     * Delete evacuation area with confirmation\r\n     */\n    const deleteArea = async id => {\n      if (!confirm('Are you sure? This cannot be undone.')) return;\n      deleting.value = true;\n      try {\n        await EvacuationAreaService.delete(id);\n        successMessage.value = 'Evacuation area deleted successfully';\n        await fetchAreas();\n      } catch (error) {\n        errorMessage.value = error.response?.data?.message || 'Failed to delete evacuation area';\n        console.error('Error deleting area:', error);\n      } finally {\n        deleting.value = false;\n      }\n    };\n\n    /**\r\n     * Get status badge CSS class\r\n     */\n    const getStatusBadgeClass = status => {\n      const classes = {\n        available: 'bg-success',\n        full: 'bg-danger',\n        closed: 'bg-dark',\n        maintenance: 'bg-warning text-dark'\n      };\n      return classes[status] || 'bg-secondary';\n    };\n\n    /**\r\n     * Get occupancy percentage\r\n     */\n    const getOccupancyPercent = area => {\n      if (area.capacity === 0) return 0;\n      return Math.round(area.current_occupancy / area.capacity * 100);\n    };\n\n    /**\r\n     * Get occupancy progress bar color class\r\n     */\n    const getOccupancyClass = area => {\n      const percent = getOccupancyPercent(area);\n      if (percent >= 90) return 'bg-danger';\n      if (percent >= 70) return 'bg-warning';\n      return 'bg-success';\n    };\n\n    /**\r\n     * Format date for display\r\n     */\n    const formatDate = dateString => {\n      if (!dateString) return 'N/A';\n      const date = new Date(dateString);\n      return date.toLocaleDateString('en-US', {\n        year: 'numeric',\n        month: 'short',\n        day: 'numeric',\n        hour: '2-digit',\n        minute: '2-digit'\n      });\n    };\n\n    // Load areas on component mount\n    onMounted(() => {\n      fetchAreas();\n    });\n    const __returned__ = {\n      areas,\n      loading,\n      deleting,\n      successMessage,\n      errorMessage,\n      fetchAreas,\n      deleteArea,\n      getStatusBadgeClass,\n      getOccupancyPercent,\n      getOccupancyClass,\n      formatDate,\n      ref,\n      onMounted,\n      get EvacuationAreaService() {\n        return EvacuationAreaService;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","EvacuationAreaService","areas","loading","deleting","successMessage","errorMessage","fetchAreas","value","getAll","error","response","data","message","console","deleteArea","id","confirm","delete","getStatusBadgeClass","status","classes","available","full","closed","maintenance","getOccupancyPercent","area","capacity","Math","round","current_occupancy","getOccupancyClass","percent","formatDate","dateString","date","Date","toLocaleDateString","year","month","day","hour","minute"],"sources":["C:/VUEprojects/crud-app/src/pages/EvacuationAreaList.vue"],"sourcesContent":["<template>\r\n  <div class=\"content-wrapper px-3 pt-4\">\r\n    <!-- Header Row -->\r\n    <div class=\"d-flex justify-content-between align-items-center mb-4\">\r\n      <h1 class=\"mb-0\">üó∫Ô∏è Evacuation Areas</h1>\r\n      <router-link to=\"/evacuation-areas/create\" class=\"btn btn-primary d-flex align-items-center gap-2\">\r\n        <i class=\"bi bi-plus-circle\"></i> Add Area\r\n      </router-link>\r\n    </div>\r\n\r\n    <!-- Alert Messages -->\r\n    <div v-if=\"successMessage\" class=\"alert alert-success alert-dismissible fade show\" role=\"alert\">\r\n      {{ successMessage }}\r\n      <button type=\"button\" class=\"btn-close\" @click=\"successMessage = ''\" aria-label=\"Close\"></button>\r\n    </div>\r\n\r\n    <div v-if=\"errorMessage\" class=\"alert alert-danger alert-dismissible fade show\" role=\"alert\">\r\n      {{ errorMessage }}\r\n      <button type=\"button\" class=\"btn-close\" @click=\"errorMessage = ''\" aria-label=\"Close\"></button>\r\n    </div>\r\n\r\n    <!-- Loading State -->\r\n    <div v-if=\"loading\" class=\"text-center py-5\">\r\n      <div class=\"spinner-border text-primary\" role=\"status\">\r\n        <span class=\"visually-hidden\">Loading...</span>\r\n      </div>\r\n      <p class=\"mt-3 text-muted\">Loading evacuation areas...</p>\r\n    </div>\r\n\r\n    <!-- Areas Grid -->\r\n    <div v-else-if=\"areas.length > 0\" class=\"row g-4\">\r\n      <div v-for=\"area in areas\" :key=\"area.id\" class=\"col-md-6 col-lg-4\">\r\n        <div class=\"card h-100 shadow-sm area-card\">\r\n          <!-- Header with status badge -->\r\n          <div class=\"card-header d-flex justify-content-between align-items-center\">\r\n            <h5 class=\"mb-0\">{{ area.name }}</h5>\r\n            <span :class=\"['badge', getStatusBadgeClass(area.status)]\">\r\n              {{ area.status }}\r\n            </span>\r\n          </div>\r\n\r\n          <div class=\"card-body\">\r\n            <!-- Address -->\r\n            <p class=\"text-muted small mb-3\">\r\n              <i class=\"bi bi-geo-alt-fill\"></i> {{ area.address }}\r\n            </p>\r\n\r\n            <!-- Coordinates -->\r\n            <div class=\"small mb-3\">\r\n              <strong>Location:</strong> {{ area.latitude.toFixed(4) }}, {{ area.longitude.toFixed(4) }}\r\n            </div>\r\n\r\n            <!-- Capacity Info -->\r\n            <div class=\"mb-3\">\r\n              <div class=\"d-flex justify-content-between mb-2\">\r\n                <strong>Capacity</strong>\r\n                <span class=\"badge bg-info\">{{ area.current_occupancy }} / {{ area.capacity }}</span>\r\n              </div>\r\n              <div class=\"progress\" style=\"height: 20px;\">\r\n                <div\r\n                  class=\"progress-bar\"\r\n                  :class=\"getOccupancyClass(area)\"\r\n                  :style=\"{ width: getOccupancyPercent(area) + '%' }\"\r\n                  role=\"progressbar\"\r\n                >\r\n                  {{ getOccupancyPercent(area) }}%\r\n                </div>\r\n              </div>\r\n              <small class=\"text-muted d-block mt-1\">\r\n                Available: {{ area.available_space || (area.capacity - area.current_occupancy) }} people\r\n              </small>\r\n            </div>\r\n\r\n            <!-- Contact Info -->\r\n            <div class=\"mb-3 p-2 bg-light rounded\">\r\n              <small>\r\n                <strong>Contact:</strong>\r\n                <br />\r\n                {{ area.contact_number || 'N/A' }}\r\n              </small>\r\n            </div>\r\n\r\n            <!-- Facilities -->\r\n            <div v-if=\"area.facilities\" class=\"mb-3\">\r\n              <small><strong>Facilities:</strong> {{ area.facilities }}</small>\r\n            </div>\r\n\r\n            <!-- Action Buttons -->\r\n            <div class=\"d-flex gap-2\">\r\n              <router-link :to=\"`/evacuation-areas/${area.id}`\" class=\"btn btn-sm btn-info flex-grow-1\">\r\n                <i class=\"bi bi-eye\"></i> View\r\n              </router-link>\r\n              <router-link :to=\"`/evacuation-areas/${area.id}/edit`\" class=\"btn btn-sm btn-warning flex-grow-1\">\r\n                <i class=\"bi bi-pencil\"></i> Edit\r\n              </router-link>\r\n              <button @click=\"deleteArea(area.id)\" class=\"btn btn-sm btn-danger\" :disabled=\"deleting\">\r\n                <i class=\"bi bi-trash\"></i>\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Card footer with timestamp -->\r\n          <div class=\"card-footer bg-light text-muted small\">\r\n            Updated: {{ formatDate(area.updated_at) }}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Empty State -->\r\n    <div v-else class=\"alert alert-info text-center py-5\">\r\n      <i class=\"bi bi-inbox\" style=\"font-size: 3rem; opacity: 0.5;\"></i>\r\n      <p class=\"mt-3 mb-0\">No evacuation areas found. <router-link to=\"/evacuation-areas/create\">Create one</router-link></p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport EvacuationAreaService from '@/services/EvacuationAreaService.js';\r\n\r\nconst areas = ref([]);\r\nconst loading = ref(false);\r\nconst deleting = ref(false);\r\nconst successMessage = ref('');\r\nconst errorMessage = ref('');\r\n\r\n/**\r\n * Fetch all evacuation areas from API\r\n */\r\nconst fetchAreas = async () => {\r\n  loading.value = true;\r\n  errorMessage.value = '';\r\n  try {\r\n    areas.value = await EvacuationAreaService.getAll();\r\n  } catch (error) {\r\n    errorMessage.value = error.response?.data?.message || 'Failed to fetch evacuation areas';\r\n    console.error('Error fetching areas:', error);\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n};\r\n\r\n/**\r\n * Delete evacuation area with confirmation\r\n */\r\nconst deleteArea = async (id) => {\r\n  if (!confirm('Are you sure? This cannot be undone.')) return;\r\n\r\n  deleting.value = true;\r\n  try {\r\n    await EvacuationAreaService.delete(id);\r\n    successMessage.value = 'Evacuation area deleted successfully';\r\n    await fetchAreas();\r\n  } catch (error) {\r\n    errorMessage.value = error.response?.data?.message || 'Failed to delete evacuation area';\r\n    console.error('Error deleting area:', error);\r\n  } finally {\r\n    deleting.value = false;\r\n  }\r\n};\r\n\r\n/**\r\n * Get status badge CSS class\r\n */\r\nconst getStatusBadgeClass = (status) => {\r\n  const classes = {\r\n    available: 'bg-success',\r\n    full: 'bg-danger',\r\n    closed: 'bg-dark',\r\n    maintenance: 'bg-warning text-dark',\r\n  };\r\n  return classes[status] || 'bg-secondary';\r\n};\r\n\r\n/**\r\n * Get occupancy percentage\r\n */\r\nconst getOccupancyPercent = (area) => {\r\n  if (area.capacity === 0) return 0;\r\n  return Math.round((area.current_occupancy / area.capacity) * 100);\r\n};\r\n\r\n/**\r\n * Get occupancy progress bar color class\r\n */\r\nconst getOccupancyClass = (area) => {\r\n  const percent = getOccupancyPercent(area);\r\n  if (percent >= 90) return 'bg-danger';\r\n  if (percent >= 70) return 'bg-warning';\r\n  return 'bg-success';\r\n};\r\n\r\n/**\r\n * Format date for display\r\n */\r\nconst formatDate = (dateString) => {\r\n  if (!dateString) return 'N/A';\r\n  const date = new Date(dateString);\r\n  return date.toLocaleDateString('en-US', {\r\n    year: 'numeric',\r\n    month: 'short',\r\n    day: 'numeric',\r\n    hour: '2-digit',\r\n    minute: '2-digit',\r\n  });\r\n};\r\n\r\n// Load areas on component mount\r\nonMounted(() => {\r\n  fetchAreas();\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.content-wrapper {\r\n  width: 100%;\r\n}\r\n\r\n.area-card {\r\n  transition: all 0.3s ease;\r\n  border: 1px solid #dee2e6;\r\n}\r\n\r\n.area-card:hover {\r\n  transform: translateY(-5px);\r\n  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12) !important;\r\n}\r\n\r\n.progress {\r\n  background-color: #e9ecef;\r\n}\r\n\r\n.btn:disabled {\r\n  opacity: 0.6;\r\n  cursor: not-allowed;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}