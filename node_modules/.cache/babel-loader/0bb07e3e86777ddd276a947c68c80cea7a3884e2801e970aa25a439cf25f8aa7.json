{"ast":null,"code":"import { withAsyncContext as _withAsyncContext } from 'vue';\nimport { ref, onMounted, inject } from 'vue';\nexport default {\n  __name: 'EvacuationAreaList',\n  async setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    let __temp, __restore;\n    const residentAxios = inject('residentAxios', null);\n    const axiosFallback = ([__temp, __restore] = _withAsyncContext(() => import('axios')), __temp = await __temp, __restore(), __temp).default;\n    const areas = ref([]);\n    const loading = ref(true);\n    const error = ref(null);\n    async function fetchAreas() {\n      loading.value = true;\n      error.value = null;\n      try {\n        const http = residentAxios || axiosFallback;\n        const res = await http.get('/evacuation-areas');\n        areas.value = res.data || [];\n      } catch (e) {\n        console.error(e);\n        error.value = e.response?.data?.message || e.message || 'Failed to load evacuation areas';\n      } finally {\n        loading.value = false;\n      }\n    }\n    onMounted(fetchAreas);\n    const __returned__ = {\n      residentAxios,\n      axiosFallback,\n      areas,\n      loading,\n      error,\n      fetchAreas,\n      ref,\n      onMounted,\n      inject\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","inject","residentAxios","axiosFallback","__temp","__restore","_withAsyncContext","default","areas","loading","error","fetchAreas","value","http","res","get","data","e","console","response","message"],"sources":["C:/VUEprojects/crud-app/src/pages/resident_pages/EvacuationAreaList.vue"],"sourcesContent":["<template>\r\n  <div class=\"evac-list\">\r\n    <h1>Evacuation Areas</h1>\r\n    <p class=\"subtitle\">All evacuation areas — live data from System‑E</p>\r\n\r\n    <div v-if=\"loading\" class=\"center\">Loading evacuation areas…</div>\r\n    <div v-else-if=\"error\" class=\"center error\">{{ error }}</div>\r\n\r\n    <div class=\"grid\">\r\n      <article v-for=\"area in areas\" :key=\"area.id\" class=\"card area-card\">\r\n        <div class=\"card-body\">\r\n          <h3 class=\"area-name\">{{ area.name }}</h3>\r\n          <p class=\"area-address\">{{ area.address }}</p>\r\n          <div class=\"meta\">\r\n            <span>Lat: {{ area.latitude }}</span>\r\n            <span>Lng: {{ area.longitude }}</span>\r\n          </div>\r\n          <div class=\"meta\">\r\n            <span>Capacity: {{ area.capacity ?? '—' }}</span>\r\n            <span>Occupancy: {{ area.current_occupancy ?? 0 }}</span>\r\n          </div>\r\n          <div class=\"meta\">\r\n            <span>Status: <strong>{{ area.status ?? 'unknown' }}</strong></span>\r\n            <span>Score: {{ area.final_score ?? '—' }}</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"card-footer\">\r\n          <router-link :to=\"`/resident_pages/evacuation-areas/${area.id}`\" class=\"btn btn-primary\">View Details</router-link>\r\n        </div>\r\n      </article>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, inject } from 'vue';\r\nconst residentAxios = inject('residentAxios', null);\r\nconst axiosFallback = (await import('axios')).default;\r\n\r\nconst areas = ref([]);\r\nconst loading = ref(true);\r\nconst error = ref(null);\r\n\r\nasync function fetchAreas() {\r\n  loading.value = true;\r\n  error.value = null;\r\n  try {\r\n    const http = residentAxios || axiosFallback;\r\n    const res = await http.get('/evacuation-areas');\r\n    areas.value = res.data || [];\r\n  } catch (e) {\r\n    console.error(e);\r\n    error.value = e.response?.data?.message || e.message || 'Failed to load evacuation areas';\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n}\r\n\r\nonMounted(fetchAreas);\r\n</script>\r\n\r\n<style scoped>\r\n.evac-list { padding: 1rem; max-width: 1100px; margin: 0 auto; }\r\n.subtitle { color: #666; margin-bottom: 1rem; }\r\n.center { text-align: center; padding: 1rem; }\r\n.grid { display: grid; grid-template-columns: repeat(auto-fill,minmax(260px,1fr)); gap: 1rem; }\r\n.area-card { display:flex; flex-direction:column; justify-content:space-between; padding: 0; height: 220px; }\r\n.card { background: #fff; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.06); padding: 0; }\r\n.card-body { padding: 12px; }\r\n.area-name { margin: 0 0 6px 0; }\r\n.area-address { color: #666; margin: 0 0 8px 0; font-size: 0.95rem; }\r\n.meta { display:flex; gap: 0.75rem; font-size: 0.9rem; color:#444; margin-bottom:6px; }\r\n.card-footer { padding: 12px; border-top: 1px solid #f0f0f0; display:flex; justify-content:flex-end; }\r\n.btn { padding: 0.5rem 0.9rem; border-radius:6px; text-decoration:none; color:#fff; background:#667eea; }\r\n.btn-primary { background:#667eea; }\r\n</style>\r\n"],"mappings":";AAmCA,SAASA,GAAG,EAAEC,SAAS,EAAEC,MAAM,QAAQ,KAAK;;;;;;;;IAC5C,MAAMC,aAAa,GAAGD,MAAM,CAAC,eAAe,EAAE,IAAI,CAAC;IACnD,MAAME,aAAa,GAAG,CAAC,CAAAC,MAAA,EAAAC,SAAA,IAAAC,iBAAA,OAAM,MAAM,CAAC,OAAO,I,4CAAGC,OAAO;IAErD,MAAMC,KAAK,GAAGT,GAAG,CAAC,EAAE,CAAC;IACrB,MAAMU,OAAO,GAAGV,GAAG,CAAC,IAAI,CAAC;IACzB,MAAMW,KAAK,GAAGX,GAAG,CAAC,IAAI,CAAC;IAEvB,eAAeY,UAAUA,CAAA,EAAG;MAC1BF,OAAO,CAACG,KAAK,GAAG,IAAI;MACpBF,KAAK,CAACE,KAAK,GAAG,IAAI;MAClB,IAAI;QACF,MAAMC,IAAI,GAAGX,aAAa,IAAIC,aAAa;QAC3C,MAAMW,GAAG,GAAG,MAAMD,IAAI,CAACE,GAAG,CAAC,mBAAmB,CAAC;QAC/CP,KAAK,CAACI,KAAK,GAAGE,GAAG,CAACE,IAAI,IAAI,EAAE;MAC9B,CAAC,CAAC,OAAOC,CAAC,EAAE;QACVC,OAAO,CAACR,KAAK,CAACO,CAAC,CAAC;QAChBP,KAAK,CAACE,KAAK,GAAGK,CAAC,CAACE,QAAQ,EAAEH,IAAI,EAAEI,OAAO,IAAIH,CAAC,CAACG,OAAO,IAAI,iCAAiC;MAC3F,CAAC,SAAS;QACRX,OAAO,CAACG,KAAK,GAAG,KAAK;MACvB;IACF;IAEAZ,SAAS,CAACW,UAAU,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}