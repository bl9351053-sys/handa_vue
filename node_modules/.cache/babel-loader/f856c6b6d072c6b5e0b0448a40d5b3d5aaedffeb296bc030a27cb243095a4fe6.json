{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, toDisplayString as _toDisplayString, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, vModelSelect as _vModelSelect, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"min-h-screen bg-gray-100 p-6\"\n};\nconst _hoisted_2 = {\n  class: \"max-w-4xl mx-auto\"\n};\nconst _hoisted_3 = {\n  class: \"mb-8 flex items-center justify-between\"\n};\nconst _hoisted_4 = {\n  class: \"bg-white rounded-lg shadow-lg p-8\"\n};\nconst _hoisted_5 = {\n  key: 0,\n  class: \"mb-6 bg-red-50 border-l-4 border-red-500 text-red-800 px-6 py-4 rounded\"\n};\nconst _hoisted_6 = {\n  class: \"text-sm\"\n};\nconst _hoisted_7 = {\n  class: \"grid grid-cols-1 md:grid-cols-2 gap-6\"\n};\nconst _hoisted_8 = {\n  key: 0,\n  class: \"text-red-600 text-sm mt-1\"\n};\nconst _hoisted_9 = {\n  key: 0,\n  class: \"text-red-600 text-sm mt-1\"\n};\nconst _hoisted_10 = {\n  key: 0,\n  class: \"text-red-600 text-sm mt-1\"\n};\nconst _hoisted_11 = {\n  class: \"grid grid-cols-1 md:grid-cols-3 gap-6\"\n};\nconst _hoisted_12 = {\n  key: 0,\n  class: \"text-red-600 text-sm mt-1\"\n};\nconst _hoisted_13 = [\"value\"];\nconst _hoisted_14 = {\n  key: 0,\n  class: \"text-red-600 text-sm mt-1\"\n};\nconst _hoisted_15 = {\n  key: 0,\n  class: \"text-red-600 text-sm mt-1\"\n};\nconst _hoisted_16 = {\n  key: 0,\n  class: \"text-red-600 text-sm mt-1\"\n};\nconst _hoisted_17 = {\n  class: \"border-t pt-6\"\n};\nconst _hoisted_18 = {\n  id: \"members-wrapper\",\n  class: \"space-y-3 mb-4\"\n};\nconst _hoisted_19 = [\"onUpdate:modelValue\"];\nconst _hoisted_20 = [\"onUpdate:modelValue\"];\nconst _hoisted_21 = [\"onUpdate:modelValue\"];\nconst _hoisted_22 = [\"onClick\"];\nconst _hoisted_23 = {\n  class: \"flex justify-end gap-3 pt-6 border-t\"\n};\nconst _hoisted_24 = [\"disabled\"];\nconst _hoisted_25 = {\n  key: 0\n};\nconst _hoisted_26 = {\n  key: 1\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createCommentVNode(\" Header \"), _createElementVNode(\"div\", _hoisted_3, [_cache[8] || (_cache[8] = _createElementVNode(\"div\", null, [_createElementVNode(\"h1\", {\n    class: \"text-4xl font-bold text-gray-900\"\n  }, \"Add Family\"), _createElementVNode(\"p\", {\n    class: \"text-gray-600 mt-1\"\n  }, \"Create a new family record\")], -1 /* CACHED */)), _createVNode(_component_router_link, {\n    to: \"/families\",\n    class: \"text-indigo-600 hover:text-indigo-900 font-medium flex items-center gap-1\"\n  }, {\n    default: _withCtx(() => [...(_cache[7] || (_cache[7] = [_createElementVNode(\"svg\", {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      class: \"h-4 w-4\",\n      fill: \"none\",\n      viewBox: \"0 0 24 24\",\n      stroke: \"currentColor\"\n    }, [_createElementVNode(\"path\", {\n      \"stroke-linecap\": \"round\",\n      \"stroke-linejoin\": \"round\",\n      \"stroke-width\": \"2\",\n      d: \"M15 19l-7-7 7-7\"\n    })], -1 /* CACHED */), _createTextVNode(\" Back to Families \", -1 /* CACHED */)]))]),\n    _: 1 /* STABLE */\n  })]), _createCommentVNode(\" Form Card \"), _createElementVNode(\"div\", _hoisted_4, [_createCommentVNode(\" Error Messages \"), $setup.generalError ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [_createElementVNode(\"p\", _hoisted_6, _toDisplayString($setup.generalError), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"form\", {\n    onSubmit: _withModifiers($setup.submit, [\"prevent\"]),\n    class: \"space-y-6\"\n  }, [_createCommentVNode(\" Row 1: Family Head Name & Contact \"), _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"div\", null, [_cache[9] || (_cache[9] = _createElementVNode(\"label\", {\n    class: \"block text-sm font-medium text-gray-700 mb-2\"\n  }, [_createTextVNode(\"Family Head Name \"), _createElementVNode(\"span\", {\n    class: \"text-red-500\"\n  }, \"*\")], -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.form.family_head_name = $event),\n    type: \"text\",\n    required: \"\",\n    class: \"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.form.family_head_name]]), $setup.errors.family_head_name ? (_openBlock(), _createElementBlock(\"p\", _hoisted_8, _toDisplayString($setup.errors.family_head_name), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", null, [_cache[10] || (_cache[10] = _createElementVNode(\"label\", {\n    class: \"block text-sm font-medium text-gray-700 mb-2\"\n  }, \"Contact Number\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.form.contact_number = $event),\n    type: \"text\",\n    class: \"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.form.contact_number]]), $setup.errors.contact_number ? (_openBlock(), _createElementBlock(\"p\", _hoisted_9, _toDisplayString($setup.errors.contact_number), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)])]), _createCommentVNode(\" Address \"), _createElementVNode(\"div\", null, [_cache[11] || (_cache[11] = _createElementVNode(\"label\", {\n    class: \"block text-sm font-medium text-gray-700 mb-2\"\n  }, [_createTextVNode(\"Address \"), _createElementVNode(\"span\", {\n    class: \"text-red-500\"\n  }, \"*\")], -1 /* CACHED */)), _withDirectives(_createElementVNode(\"textarea\", {\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.form.address = $event),\n    required: \"\",\n    rows: \"3\",\n    class: \"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.form.address]]), $setup.errors.address ? (_openBlock(), _createElementBlock(\"p\", _hoisted_10, _toDisplayString($setup.errors.address), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createCommentVNode(\" Row 2: Total Members, Evacuation Area, Status \"), _createElementVNode(\"div\", _hoisted_11, [_createElementVNode(\"div\", null, [_cache[12] || (_cache[12] = _createElementVNode(\"label\", {\n    class: \"block text-sm font-medium text-gray-700 mb-2\"\n  }, [_createTextVNode(\"Total Members \"), _createElementVNode(\"span\", {\n    class: \"text-red-500\"\n  }, \"*\")], -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.form.total_members = $event),\n    type: \"number\",\n    required: \"\",\n    min: \"1\",\n    class: \"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.form.total_members, void 0, {\n    number: true\n  }]]), $setup.errors.total_members ? (_openBlock(), _createElementBlock(\"p\", _hoisted_12, _toDisplayString($setup.errors.total_members), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", null, [_cache[14] || (_cache[14] = _createElementVNode(\"label\", {\n    class: \"block text-sm font-medium text-gray-700 mb-2\"\n  }, \"Evacuation Area\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $setup.form.evacuation_area_id = $event),\n    class: \"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\n  }, [_cache[13] || (_cache[13] = _createElementVNode(\"option\", {\n    value: \"\"\n  }, \"Not assigned\", -1 /* CACHED */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.evacuationAreas, area => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      key: area.id,\n      value: area.id\n    }, _toDisplayString(area.name), 9 /* TEXT, PROPS */, _hoisted_13);\n  }), 128 /* KEYED_FRAGMENT */))], 512 /* NEED_PATCH */), [[_vModelSelect, $setup.form.evacuation_area_id]]), $setup.errors.evacuation_area_id ? (_openBlock(), _createElementBlock(\"p\", _hoisted_14, _toDisplayString($setup.errors.evacuation_area_id), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", null, [_cache[16] || (_cache[16] = _createElementVNode(\"label\", {\n    class: \"block text-sm font-medium text-gray-700 mb-2\"\n  }, [_createTextVNode(\"Status \"), _createElementVNode(\"span\", {\n    class: \"text-red-500\"\n  }, \"*\")], -1 /* CACHED */)), _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $setup.form.status = $event),\n    required: \"\",\n    class: \"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\n  }, [...(_cache[15] || (_cache[15] = [_createElementVNode(\"option\", {\n    value: \"pending\"\n  }, \"Pending\", -1 /* CACHED */), _createElementVNode(\"option\", {\n    value: \"evacuated\"\n  }, \"Evacuated\", -1 /* CACHED */), _createElementVNode(\"option\", {\n    value: \"returned\"\n  }, \"Returned\", -1 /* CACHED */)]))], 512 /* NEED_PATCH */), [[_vModelSelect, $setup.form.status]]), $setup.errors.status ? (_openBlock(), _createElementBlock(\"p\", _hoisted_15, _toDisplayString($setup.errors.status), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)])]), _createCommentVNode(\" Special Needs \"), _createElementVNode(\"div\", null, [_cache[17] || (_cache[17] = _createElementVNode(\"label\", {\n    class: \"block text-sm font-medium text-gray-700 mb-2\"\n  }, \"Special Needs\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"textarea\", {\n    \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => $setup.form.special_needs = $event),\n    rows: \"2\",\n    placeholder: \"e.g., Elderly members, Pregnant women, Persons with disabilities\",\n    class: \"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.form.special_needs]]), $setup.errors.special_needs ? (_openBlock(), _createElementBlock(\"p\", _hoisted_16, _toDisplayString($setup.errors.special_needs), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createCommentVNode(\" Family Members Section \"), _createElementVNode(\"div\", _hoisted_17, [_cache[19] || (_cache[19] = _createElementVNode(\"h3\", {\n    class: \"text-lg font-bold text-gray-900 mb-4\"\n  }, \"Family Members (Optional)\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_18, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.form.members, (member, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: index,\n      class: \"grid grid-cols-1 md:grid-cols-4 gap-3 p-4 bg-gray-50 rounded-lg\"\n    }, [_createElementVNode(\"div\", null, [_withDirectives(_createElementVNode(\"input\", {\n      \"onUpdate:modelValue\": $event => member.name = $event,\n      type: \"text\",\n      placeholder: \"Name\",\n      required: \"\",\n      class: \"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\n    }, null, 8 /* PROPS */, _hoisted_19), [[_vModelText, member.name]])]), _createElementVNode(\"div\", null, [_withDirectives(_createElementVNode(\"input\", {\n      \"onUpdate:modelValue\": $event => member.age = $event,\n      type: \"number\",\n      placeholder: \"Age\",\n      min: \"0\",\n      class: \"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\n    }, null, 8 /* PROPS */, _hoisted_20), [[_vModelText, member.age, void 0, {\n      number: true\n    }]])]), _createElementVNode(\"div\", null, [_withDirectives(_createElementVNode(\"select\", {\n      \"onUpdate:modelValue\": $event => member.gender = $event,\n      class: \"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\n    }, [...(_cache[18] || (_cache[18] = [_createElementVNode(\"option\", {\n      value: \"\"\n    }, \"Gender\", -1 /* CACHED */), _createElementVNode(\"option\", {\n      value: \"male\"\n    }, \"Male\", -1 /* CACHED */), _createElementVNode(\"option\", {\n      value: \"female\"\n    }, \"Female\", -1 /* CACHED */)]))], 8 /* PROPS */, _hoisted_21), [[_vModelSelect, member.gender]])]), _createElementVNode(\"div\", null, [_createElementVNode(\"button\", {\n      type: \"button\",\n      onClick: $event => $setup.removeMember(index),\n      class: \"w-full px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 font-medium\"\n    }, \" Remove \", 8 /* PROPS */, _hoisted_22)])]);\n  }), 128 /* KEYED_FRAGMENT */))]), _createElementVNode(\"button\", {\n    type: \"button\",\n    onClick: $setup.addMember,\n    class: \"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium\"\n  }, \" + Add Member \"), _cache[20] || (_cache[20] = _createElementVNode(\"p\", {\n    class: \"text-sm text-gray-500 mt-2\"\n  }, \"You can leave members blank if you want to add them later.\", -1 /* CACHED */))]), _createCommentVNode(\" Actions \"), _createElementVNode(\"div\", _hoisted_23, [_createVNode(_component_router_link, {\n    to: \"/families\",\n    class: \"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 font-medium\"\n  }, {\n    default: _withCtx(() => [...(_cache[21] || (_cache[21] = [_createTextVNode(\" Cancel \", -1 /* CACHED */)]))]),\n    _: 1 /* STABLE */\n  }), _createElementVNode(\"button\", {\n    type: \"submit\",\n    disabled: $setup.submitting,\n    class: \"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium disabled:opacity-60\"\n  }, [!$setup.submitting ? (_openBlock(), _createElementBlock(\"span\", _hoisted_25, \"Create Family\")) : (_openBlock(), _createElementBlock(\"span\", _hoisted_26, \"Creating...\"))], 8 /* PROPS */, _hoisted_24)])], 32 /* NEED_HYDRATION */)])])]);\n}","map":{"version":3,"names":["class","id","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createCommentVNode","_hoisted_3","_createVNode","_component_router_link","to","_cache","xmlns","fill","viewBox","stroke","d","_hoisted_4","$setup","generalError","_hoisted_5","_hoisted_6","_toDisplayString","onSubmit","_withModifiers","submit","_hoisted_7","form","family_head_name","$event","type","required","errors","_hoisted_8","contact_number","_hoisted_9","address","rows","_hoisted_10","_hoisted_11","total_members","min","number","_hoisted_12","evacuation_area_id","value","_Fragment","_renderList","evacuationAreas","area","key","name","_hoisted_13","_hoisted_14","status","_hoisted_15","special_needs","placeholder","_hoisted_16","_hoisted_17","_hoisted_18","members","member","index","age","gender","onClick","removeMember","_hoisted_22","addMember","_hoisted_23","disabled","submitting","_hoisted_25","_hoisted_26"],"sources":["C:\\VUEprojects\\crud-app\\src\\pages\\FamilyCreate.vue"],"sourcesContent":["<template>\r\n  <div class=\"min-h-screen bg-gray-100 p-6\">\r\n    <div class=\"max-w-4xl mx-auto\">\r\n      <!-- Header -->\r\n      <div class=\"mb-8 flex items-center justify-between\">\r\n        <div>\r\n          <h1 class=\"text-4xl font-bold text-gray-900\">Add Family</h1>\r\n          <p class=\"text-gray-600 mt-1\">Create a new family record</p>\r\n        </div>\r\n        <router-link to=\"/families\" class=\"text-indigo-600 hover:text-indigo-900 font-medium flex items-center gap-1\">\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 19l-7-7 7-7\" />\r\n          </svg>\r\n          Back to Families\r\n        </router-link>\r\n      </div>\r\n\r\n      <!-- Form Card -->\r\n      <div class=\"bg-white rounded-lg shadow-lg p-8\">\r\n        <!-- Error Messages -->\r\n        <div v-if=\"generalError\" class=\"mb-6 bg-red-50 border-l-4 border-red-500 text-red-800 px-6 py-4 rounded\">\r\n          <p class=\"text-sm\">{{ generalError }}</p>\r\n        </div>\r\n\r\n        <form @submit.prevent=\"submit\" class=\"space-y-6\">\r\n          <!-- Row 1: Family Head Name & Contact -->\r\n          <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n            <div>\r\n              <label class=\"block text-sm font-medium text-gray-700 mb-2\">Family Head Name <span class=\"text-red-500\">*</span></label>\r\n              <input v-model=\"form.family_head_name\" type=\"text\" required\r\n                class=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\" />\r\n              <p v-if=\"errors.family_head_name\" class=\"text-red-600 text-sm mt-1\">{{ errors.family_head_name }}</p>\r\n            </div>\r\n\r\n            <div>\r\n              <label class=\"block text-sm font-medium text-gray-700 mb-2\">Contact Number</label>\r\n              <input v-model=\"form.contact_number\" type=\"text\"\r\n                class=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\" />\r\n              <p v-if=\"errors.contact_number\" class=\"text-red-600 text-sm mt-1\">{{ errors.contact_number }}</p>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Address -->\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-gray-700 mb-2\">Address <span class=\"text-red-500\">*</span></label>\r\n            <textarea v-model=\"form.address\" required rows=\"3\"\r\n              class=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"></textarea>\r\n            <p v-if=\"errors.address\" class=\"text-red-600 text-sm mt-1\">{{ errors.address }}</p>\r\n          </div>\r\n\r\n          <!-- Row 2: Total Members, Evacuation Area, Status -->\r\n          <div class=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n            <div>\r\n              <label class=\"block text-sm font-medium text-gray-700 mb-2\">Total Members <span class=\"text-red-500\">*</span></label>\r\n              <input v-model.number=\"form.total_members\" type=\"number\" required min=\"1\"\r\n                class=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\" />\r\n              <p v-if=\"errors.total_members\" class=\"text-red-600 text-sm mt-1\">{{ errors.total_members }}</p>\r\n            </div>\r\n\r\n            <div>\r\n              <label class=\"block text-sm font-medium text-gray-700 mb-2\">Evacuation Area</label>\r\n              <select v-model=\"form.evacuation_area_id\"\r\n                class=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\">\r\n                <option value=\"\">Not assigned</option>\r\n                <option v-for=\"area in evacuationAreas\" :key=\"area.id\" :value=\"area.id\">\r\n                  {{ area.name }}\r\n                </option>\r\n              </select>\r\n              <p v-if=\"errors.evacuation_area_id\" class=\"text-red-600 text-sm mt-1\">{{ errors.evacuation_area_id }}</p>\r\n            </div>\r\n\r\n            <div>\r\n              <label class=\"block text-sm font-medium text-gray-700 mb-2\">Status <span class=\"text-red-500\">*</span></label>\r\n              <select v-model=\"form.status\" required\r\n                class=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\">\r\n                <option value=\"pending\">Pending</option>\r\n                <option value=\"evacuated\">Evacuated</option>\r\n                <option value=\"returned\">Returned</option>\r\n              </select>\r\n              <p v-if=\"errors.status\" class=\"text-red-600 text-sm mt-1\">{{ errors.status }}</p>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Special Needs -->\r\n          <div>\r\n            <label class=\"block text-sm font-medium text-gray-700 mb-2\">Special Needs</label>\r\n            <textarea v-model=\"form.special_needs\" rows=\"2\" placeholder=\"e.g., Elderly members, Pregnant women, Persons with disabilities\"\r\n              class=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"></textarea>\r\n            <p v-if=\"errors.special_needs\" class=\"text-red-600 text-sm mt-1\">{{ errors.special_needs }}</p>\r\n          </div>\r\n\r\n          <!-- Family Members Section -->\r\n          <div class=\"border-t pt-6\">\r\n            <h3 class=\"text-lg font-bold text-gray-900 mb-4\">Family Members (Optional)</h3>\r\n            <div id=\"members-wrapper\" class=\"space-y-3 mb-4\">\r\n              <div v-for=\"(member, index) in form.members\" :key=\"index\" class=\"grid grid-cols-1 md:grid-cols-4 gap-3 p-4 bg-gray-50 rounded-lg\">\r\n                <div>\r\n                  <input v-model=\"member.name\" type=\"text\" placeholder=\"Name\" required\r\n                    class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\" />\r\n                </div>\r\n                <div>\r\n                  <input v-model.number=\"member.age\" type=\"number\" placeholder=\"Age\" min=\"0\"\r\n                    class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\" />\r\n                </div>\r\n                <div>\r\n                  <select v-model=\"member.gender\"\r\n                    class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\">\r\n                    <option value=\"\">Gender</option>\r\n                    <option value=\"male\">Male</option>\r\n                    <option value=\"female\">Female</option>\r\n                  </select>\r\n                </div>\r\n                <div>\r\n                  <button type=\"button\" @click=\"removeMember(index)\" class=\"w-full px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 font-medium\">\r\n                    Remove\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <button type=\"button\" @click=\"addMember\" class=\"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium\">\r\n              + Add Member\r\n            </button>\r\n            <p class=\"text-sm text-gray-500 mt-2\">You can leave members blank if you want to add them later.</p>\r\n          </div>\r\n\r\n          <!-- Actions -->\r\n          <div class=\"flex justify-end gap-3 pt-6 border-t\">\r\n            <router-link to=\"/families\" class=\"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 font-medium\">\r\n              Cancel\r\n            </router-link>\r\n            <button type=\"submit\" :disabled=\"submitting\" class=\"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium disabled:opacity-60\">\r\n              <span v-if=\"!submitting\">Create Family</span>\r\n              <span v-else>Creating...</span>\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { reactive, ref, inject, onMounted } from 'vue'\r\nimport axios from 'axios'\r\nimport { useRouter } from 'vue-router'\r\n\r\nconst router = useRouter()\r\nconst baseUrl = inject('baseUrl', '')\r\n\r\nconst form = reactive({\r\n  family_head_name: '',\r\n  contact_number: '',\r\n  address: '',\r\n  total_members: 1,\r\n  evacuation_area_id: '',\r\n  status: 'pending',\r\n  special_needs: '',\r\n  members: []\r\n})\r\n\r\nconst errors = reactive({})\r\nconst generalError = ref('')\r\nconst submitting = ref(false)\r\nconst evacuationAreas = ref([])\r\n\r\nonMounted(async () => {\r\n  await fetchEvacuationAreas()\r\n})\r\n\r\nasync function fetchEvacuationAreas() {\r\n  try {\r\n    const res = await axios.get(`${baseUrl}/evacuation-areas`)\r\n    evacuationAreas.value = res.data?.data || res.data || []\r\n  } catch (err) {\r\n    console.error('Failed to fetch evacuation areas:', err)\r\n  }\r\n}\r\n\r\nfunction addMember() {\r\n  form.members.push({ name: '', age: null, gender: '' })\r\n}\r\n\r\nfunction removeMember(index) {\r\n  form.members.splice(index, 1)\r\n}\r\n\r\nasync function submit() {\r\n  submitting.value = true\r\n  generalError.value = ''\r\n  Object.keys(errors).forEach(k => delete errors[k])\r\n\r\n  try {\r\n    const payload = {\r\n      family_head_name: form.family_head_name,\r\n      contact_number: form.contact_number || null,\r\n      address: form.address,\r\n      total_members: form.total_members,\r\n      evacuation_area_id: form.evacuation_area_id || null,\r\n      status: form.status,\r\n      special_needs: form.special_needs || null,\r\n      members: form.members.filter(m => m.name) // Only include members with names\r\n    }\r\n\r\n    await axios.post(`${baseUrl}/families`, payload)\r\n    router.push('/families')\r\n  } catch (err) {\r\n    if (err.response?.status === 422) {\r\n      Object.assign(errors, err.response.data.errors || {})\r\n    } else if (err.response?.data?.message) {\r\n      generalError.value = err.response.data.message\r\n    } else {\r\n      generalError.value = 'Failed to create family. Please try again.'\r\n    }\r\n  } finally {\r\n    submitting.value = false\r\n  }\r\n}\r\n</script>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}