{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = {\n  class: \"header\"\n};\nconst _hoisted_3 = {\n  key: 0,\n  class: \"loading\"\n};\nconst _hoisted_4 = {\n  key: 1,\n  class: \"alert-error\"\n};\nconst _hoisted_5 = {\n  key: 2,\n  class: \"form-card\"\n};\nconst _hoisted_6 = {\n  class: \"update-title\"\n};\nconst _hoisted_7 = {\n  class: \"meta\"\n};\nconst _hoisted_8 = {\n  class: \"description\"\n};\nconst _hoisted_9 = {\n  key: 0,\n  class: \"map-section\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" Header \"), _createElementVNode(\"div\", _hoisted_2, [_cache[1] || (_cache[1] = _createElementVNode(\"h1\", {\n    class: \"title\"\n  }, \"Update Details\", -1 /* CACHED */)), _createVNode(_component_router_link, {\n    to: \"/updates\",\n    class: \"btn-back\"\n  }, {\n    default: _withCtx(() => [...(_cache[0] || (_cache[0] = [_createTextVNode(\"‚Üê Back\", -1 /* CACHED */)]))]),\n    _: 1 /* STABLE */\n  })]), _cache[6] || (_cache[6] = _createTextVNode(\" ``` \", -1 /* CACHED */)), _createCommentVNode(\" Loading & Error \"), $setup.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, \"Loading‚Ä¶\")) : _createCommentVNode(\"v-if\", true), $setup.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, _toDisplayString($setup.error), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Update Info \"), $setup.update ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [_createElementVNode(\"h2\", _hoisted_6, _toDisplayString($setup.update.title), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_7, _toDisplayString($setup.update.source) + \" ‚Ä¢ \" + _toDisplayString($setup.formatDate($setup.update.issued_at)), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_8, _toDisplayString($setup.update.description), 1 /* TEXT */), _createElementVNode(\"p\", null, [_cache[2] || (_cache[2] = _createElementVNode(\"strong\", null, \"Type:\", -1 /* CACHED */)), _createTextVNode(\" \" + _toDisplayString($setup.update.disaster_type), 1 /* TEXT */)]), _createElementVNode(\"p\", null, [_cache[3] || (_cache[3] = _createElementVNode(\"strong\", null, \"Severity:\", -1 /* CACHED */)), _createTextVNode(\" \" + _toDisplayString($setup.update.severity), 1 /* TEXT */)]), _createElementVNode(\"p\", null, [_cache[4] || (_cache[4] = _createElementVNode(\"strong\", null, \"Coordinates:\", -1 /* CACHED */)), _createTextVNode(\" \" + _toDisplayString($setup.update.latitude ?? 'N/A') + \", \" + _toDisplayString($setup.update.longitude ?? 'N/A'), 1 /* TEXT */)]), _createCommentVNode(\" Map Section \"), $setup.hasCoordinates ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [...(_cache[5] || (_cache[5] = [_createElementVNode(\"h3\", null, \"üìç Location Map\", -1 /* CACHED */), _createElementVNode(\"div\", {\n    id: \"update-disaster-map\",\n    class: \"map\"\n  }, null, -1 /* CACHED */)]))])) : _createCommentVNode(\"v-if\", true)])) : _createCommentVNode(\"v-if\", true), _cache[7] || (_cache[7] = _createTextVNode(\" ``` \", -1 /* CACHED */))]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createCommentVNode","_createElementVNode","_hoisted_2","_createVNode","_component_router_link","to","_cache","$setup","loading","_hoisted_3","error","_hoisted_4","_toDisplayString","update","_hoisted_5","_hoisted_6","title","_hoisted_7","source","formatDate","issued_at","_hoisted_8","description","disaster_type","severity","latitude","longitude","hasCoordinates","_hoisted_9","id"],"sources":["C:\\VUEprojects\\crud-app\\src\\pages\\updates\\UpdateShow.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <!-- Header -->\r\n    <div class=\"header\">\r\n      <h1 class=\"title\">Update Details</h1>\r\n      <router-link to=\"/updates\" class=\"btn-back\">‚Üê Back</router-link>\r\n    </div>\r\n\r\n```\r\n<!-- Loading & Error -->\r\n<div v-if=\"loading\" class=\"loading\">Loading‚Ä¶</div>\r\n<div v-if=\"error\" class=\"alert-error\">{{ error }}</div>\r\n\r\n<!-- Update Info -->\r\n<div v-if=\"update\" class=\"form-card\">\r\n  <h2 class=\"update-title\">{{ update.title }}</h2>\r\n  <div class=\"meta\">{{ update.source }} ‚Ä¢ {{ formatDate(update.issued_at) }}</div>\r\n  <p class=\"description\">{{ update.description }}</p>\r\n  <p><strong>Type:</strong> {{ update.disaster_type }}</p>\r\n  <p><strong>Severity:</strong> {{ update.severity }}</p>\r\n  <p><strong>Coordinates:</strong> {{ update.latitude ?? 'N/A' }}, {{ update.longitude ?? 'N/A' }}</p>\r\n\r\n  <!-- Map Section -->\r\n  <div v-if=\"hasCoordinates\" class=\"map-section\">\r\n    <h3>üìç Location Map</h3>\r\n    <div id=\"update-disaster-map\" class=\"map\"></div>\r\n  </div>\r\n</div>\r\n```\r\n\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, onUnmounted, nextTick, computed } from 'vue';\r\nimport { useRoute } from 'vue-router';\r\nimport axios from 'axios';\r\nimport L from 'leaflet';\r\nimport 'leaflet/dist/leaflet.css';\r\n\r\nconst route = useRoute();\r\nconst update = ref(null);\r\nconst loading = ref(false);\r\nconst error = ref(null);\r\nlet leafletMap = null;\r\n\r\nconst hasCoordinates = computed(() => {\r\n  const lat = parseFloat(update.value?.latitude);\r\n  const lng = parseFloat(update.value?.longitude);\r\n  return Number.isFinite(lat) && Number.isFinite(lng);\r\n});\r\n\r\nconst load = async () => {\r\n  loading.value = true;\r\n  error.value = null;\r\n  try {\r\n    const res = await axios.get(`/updates/${route.params.id}`);\r\n    update.value = res.data.data || res.data;\r\n\r\n    await nextTick();\r\n    if (hasCoordinates.value) {\r\n      initializeMap();\r\n    }\r\n  } catch (e) {\r\n    console.error(e);\r\n    error.value = 'Failed to load';\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n};\r\n\r\nconst formatDate = s => s ? new Date(s).toLocaleString() : 'N/A';\r\n\r\nfunction initializeMap() {\r\n  if (!hasCoordinates.value) return;\r\n  if (typeof window === 'undefined') return;\r\n\r\n  if (leafletMap) {\r\n    leafletMap.remove();\r\n    leafletMap = null;\r\n  }\r\n\r\n  // Fix default marker icon paths for bundlers\r\n  delete L.Icon.Default.prototype._getIconUrl;\r\n  L.Icon.Default.mergeOptions({\r\n    iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\r\n    iconUrl: require('leaflet/dist/images/marker-icon.png'),\r\n    shadowUrl: require('leaflet/dist/images/marker-shadow.png'),\r\n  });\r\n\r\n  const lat = parseFloat(update.value.latitude);\r\n  const lng = parseFloat(update.value.longitude);\r\n\r\n  leafletMap = L.map('update-disaster-map', {\r\n    center: [lat, lng],\r\n    zoom: 13,\r\n  });\r\n\r\n  // Add OpenStreetMap tiles\r\n  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n    attribution: '&copy; OpenStreetMap contributors',\r\n  }).addTo(leafletMap);\r\n\r\n  // Add marker\r\n  L.marker([lat, lng])\r\n    .bindPopup(update.value.title || 'Disaster Location')\r\n    .addTo(leafletMap);\r\n\r\n  // Force map to recalc size if container was hidden\r\n  setTimeout(() => {\r\n    leafletMap.invalidateSize();\r\n  }, 100);\r\n}\r\n\r\nonMounted(load);\r\n\r\nonUnmounted(() => {\r\n  if (leafletMap) {\r\n    leafletMap.remove();\r\n    leafletMap = null;\r\n  }\r\n});\r\n</script>\r\n\r\n<style>\r\n.container { max-width: 700px; margin: 20px auto; padding: 0 16px; font-family: Arial, sans-serif; }\r\n\r\n/* Header */\r\n.header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }\r\n.title { font-size: 24px; font-weight: bold; color: #333; }\r\n.btn-back { padding: 8px 16px; background: #ccc; color: #333; border-radius: 6px; text-decoration: none; }\r\n.btn-back:hover { background: #bbb; }\r\n\r\n/* Loading & Error */\r\n.loading { text-align: center; padding: 16px; color: #555; }\r\n.alert-error { background: #ffe5e5; color: #b30000; padding: 12px 16px; border-radius: 8px; margin-bottom: 16px; }\r\n\r\n/* Card */\r\n.form-card { background: #fff; padding: 20px; border-radius: 12px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); }\r\n.update-title { font-size: 20px; font-weight: bold; margin-bottom: 6px; color: #333; }\r\n.meta { font-size: 14px; color: #666; margin-bottom: 12px; }\r\n.description { font-size: 16px; color: #333; line-height: 1.5; margin-bottom: 12px; }\r\n\r\n/* Map Section */\r\n.map-section { margin-top: 20px; padding: 16px; background: #f9f9f9; border-radius: 8px; border: 1px solid #ddd; }\r\n.map-section h3 { font-weight: bold; margin-bottom: 12px; color: #333; }\r\n.map { width: 100%; height: 360px; border-radius: 6px; border: 1px solid #ddd; }\r\n</style>\r\n"],"mappings":";;EACOA,KAAK,EAAC;AAAW;;EAEfA,KAAK,EAAC;AAAQ;;;EAOHA,KAAK,EAAC;;;;EACRA,KAAK,EAAC;;;;EAGLA,KAAK,EAAC;;;EACnBA,KAAK,EAAC;AAAc;;EACnBA,KAAK,EAAC;AAAM;;EACdA,KAAK,EAAC;AAAa;;;EAMKA,KAAK,EAAC;;;;uBAtBjCC,mBAAA,CA6BM,OA7BNC,UA6BM,GA5BJC,mBAAA,YAAe,EACfC,mBAAA,CAGM,OAHNC,UAGM,G,0BAFJD,mBAAA,CAAqC;IAAjCJ,KAAK,EAAC;EAAO,GAAC,gBAAc,qBAChCM,YAAA,CAAgEC,sBAAA;IAAnDC,EAAE,EAAC,UAAU;IAACR,KAAK,EAAC;;sBAAW,MAAM,KAAAS,MAAA,QAAAA,MAAA,O,iBAAN,QAAM,mB;;mDAC9C,OAGV,qBAAAN,mBAAA,qBAAwB,EACbO,MAAA,CAAAC,OAAO,I,cAAlBV,mBAAA,CAAkD,OAAlDW,UAAkD,EAAd,UAAQ,K,mCACjCF,MAAA,CAAAG,KAAK,I,cAAhBZ,mBAAA,CAAuD,OAAvDa,UAAuD,EAAAC,gBAAA,CAAdL,MAAA,CAAAG,KAAK,oB,mCAE9CV,mBAAA,iBAAoB,EACTO,MAAA,CAAAM,MAAM,I,cAAjBf,mBAAA,CAaM,OAbNgB,UAaM,GAZJb,mBAAA,CAAgD,MAAhDc,UAAgD,EAAAH,gBAAA,CAApBL,MAAA,CAAAM,MAAM,CAACG,KAAK,kBACxCf,mBAAA,CAAgF,OAAhFgB,UAAgF,EAAAL,gBAAA,CAA3DL,MAAA,CAAAM,MAAM,CAACK,MAAM,IAAG,KAAG,GAAAN,gBAAA,CAAGL,MAAA,CAAAY,UAAU,CAACZ,MAAA,CAAAM,MAAM,CAACO,SAAS,mBACtEnB,mBAAA,CAAmD,KAAnDoB,UAAmD,EAAAT,gBAAA,CAAzBL,MAAA,CAAAM,MAAM,CAACS,WAAW,kBAC5CrB,mBAAA,CAAwD,Y,0BAArDA,mBAAA,CAAsB,gBAAd,OAAK,qB,iBAAS,GAAC,GAAAW,gBAAA,CAAGL,MAAA,CAAAM,MAAM,CAACU,aAAa,iB,GACjDtB,mBAAA,CAAuD,Y,0BAApDA,mBAAA,CAA0B,gBAAlB,WAAS,qB,iBAAS,GAAC,GAAAW,gBAAA,CAAGL,MAAA,CAAAM,MAAM,CAACW,QAAQ,iB,GAChDvB,mBAAA,CAAoG,Y,0BAAjGA,mBAAA,CAA6B,gBAArB,cAAY,qB,iBAAS,GAAC,GAAAW,gBAAA,CAAGL,MAAA,CAAAM,MAAM,CAACY,QAAQ,aAAY,IAAE,GAAAb,gBAAA,CAAGL,MAAA,CAAAM,MAAM,CAACa,SAAS,0B,GAEpF1B,mBAAA,iBAAoB,EACTO,MAAA,CAAAoB,cAAc,I,cAAzB7B,mBAAA,CAGM,OAHN8B,UAGM,OAAAtB,MAAA,QAAAA,MAAA,OAFJL,mBAAA,CAAwB,YAApB,iBAAe,oBACnBA,mBAAA,CAAgD;IAA3C4B,EAAE,EAAC,qBAAqB;IAAChC,KAAK,EAAC;yJAElC,OAGJ,oB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}