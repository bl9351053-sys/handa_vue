{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, inject, onMounted } from 'vue';\nimport axios from 'axios';\nimport { useRouter, useRoute } from 'vue-router';\nexport default {\n  __name: 'FamilyShow',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const router = useRouter();\n    const route = useRoute();\n    const baseUrl = inject('baseUrl', '');\n    const familyId = route.params.id;\n    const family = ref({});\n    const generalError = ref('');\n    const loading = ref(true);\n    onMounted(async () => fetchFamily());\n    async function fetchFamily() {\n      try {\n        const res = await axios.get(`${baseUrl}/families/${familyId}`);\n        family.value = res.data?.data || res.data;\n      } catch (err) {\n        generalError.value = 'Failed to load family. Please try again.';\n      } finally {\n        loading.value = false;\n      }\n    }\n    async function deleteFamily() {\n      if (!confirm('Are you sure you want to delete this family?')) return;\n      try {\n        await axios.delete(`${baseUrl}/families/${familyId}`);\n        router.push('/families');\n      } catch {\n        generalError.value = 'Failed to delete family. Please try again.';\n      }\n    }\n    function getStatusBadge(status) {\n      const badges = {\n        evacuated: 'status-evacuated',\n        returned: 'status-returned',\n        pending: 'status-pending'\n      };\n      return badges[status] || 'status-unknown';\n    }\n    function capitalizeStatus(status) {\n      return status ? status.charAt(0).toUpperCase() + status.slice(1) : '';\n    }\n    function formatDate(dateString) {\n      if (!dateString) return '';\n      const date = new Date(dateString);\n      return date.toLocaleDateString('en-US', {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric',\n        hour: '2-digit',\n        minute: '2-digit'\n      });\n    }\n    const __returned__ = {\n      router,\n      route,\n      baseUrl,\n      familyId,\n      family,\n      generalError,\n      loading,\n      fetchFamily,\n      deleteFamily,\n      getStatusBadge,\n      capitalizeStatus,\n      formatDate,\n      ref,\n      inject,\n      onMounted,\n      get axios() {\n        return axios;\n      },\n      get useRouter() {\n        return useRouter;\n      },\n      get useRoute() {\n        return useRoute;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","inject","onMounted","axios","useRouter","useRoute","router","route","baseUrl","familyId","params","id","family","generalError","loading","fetchFamily","res","get","value","data","err","deleteFamily","confirm","delete","push","getStatusBadge","status","badges","evacuated","returned","pending","capitalizeStatus","charAt","toUpperCase","slice","formatDate","dateString","date","Date","toLocaleDateString","year","month","day","hour","minute"],"sources":["C:/VUEprojects/crud-app/src/pages/FamilyShow.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <!-- Header -->\r\n    <div class=\"header\">\r\n      <div>\r\n        <h1>Family Details</h1>\r\n        <p>View family information</p>\r\n      </div>\r\n      <router-link to=\"/families\" class=\"back-link\">\r\n        <span class=\"arrow\">&#8592;</span> Back to Families\r\n      </router-link>\r\n    </div>\r\n\r\n```\r\n<!-- Loading -->\r\n<div v-if=\"loading\" class=\"loading-card\">\r\n  <div class=\"spinner\"></div>\r\n  <span>Loading family...</span>\r\n</div>\r\n\r\n<!-- Error -->\r\n<div v-else-if=\"generalError\" class=\"error-card\">\r\n  <p>{{ generalError }}</p>\r\n</div>\r\n\r\n<!-- Content -->\r\n<div v-else class=\"space-y-6\">\r\n  <!-- Info Card -->\r\n  <div class=\"card\">\r\n    <div class=\"flex items-center justify-between mb-6\">\r\n      <div>\r\n        <h2>{{ family.family_head_name }}</h2>\r\n        <p>Family Head</p>\r\n      </div>\r\n      <div :class=\"getStatusBadge(family.status)\" class=\"status-badge\">\r\n        {{ capitalizeStatus(family.status) }}\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Info Grid -->\r\n    <div class=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\r\n      <!-- Left Column -->\r\n      <div class=\"info-col\">\r\n        <div class=\"info-item\">\r\n          <p class=\"label\">Contact Number</p>\r\n          <p class=\"value\">{{ family.contact_number || 'Not provided' }}</p>\r\n        </div>\r\n        <div class=\"info-item\">\r\n          <p class=\"label\">Address</p>\r\n          <p class=\"value\">{{ family.address }}</p>\r\n        </div>\r\n        <div class=\"info-item\">\r\n          <p class=\"label\">Total Members</p>\r\n          <p class=\"value\">{{ family.total_members }} people</p>\r\n        </div>\r\n        <div class=\"info-item\">\r\n          <p class=\"label\">Evacuation Area</p>\r\n          <p class=\"value\">{{ family.evacuation_area?.name || 'Not assigned' }}</p>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Right Column -->\r\n      <div class=\"info-col\">\r\n        <div class=\"info-item\">\r\n          <p class=\"label\">Evacuated At</p>\r\n          <p class=\"value\">{{ formatDate(family.evacuated_at) || 'Not evacuated' }}</p>\r\n        </div>\r\n        <div class=\"info-item\">\r\n          <p class=\"label\">Created At</p>\r\n          <p class=\"value\">{{ formatDate(family.created_at) || 'N/A' }}</p>\r\n        </div>\r\n        <div class=\"info-item\">\r\n          <p class=\"label\">Updated At</p>\r\n          <p class=\"value\">{{ formatDate(family.updated_at) || 'N/A' }}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Special Needs Section -->\r\n    <div v-if=\"family.special_needs\" class=\"special-needs\">\r\n      <h3>Special Needs</h3>\r\n      <div class=\"special-card\">\r\n        <p>{{ family.special_needs }}</p>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- Family Members Section -->\r\n  <div v-if=\"family.evacuees\" class=\"card\">\r\n    <h3>Family Members ({{ family.evacuees.length }})</h3>\r\n    <div v-if=\"family.evacuees.length > 0\" class=\"table-container\">\r\n      <table>\r\n        <thead>\r\n          <tr>\r\n            <th>Name</th>\r\n            <th>Age</th>\r\n            <th>Gender</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr v-for=\"member in family.evacuees\" :key=\"member.id\">\r\n            <td>{{ member.name }}</td>\r\n            <td>{{ member.age || 'N/A' }}</td>\r\n            <td>{{ capitalizeStatus(member.gender || 'N/A') }}</td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n    <div v-else class=\"empty\">No individual members registered yet</div>\r\n  </div>\r\n\r\n  <!-- Actions -->\r\n  <div class=\"actions\">\r\n    <router-link :to=\"`/families/${family.id}/edit`\" class=\"edit-btn\">Edit</router-link>\r\n    <button @click=\"deleteFamily\" class=\"delete-btn\">Delete</button>\r\n  </div>\r\n</div>\r\n```\r\n\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, inject, onMounted } from 'vue'\r\nimport axios from 'axios'\r\nimport { useRouter, useRoute } from 'vue-router'\r\n\r\nconst router = useRouter()\r\nconst route = useRoute()\r\nconst baseUrl = inject('baseUrl', '')\r\nconst familyId = route.params.id\r\n\r\nconst family = ref({})\r\nconst generalError = ref('')\r\nconst loading = ref(true)\r\n\r\nonMounted(async () => fetchFamily())\r\n\r\nasync function fetchFamily() {\r\n  try {\r\n    const res = await axios.get(`${baseUrl}/families/${familyId}`)\r\n    family.value = res.data?.data || res.data\r\n  } catch (err) {\r\n    generalError.value = 'Failed to load family. Please try again.'\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\nasync function deleteFamily() {\r\n  if (!confirm('Are you sure you want to delete this family?')) return\r\n  try {\r\n    await axios.delete(`${baseUrl}/families/${familyId}`)\r\n    router.push('/families')\r\n  } catch {\r\n    generalError.value = 'Failed to delete family. Please try again.'\r\n  }\r\n}\r\n\r\nfunction getStatusBadge(status) {\r\n  const badges = {\r\n    evacuated: 'status-evacuated',\r\n    returned: 'status-returned',\r\n    pending: 'status-pending'\r\n  }\r\n  return badges[status] || 'status-unknown'\r\n}\r\n\r\nfunction capitalizeStatus(status) {\r\n  return status ? status.charAt(0).toUpperCase() + status.slice(1) : ''\r\n}\r\n\r\nfunction formatDate(dateString) {\r\n  if (!dateString) return ''\r\n  const date = new Date(dateString)\r\n  return date.toLocaleDateString('en-US', { year:'numeric', month:'long', day:'numeric', hour:'2-digit', minute:'2-digit' })\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n  max-width: 900px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n}\r\n\r\n/* Header */\r\n.header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 25px;\r\n}\r\n.header h1 {\r\n  font-size: 2.5rem;\r\n  font-weight: bold;\r\n  background: linear-gradient(90deg,#4f46e5,#06b6d4);\r\n  -webkit-background-clip: text;\r\n  -webkit-text-fill-color: transparent;\r\n}\r\n.header p { color: #374151; margin-top: 4px; }\r\n.back-link { font-weight: 500; color:#4f46e5; display:flex; align-items:center; gap:5px; }\r\n.back-link:hover { text-decoration:underline; }\r\n\r\n/* Cards */\r\n.card {\r\n  background: linear-gradient(135deg, #f9f9ff, #ffffff);\r\n  border-radius: 12px;\r\n  padding: 30px;\r\n  box-shadow: 0 6px 20px rgba(0,0,0,0.08);\r\n}\r\n\r\n/* Loading & Error */\r\n.loading-card, .error-card {\r\n  background:#fff;\r\n  padding:40px;\r\n  border-radius:12px;\r\n  text-align:center;\r\n  box-shadow:0 4px 15px rgba(0,0,0,0.05);\r\n  display:flex; flex-direction:column; align-items:center; gap:10px;\r\n}\r\n.spinner {\r\n  border:4px solid #e5e7eb;\r\n  border-top:4px solid #4f46e5;\r\n  border-radius:50%;\r\n  width:36px; height:36px;\r\n  animation:spin 1s linear infinite;\r\n}\r\n@keyframes spin { 0%{transform:rotate(0deg);}100%{transform:rotate(360deg);} }\r\n.error-card p { color:#b91c1c; }\r\n\r\n/* Status Badge */\r\n.status-badge {\r\n  padding:6px 14px;\r\n  border-radius:9999px;\r\n  font-weight:600;\r\n  color:#fff;\r\n}\r\n.status-evacuated { background:#16a34a; }\r\n.status-returned { background:#3b82f6; }\r\n.status-pending { background:#facc15; }\r\n.status-unknown { background:#6b7280; }\r\n\r\n/* Info Grid */\r\n.info-col { display:flex; flex-direction:column; gap:12px; }\r\n.info-item { border-bottom:1px solid #e5e7eb; padding-bottom:8px; }\r\n.label { font-size:0.75rem; text-transform:uppercase; color:#6b7280; }\r\n.value { font-weight:500; color:#111827; font-size:1rem; }\r\n\r\n/* Special Needs */\r\n.special-needs h3 { font-weight:600; margin-bottom:6px; }\r\n.special-card { background:#fef9c3; border:1px solid #fde68a; border-radius:8px; padding:12px; color:#78350f; }\r\n\r\n/* Table */\r\n.table-container { overflow-x:auto; }\r\ntable { width:100%; border-collapse:collapse; }\r\nthead { background:#f3f4f6; }\r\nth, td { padding:12px 15px; text-align:left; }\r\nth { font-size:0.75rem; color:#6b7280; text-transform:uppercase; }\r\ntbody tr:hover { background:#f9fafb; }\r\n\r\n/* Empty row */\r\n.empty { padding:20px; text-align:center; color:#6b7280; }\r\n\r\n/* Actions */\r\n.actions { display:flex; justify:end; gap:15px; margin-top:15px; }\r\n.edit-btn { background:#4f46e5; color:#fff; padding:10px 20px; border-radius:8px; font-weight:500; }\r\n.edit-btn:hover { background:#4338ca; }\r\n.delete-btn { background:#dc2626; color:#fff; padding:10px 20px; border-radius:8px; font-weight:500; }\r\n.delete-btn:hover { background:#b91c1c; }\r\n\r\n/* Responsive */\r\n@media(max-width:768px){\r\n  .header{flex-direction:column;align-items:flex-start;gap:10px;}\r\n  .grid{grid-template-columns:1fr;}\r\n}\r\n</style>\r\n"],"mappings":";AA2HA,SAASA,GAAG,EAAEC,MAAM,EAAEC,SAAS,QAAQ,KAAK;AAC5C,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,SAAS,EAAEC,QAAQ,QAAQ,YAAY;;;;;;;IAEhD,MAAMC,MAAM,GAAGF,SAAS,CAAC,CAAC;IAC1B,MAAMG,KAAK,GAAGF,QAAQ,CAAC,CAAC;IACxB,MAAMG,OAAO,GAAGP,MAAM,CAAC,SAAS,EAAE,EAAE,CAAC;IACrC,MAAMQ,QAAQ,GAAGF,KAAK,CAACG,MAAM,CAACC,EAAE;IAEhC,MAAMC,MAAM,GAAGZ,GAAG,CAAC,CAAC,CAAC,CAAC;IACtB,MAAMa,YAAY,GAAGb,GAAG,CAAC,EAAE,CAAC;IAC5B,MAAMc,OAAO,GAAGd,GAAG,CAAC,IAAI,CAAC;IAEzBE,SAAS,CAAC,YAAYa,WAAW,CAAC,CAAC,CAAC;IAEpC,eAAeA,WAAWA,CAAA,EAAG;MAC3B,IAAI;QACF,MAAMC,GAAG,GAAG,MAAMb,KAAK,CAACc,GAAG,CAAC,GAAGT,OAAO,aAAaC,QAAQ,EAAE,CAAC;QAC9DG,MAAM,CAACM,KAAK,GAAGF,GAAG,CAACG,IAAI,EAAEA,IAAI,IAAIH,GAAG,CAACG,IAAI;MAC3C,CAAC,CAAC,OAAOC,GAAG,EAAE;QACZP,YAAY,CAACK,KAAK,GAAG,0CAA0C;MACjE,CAAC,SAAS;QACRJ,OAAO,CAACI,KAAK,GAAG,KAAK;MACvB;IACF;IAEA,eAAeG,YAAYA,CAAA,EAAG;MAC5B,IAAI,CAACC,OAAO,CAAC,8CAA8C,CAAC,EAAE;MAC9D,IAAI;QACF,MAAMnB,KAAK,CAACoB,MAAM,CAAC,GAAGf,OAAO,aAAaC,QAAQ,EAAE,CAAC;QACrDH,MAAM,CAACkB,IAAI,CAAC,WAAW,CAAC;MAC1B,CAAC,CAAC,MAAM;QACNX,YAAY,CAACK,KAAK,GAAG,4CAA4C;MACnE;IACF;IAEA,SAASO,cAAcA,CAACC,MAAM,EAAE;MAC9B,MAAMC,MAAM,GAAG;QACbC,SAAS,EAAE,kBAAkB;QAC7BC,QAAQ,EAAE,iBAAiB;QAC3BC,OAAO,EAAE;MACX,CAAC;MACD,OAAOH,MAAM,CAACD,MAAM,CAAC,IAAI,gBAAgB;IAC3C;IAEA,SAASK,gBAAgBA,CAACL,MAAM,EAAE;MAChC,OAAOA,MAAM,GAAGA,MAAM,CAACM,MAAM,CAAC,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,GAAGP,MAAM,CAACQ,KAAK,CAAC,CAAC,CAAC,GAAG,EAAE;IACvE;IAEA,SAASC,UAAUA,CAACC,UAAU,EAAE;MAC9B,IAAI,CAACA,UAAU,EAAE,OAAO,EAAE;MAC1B,MAAMC,IAAI,GAAG,IAAIC,IAAI,CAACF,UAAU,CAAC;MACjC,OAAOC,IAAI,CAACE,kBAAkB,CAAC,OAAO,EAAE;QAAEC,IAAI,EAAC,SAAS;QAAEC,KAAK,EAAC,MAAM;QAAEC,GAAG,EAAC,SAAS;QAAEC,IAAI,EAAC,SAAS;QAAEC,MAAM,EAAC;MAAU,CAAC,CAAC;IAC5H","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}