{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport { ref, onMounted, inject } from 'vue';\nimport axios from 'axios';\nexport default {\n  __name: 'FacilitiesList',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const baseUrl = inject('baseUrl', '');\n    const facilities = ref([]);\n    const loading = ref(false);\n    const generalError = ref('');\n    onMounted(async () => {\n      await fetchFacilities();\n    });\n    async function fetchFacilities() {\n      loading.value = true;\n      generalError.value = '';\n      try {\n        const res = await axios.get(`${baseUrl}/facilities`);\n        facilities.value = res.data?.data || res.data || [];\n      } catch (err) {\n        generalError.value = 'Failed to load facilities. Please try again.';\n        console.error('Fetch facilities error:', err);\n      } finally {\n        loading.value = false;\n      }\n    }\n    function getStatusBadge(status) {\n      const badges = {\n        operational: 'bg-green-100 text-green-800',\n        limited: 'bg-yellow-100 text-yellow-800',\n        offline: 'bg-gray-100 text-gray-800',\n        emergency: 'bg-red-100 text-red-800'\n      };\n      return badges[status] || 'bg-gray-100 text-gray-800';\n    }\n    function capitalizeStatus(status) {\n      return status.charAt(0).toUpperCase() + status.slice(1);\n    }\n    function formatDate(date) {\n      if (!date) return 'Never';\n      return new Date(date).toLocaleDateString('en-US', {\n        month: 'short',\n        day: 'numeric',\n        year: 'numeric'\n      });\n    }\n    async function deleteFacility(id) {\n      if (!confirm('Are you sure you want to delete this facility?')) return;\n      try {\n        await axios.delete(`${baseUrl}/facilities/${id}`);\n        facilities.value = facilities.value.filter(f => f.id !== id);\n      } catch (err) {\n        generalError.value = 'Failed to delete facility. Please try again.';\n        console.error('Delete facility error:', err);\n      }\n    }\n    const __returned__ = {\n      baseUrl,\n      facilities,\n      loading,\n      generalError,\n      fetchFacilities,\n      getStatusBadge,\n      capitalizeStatus,\n      formatDate,\n      deleteFacility,\n      ref,\n      onMounted,\n      inject,\n      get axios() {\n        return axios;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","inject","axios","baseUrl","facilities","loading","generalError","fetchFacilities","value","res","get","data","err","console","error","getStatusBadge","status","badges","operational","limited","offline","emergency","capitalizeStatus","charAt","toUpperCase","slice","formatDate","date","Date","toLocaleDateString","month","day","year","deleteFacility","id","confirm","delete","filter","f"],"sources":["C:/VUEprojects/crud-app/src/pages/FacilitiesList.vue"],"sourcesContent":["<template>\r\n  <div class=\"page-container\">\r\n    <div class=\"content-wrapper\">\r\n\r\n      <!-- HEADER -->\r\n      <div class=\"header\">\r\n        <div>\r\n          <h1 class=\"title\">Facilities</h1>\r\n          <p class=\"subtitle\">Monitor emergency facilities and resources</p>\r\n        </div>\r\n\r\n        <router-link to=\"/facilities/create\" class=\"btn-primary\">\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon\" fill=\"none\"\r\n               viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"\r\n                  d=\"M12 4v16m8-8H4\" />\r\n          </svg>\r\n          Add Facility\r\n        </router-link>\r\n      </div>\r\n\r\n      <!-- ERROR -->\r\n      <div v-if=\"generalError\" class=\"error-box\">\r\n        {{ generalError }}\r\n      </div>\r\n\r\n      <!-- LOADING -->\r\n      <div v-if=\"loading\" class=\"loading-box\">\r\n        <div class=\"loader\"></div>\r\n        <p>Loading facilities...</p>\r\n      </div>\r\n\r\n      <!-- FACILITIES TABLE -->\r\n      <div v-else class=\"card\">\r\n        <div class=\"table-wrapper\">\r\n          <table class=\"table\">\r\n            <thead>\r\n              <tr>\r\n                <th>Name</th>\r\n                <th>Type</th>\r\n                <th>Status</th>\r\n                <th>Staff</th>\r\n                <th>Last Checked</th>\r\n                <th class=\"text-center\">Actions</th>\r\n              </tr>\r\n            </thead>\r\n\r\n            <tbody>\r\n              <tr v-for=\"facility in facilities\" :key=\"facility.id\">\r\n                <td>\r\n                  <div class=\"name-text\">{{ facility.name }}</div>\r\n                  <div class=\"subtext\">\r\n                    {{ (facility.address || '').substring(0, 40) }}\r\n                    {{ facility.address?.length > 40 ? '...' : '' }}\r\n                  </div>\r\n                </td>\r\n\r\n                <td>{{ facility.type }}</td>\r\n\r\n                <td>\r\n                  <span :class=\"['badge', getStatusBadge(facility.status)]\">\r\n                    {{ capitalizeStatus(facility.status) }}\r\n                  </span>\r\n                </td>\r\n\r\n                <td>{{ facility.staff_count }}</td>\r\n\r\n                <td class=\"subtext\">{{ formatDate(facility.last_checked) }}</td>\r\n\r\n                <td class=\"actions\">\r\n                  <router-link :to=\"`/facilities/${facility.id}`\" class=\"action view\">View</router-link>\r\n                  <router-link :to=\"`/facilities/${facility.id}/edit`\" class=\"action edit\">Edit</router-link>\r\n                  <button @click=\"deleteFacility(facility.id)\" class=\"action delete\">Delete</button>\r\n                </td>\r\n              </tr>\r\n\r\n              <tr v-if=\"facilities.length === 0\">\r\n                <td colspan=\"6\" class=\"empty-data\">No facilities found.</td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n\r\n\r\n<script setup>\r\nimport { ref, onMounted, inject } from 'vue'\r\nimport axios from 'axios'\r\n\r\nconst baseUrl = inject('baseUrl', '')\r\n\r\nconst facilities = ref([])\r\nconst loading = ref(false)\r\nconst generalError = ref('')\r\n\r\nonMounted(async () => {\r\n  await fetchFacilities()\r\n})\r\n\r\nasync function fetchFacilities() {\r\n  loading.value = true\r\n  generalError.value = ''\r\n  try {\r\n    const res = await axios.get(`${baseUrl}/facilities`)\r\n    facilities.value = res.data?.data || res.data || []\r\n  } catch (err) {\r\n    generalError.value = 'Failed to load facilities. Please try again.'\r\n    console.error('Fetch facilities error:', err)\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\nfunction getStatusBadge(status) {\r\n  const badges = {\r\n    operational: 'bg-green-100 text-green-800',\r\n    limited: 'bg-yellow-100 text-yellow-800',\r\n    offline: 'bg-gray-100 text-gray-800',\r\n    emergency: 'bg-red-100 text-red-800'\r\n  }\r\n  return badges[status] || 'bg-gray-100 text-gray-800'\r\n}\r\n\r\nfunction capitalizeStatus(status) {\r\n  return status.charAt(0).toUpperCase() + status.slice(1)\r\n}\r\n\r\nfunction formatDate(date) {\r\n  if (!date) return 'Never'\r\n  return new Date(date).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })\r\n}\r\n\r\nasync function deleteFacility(id) {\r\n  if (!confirm('Are you sure you want to delete this facility?')) return\r\n  \r\n  try {\r\n    await axios.delete(`${baseUrl}/facilities/${id}`)\r\n    facilities.value = facilities.value.filter(f => f.id !== id)\r\n  } catch (err) {\r\n    generalError.value = 'Failed to delete facility. Please try again.'\r\n    console.error('Delete facility error:', err)\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n/* PAGE LAYOUT */\r\n.page-container {\r\n  min-height: 100vh;\r\n  background: #f5f6fa;\r\n  padding: 30px;\r\n}\r\n\r\n.content-wrapper {\r\n  max-width: 1200px;\r\n  margin: auto;\r\n}\r\n\r\n/* HEADER */\r\n.header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 35px;\r\n}\r\n\r\n.title {\r\n  font-size: 34px;\r\n  font-weight: 700;\r\n  color: #222;\r\n}\r\n\r\n.subtitle {\r\n  color: #666;\r\n  margin-top: 5px;\r\n}\r\n\r\n/* BUTTON */\r\n.btn-primary {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n  background: #4f46e5;\r\n  color: white;\r\n  padding: 12px 22px;\r\n  border-radius: 10px;\r\n  font-weight: 500;\r\n  text-decoration: none;\r\n  transition: 0.2s;\r\n  box-shadow: 0 3px 6px rgba(0,0,0,0.12);\r\n}\r\n\r\n.btn-primary:hover {\r\n  background: #4338ca;\r\n}\r\n\r\n.icon {\r\n  width: 18px;\r\n  height: 18px;\r\n}\r\n\r\n/* ERROR BOX */\r\n.error-box {\r\n  background: #ffe8e8;\r\n  border-left: 4px solid #e11d48;\r\n  padding: 15px;\r\n  color: #b91c1c;\r\n  margin-bottom: 20px;\r\n  border-radius: 8px;\r\n}\r\n\r\n/* LOADING BOX */\r\n.loading-box {\r\n  background: white;\r\n  padding: 40px;\r\n  border-radius: 12px;\r\n  box-shadow: 0 2px 10px rgba(0,0,0,0.08);\r\n  text-align: center;\r\n}\r\n\r\n.loader {\r\n  width: 30px;\r\n  height: 30px;\r\n  border: 4px solid #ddd;\r\n  border-top-color: #4f46e5;\r\n  border-radius: 50%;\r\n  animation: spin 1s linear infinite;\r\n  margin: auto;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n@keyframes spin {\r\n  to { transform: rotate(360deg); }\r\n}\r\n\r\n/* CARD */\r\n.card {\r\n  background: white;\r\n  border-radius: 12px;\r\n  border: 1px solid #e5e5e5;\r\n  box-shadow: 0 2px 10px rgba(0,0,0,0.05);\r\n  overflow: hidden;\r\n}\r\n\r\n/* TABLE */\r\n.table-wrapper {\r\n  overflow-x: auto;\r\n}\r\n\r\n.table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n}\r\n\r\n.table thead {\r\n  background: #f8f9fb;\r\n}\r\n\r\n.table th {\r\n  padding: 14px;\r\n  font-size: 13px;\r\n  text-transform: uppercase;\r\n  color: #666;\r\n  font-weight: 600;\r\n  border-bottom: 1px solid #ddd;\r\n}\r\n\r\n.table td {\r\n  padding: 16px;\r\n  border-bottom: 1px solid #eee;\r\n  color: #333;\r\n}\r\n\r\n.name-text {\r\n  font-weight: bold;\r\n  color: #222;\r\n}\r\n\r\n.subtext {\r\n  font-size: 13px;\r\n  color: #666;\r\n}\r\n\r\n/* BADGES */\r\n.badge {\r\n  padding: 5px 10px;\r\n  border-radius: 20px;\r\n  font-size: 12px;\r\n  font-weight: 600;\r\n}\r\n\r\n.bg-green { background: #d1fae5; color: #065f46; }\r\n.bg-yellow { background: #fef3c7; color: #92400e; }\r\n.bg-gray { background: #e5e7eb; color: #374151; }\r\n.bg-red { background: #fee2e2; color: #991b1b; }\r\n\r\n/* STATUS CLASS MAP */\r\n.operational { background: #060b08; color: #065f46; }\r\n.limited { background: #fef3c7; color: #92400e; }\r\n.offline { background: #e5e7eb; color: #374151; }\r\n.emergency { background: #fee2e2; color: #991b1b; }\r\n\r\n/* ACTION BUTTONS */\r\n.actions {\r\n  text-align: center;\r\n}\r\n\r\n.action {\r\n  margin: 0 7px;\r\n  cursor: pointer;\r\n  font-weight: 600;\r\n  text-decoration: none;\r\n  transition: 0.2s;\r\n}\r\n\r\n.action.view { color: #4f46e5; }\r\n.action.view:hover { color: #3730a3; }\r\n\r\n.action.edit { color: #059669; }\r\n.action.edit:hover { color: #047857; }\r\n\r\n.action.delete { color: #dc2626; }\r\n.action.delete:hover { color: #b91c1c; }\r\n\r\n/* EMPTY STATE */\r\n.empty-data {\r\n  padding: 40px;\r\n  text-align: center;\r\n  color: #777;\r\n}\r\n</style>\r\n\r\n"],"mappings":";;AA2FA,SAASA,GAAG,EAAEC,SAAS,EAAEC,MAAM,QAAQ,KAAK;AAC5C,OAAOC,KAAK,MAAM,OAAO;;;;;;;IAEzB,MAAMC,OAAO,GAAGF,MAAM,CAAC,SAAS,EAAE,EAAE,CAAC;IAErC,MAAMG,UAAU,GAAGL,GAAG,CAAC,EAAE,CAAC;IAC1B,MAAMM,OAAO,GAAGN,GAAG,CAAC,KAAK,CAAC;IAC1B,MAAMO,YAAY,GAAGP,GAAG,CAAC,EAAE,CAAC;IAE5BC,SAAS,CAAC,YAAY;MACpB,MAAMO,eAAe,CAAC,CAAC;IACzB,CAAC,CAAC;IAEF,eAAeA,eAAeA,CAAA,EAAG;MAC/BF,OAAO,CAACG,KAAK,GAAG,IAAI;MACpBF,YAAY,CAACE,KAAK,GAAG,EAAE;MACvB,IAAI;QACF,MAAMC,GAAG,GAAG,MAAMP,KAAK,CAACQ,GAAG,CAAC,GAAGP,OAAO,aAAa,CAAC;QACpDC,UAAU,CAACI,KAAK,GAAGC,GAAG,CAACE,IAAI,EAAEA,IAAI,IAAIF,GAAG,CAACE,IAAI,IAAI,EAAE;MACrD,CAAC,CAAC,OAAOC,GAAG,EAAE;QACZN,YAAY,CAACE,KAAK,GAAG,8CAA8C;QACnEK,OAAO,CAACC,KAAK,CAAC,yBAAyB,EAAEF,GAAG,CAAC;MAC/C,CAAC,SAAS;QACRP,OAAO,CAACG,KAAK,GAAG,KAAK;MACvB;IACF;IAEA,SAASO,cAAcA,CAACC,MAAM,EAAE;MAC9B,MAAMC,MAAM,GAAG;QACbC,WAAW,EAAE,6BAA6B;QAC1CC,OAAO,EAAE,+BAA+B;QACxCC,OAAO,EAAE,2BAA2B;QACpCC,SAAS,EAAE;MACb,CAAC;MACD,OAAOJ,MAAM,CAACD,MAAM,CAAC,IAAI,2BAA2B;IACtD;IAEA,SAASM,gBAAgBA,CAACN,MAAM,EAAE;MAChC,OAAOA,MAAM,CAACO,MAAM,CAAC,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,GAAGR,MAAM,CAACS,KAAK,CAAC,CAAC,CAAC;IACzD;IAEA,SAASC,UAAUA,CAACC,IAAI,EAAE;MACxB,IAAI,CAACA,IAAI,EAAE,OAAO,OAAO;MACzB,OAAO,IAAIC,IAAI,CAACD,IAAI,CAAC,CAACE,kBAAkB,CAAC,OAAO,EAAE;QAAEC,KAAK,EAAE,OAAO;QAAEC,GAAG,EAAE,SAAS;QAAEC,IAAI,EAAE;MAAU,CAAC,CAAC;IACxG;IAEA,eAAeC,cAAcA,CAACC,EAAE,EAAE;MAChC,IAAI,CAACC,OAAO,CAAC,gDAAgD,CAAC,EAAE;MAEhE,IAAI;QACF,MAAMjC,KAAK,CAACkC,MAAM,CAAC,GAAGjC,OAAO,eAAe+B,EAAE,EAAE,CAAC;QACjD9B,UAAU,CAACI,KAAK,GAAGJ,UAAU,CAACI,KAAK,CAAC6B,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACJ,EAAE,KAAKA,EAAE,CAAC;MAC9D,CAAC,CAAC,OAAOtB,GAAG,EAAE;QACZN,YAAY,CAACE,KAAK,GAAG,8CAA8C;QACnEK,OAAO,CAACC,KAAK,CAAC,wBAAwB,EAAEF,GAAG,CAAC;MAC9C;IACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}