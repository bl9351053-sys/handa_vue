{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, normalizeClass as _normalizeClass, normalizeStyle as _normalizeStyle, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"card\"\n};\nconst _hoisted_2 = {\n  class: \"flex-between mb-4\"\n};\nconst _hoisted_3 = [\"disabled\"];\nconst _hoisted_4 = {\n  key: 0\n};\nconst _hoisted_5 = {\n  key: 1\n};\nconst _hoisted_6 = {\n  key: 0,\n  class: \"text-center py-8\"\n};\nconst _hoisted_7 = {\n  key: 1,\n  class: \"text-red-700 p-3\"\n};\nconst _hoisted_8 = {\n  key: 2,\n  class: \"table-container\"\n};\nconst _hoisted_9 = {\n  class: \"table\"\n};\nconst _hoisted_10 = {\n  class: \"text-muted\"\n};\nconst _hoisted_11 = {\n  class: \"badge badge-info\"\n};\nconst _hoisted_12 = {\n  class: \"risk-level-container\"\n};\nconst _hoisted_13 = {\n  class: \"risk-bar-background mt-2\"\n};\nconst _hoisted_14 = {\n  key: 0\n};\nconst _hoisted_15 = {\n  key: 1\n};\nconst _hoisted_16 = [\"onClick\"];\nconst _hoisted_17 = {\n  key: 0,\n  class: \"mt-4 pagination-container\"\n};\nconst _hoisted_18 = {\n  class: \"mx-3\"\n};\nconst _hoisted_19 = {\n  key: 3,\n  class: \"p-4 text-muted\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", null, [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[2] || (_cache[2] = _createElementVNode(\"div\", {\n    class: \"card-header card-header-no-border\"\n  }, \"üîÆ Disaster Predictions & Recovery Estimates\", -1 /* CACHED */)), _createElementVNode(\"button\", {\n    onClick: $setup.syncPredictions,\n    disabled: $setup.syncing,\n    class: \"btn btn-success\"\n  }, [!$setup.syncing ? (_openBlock(), _createElementBlock(\"span\", _hoisted_4, \"üîÑ Sync from PAGASA/PhiVolcs\")) : (_openBlock(), _createElementBlock(\"span\", _hoisted_5, \"‚è≥ Syncing...\"))], 8 /* PROPS */, _hoisted_3)]), _cache[5] || (_cache[5] = _createElementVNode(\"div\", {\n    class: \"info-box warning mb-4\"\n  }, [_createElementVNode(\"strong\", null, \"üì° Data Sources:\"), _createTextVNode(\" Predictions are automatically generated from real-time data provided by: \"), _createElementVNode(\"strong\", null, \"PAGASA\"), _createTextVNode(\", \"), _createElementVNode(\"strong\", null, \"PhiVolcs\"), _createTextVNode(\", and \"), _createElementVNode(\"strong\", null, \"NDRRMC\"), _createTextVNode(\". Click \\\"Sync\\\" to fetch latest predictions. \")], -1 /* CACHED */)), $setup.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, \"Loading predictions...\")) : _createCommentVNode(\"v-if\", true), $setup.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, _toDisplayString($setup.error), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), !$setup.loading && $setup.predictions.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [_createElementVNode(\"table\", _hoisted_9, [_cache[4] || (_cache[4] = _createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", null, \"Location\"), _createElementVNode(\"th\", null, \"Disaster Type\"), _createElementVNode(\"th\", null, \"Risk Level\"), _createElementVNode(\"th\", null, \"Recovery Days\"), _createElementVNode(\"th\", null, \"Predicted At\"), _createElementVNode(\"th\", null, \"Actions\")])], -1 /* CACHED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.predictions, p => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: p.id,\n      class: _normalizeClass(_ctx.rowClass(p.risk_level))\n    }, [_createElementVNode(\"td\", null, [_createElementVNode(\"strong\", null, _toDisplayString(p.location_name || 'Unknown'), 1 /* TEXT */), _cache[3] || (_cache[3] = _createElementVNode(\"br\", null, null, -1 /* CACHED */)), _createElementVNode(\"small\", _hoisted_10, _toDisplayString(p.latitude || 'N/A') + \", \" + _toDisplayString(p.longitude || 'N/A'), 1 /* TEXT */)]), _createElementVNode(\"td\", null, [_createElementVNode(\"span\", _hoisted_11, _toDisplayString(_ctx.capitalize(p.disaster_type)), 1 /* TEXT */)]), _createElementVNode(\"td\", null, [_createElementVNode(\"div\", _hoisted_12, [_createElementVNode(\"span\", {\n      class: _normalizeClass([\"badge\", _ctx.badgeClass(p.risk_level)])\n    }, _toDisplayString(p.risk_level) + \"/10\", 3 /* TEXT, CLASS */), _createElementVNode(\"div\", _hoisted_13, [_createElementVNode(\"div\", {\n      class: _normalizeClass([\"risk-bar-fill\", _ctx.riskFillClass(p.risk_level)]),\n      style: _normalizeStyle({\n        width: (p.risk_level || 0) * 10 + '%'\n      })\n    }, null, 6 /* CLASS, STYLE */)])])]), _createElementVNode(\"td\", null, [p.predicted_recovery_days ? (_openBlock(), _createElementBlock(\"span\", _hoisted_14, \"~\" + _toDisplayString(p.predicted_recovery_days) + \" days\", 1 /* TEXT */)) : (_openBlock(), _createElementBlock(\"span\", _hoisted_15, \"N/A\"))]), _createElementVNode(\"td\", null, _toDisplayString(_ctx.formatShortDate(p.predicted_at)), 1 /* TEXT */), _createElementVNode(\"td\", null, [_createElementVNode(\"button\", {\n      class: \"btn btn-primary btn-small\",\n      onClick: _withModifiers($event => $setup.goToDetail(p.id), [\"prevent\"])\n    }, \"View\", 8 /* PROPS */, _hoisted_16)])], 2 /* CLASS */);\n  }), 128 /* KEYED_FRAGMENT */))])]), $setup.pagination ? (_openBlock(), _createElementBlock(\"div\", _hoisted_17, [$setup.pagination.current_page > 1 ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 0,\n    onClick: _cache[0] || (_cache[0] = $event => $setup.fetchPredictions($setup.pagination.current_page - 1)),\n    class: \"btn btn-secondary btn-small\"\n  }, \"Previous\")) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"span\", _hoisted_18, \"Page \" + _toDisplayString($setup.pagination.current_page) + \" of \" + _toDisplayString($setup.pagination.last_page), 1 /* TEXT */), $setup.pagination.current_page < $setup.pagination.last_page ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 1,\n    onClick: _cache[1] || (_cache[1] = $event => $setup.fetchPredictions($setup.pagination.current_page + 1)),\n    class: \"btn btn-secondary btn-small\"\n  }, \"Next\")) : _createCommentVNode(\"v-if\", true)])) : _createCommentVNode(\"v-if\", true)])) : _createCommentVNode(\"v-if\", true), !$setup.loading && $setup.predictions.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_19, \"No predictions available.\")) : _createCommentVNode(\"v-if\", true)])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_createElementVNode","_hoisted_1","_hoisted_2","onClick","$setup","syncPredictions","disabled","syncing","_hoisted_4","_hoisted_5","loading","_hoisted_6","error","_hoisted_7","_toDisplayString","predictions","length","_hoisted_8","_hoisted_9","_Fragment","_renderList","p","key","id","_normalizeClass","_ctx","rowClass","risk_level","location_name","_hoisted_10","latitude","longitude","_hoisted_11","capitalize","disaster_type","_hoisted_12","badgeClass","_hoisted_13","riskFillClass","style","_normalizeStyle","width","predicted_recovery_days","_hoisted_14","_hoisted_15","formatShortDate","predicted_at","_withModifiers","$event","goToDetail","_hoisted_16","pagination","_hoisted_17","current_page","_cache","fetchPredictions","_hoisted_18","last_page","_hoisted_19"],"sources":["C:\\VUEprojects\\crud-app\\src\\pages\\resident_pages\\DisasterPredictionsList.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"card\">\r\n      <div class=\"flex-between mb-4\">\r\n        <div class=\"card-header card-header-no-border\">üîÆ Disaster Predictions & Recovery Estimates</div>\r\n        <button @click=\"syncPredictions\" :disabled=\"syncing\" class=\"btn btn-success\">\r\n          <span v-if=\"!syncing\">üîÑ Sync from PAGASA/PhiVolcs</span>\r\n          <span v-else>‚è≥ Syncing...</span>\r\n        </button>\r\n      </div>\r\n\r\n      <div class=\"info-box warning mb-4\">\r\n        <strong>üì° Data Sources:</strong> Predictions are automatically generated from real-time data provided by: <strong>PAGASA</strong>, <strong>PhiVolcs</strong>, and <strong>NDRRMC</strong>. Click \"Sync\" to fetch latest predictions.\r\n      </div>\r\n\r\n      <div v-if=\"loading\" class=\"text-center py-8\">Loading predictions...</div>\r\n      <div v-if=\"error\" class=\"text-red-700 p-3\">{{ error }}</div>\r\n\r\n      <div v-if=\"!loading && predictions.length > 0\" class=\"table-container\">\r\n        <table class=\"table\">\r\n          <thead>\r\n            <tr>\r\n              <th>Location</th>\r\n              <th>Disaster Type</th>\r\n              <th>Risk Level</th>\r\n              <th>Recovery Days</th>\r\n              <th>Predicted At</th>\r\n              <th>Actions</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"p in predictions\" :key=\"p.id\" :class=\"rowClass(p.risk_level)\">\r\n              <td>\r\n                <strong>{{ p.location_name || 'Unknown' }}</strong>\r\n                <br>\r\n                <small class=\"text-muted\">{{ p.latitude || 'N/A' }}, {{ p.longitude || 'N/A' }}</small>\r\n              </td>\r\n              <td><span class=\"badge badge-info\">{{ capitalize(p.disaster_type) }}</span></td>\r\n              <td>\r\n                <div class=\"risk-level-container\">\r\n                  <span class=\"badge\" :class=\"badgeClass(p.risk_level)\">{{ p.risk_level }}/10</span>\r\n                  <div class=\"risk-bar-background mt-2\">\r\n                    <div class=\"risk-bar-fill\" :class=\"riskFillClass(p.risk_level)\" :style=\"{ width: (p.risk_level || 0) * 10 + '%' }\"></div>\r\n                  </div>\r\n                </div>\r\n              </td>\r\n              <td>\r\n                <span v-if=\"p.predicted_recovery_days\">~{{ p.predicted_recovery_days }} days</span>\r\n                <span v-else>N/A</span>\r\n              </td>\r\n              <td>{{ formatShortDate(p.predicted_at) }}</td>\r\n              <td>\r\n                <button class=\"btn btn-primary btn-small\" @click.prevent=\"goToDetail(p.id)\">View</button>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n\r\n        <div class=\"mt-4 pagination-container\" v-if=\"pagination\">\r\n          <button v-if=\"pagination.current_page > 1\" @click=\"fetchPredictions(pagination.current_page - 1)\" class=\"btn btn-secondary btn-small\">Previous</button>\r\n          <span class=\"mx-3\">Page {{ pagination.current_page }} of {{ pagination.last_page }}</span>\r\n          <button v-if=\"pagination.current_page < pagination.last_page\" @click=\"fetchPredictions(pagination.current_page + 1)\" class=\"btn btn-secondary btn-small\">Next</button>\r\n        </div>\r\n      </div>\r\n\r\n      <div v-if=\"!loading && predictions.length === 0\" class=\"p-4 text-muted\">No predictions available.</div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, inject, onMounted } from 'vue';\r\nimport { useRouter } from 'vue-router';\r\n\r\nconst residentAxios = inject('residentAxios');\r\nconst router = useRouter();\r\n\r\nconst predictions = ref([]);\r\nconst loading = ref(false);\r\nconst error = ref(null);\r\nconst syncing = ref(false);\r\nconst pagination = ref(null);\r\n\r\nconst fetchPredictions = async (page = 1) => {\r\n  loading.value = true;\r\n  error.value = null;\r\n  try {\r\n    const res = await residentAxios.get('/disaster-predictions', { params: { page } });\r\n    if (res.data && res.data.data) {\r\n      predictions.value = res.data.data;\r\n      pagination.value = {\r\n        current_page: res.data.current_page,\r\n        last_page: res.data.last_page,\r\n        total: res.data.total,\r\n      };\r\n    } else if (Array.isArray(res.data)) {\r\n      predictions.value = res.data;\r\n      pagination.value = null;\r\n    }\r\n  } catch (e) {\r\n    console.error('[Pred] Fetch error', e);\r\n    error.value = 'Failed to load predictions.';\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n};\r\n\r\nconst syncPredictions = async () => {\r\n  syncing.value = true;\r\n  try {\r\n    const res = await residentAxios.post('/real-time-data/sync');\r\n    if (res.data && res.data.success) {\r\n      alert('Sync successful: ' + (res.data.message || ''));\r\n      fetchPredictions(1);\r\n    } else {\r\n      alert('Sync failed');\r\n    }\r\n  } catch (e) {\r\n    console.error('[Pred] Sync error', e);\r\n    alert('Error syncing predictions');\r\n  } finally {\r\n    syncing.value = false;\r\n  }\r\n};\r\n\r\nconst goToDetail = (id) => router.push({ path: `/resident_pages/disaster-predictions/${id}` });\r\n\r\nconst formatDate = (s) => {\r\n  if (!s) return 'N/A';\r\n  try { return new Date(s).toLocaleString(); } catch { return s; }\r\n};\r\n\r\nconst severityClass = (lvl) => {\r\n  if (!lvl && lvl !== 0) return 'bg-gray-200 text-gray-800';\r\n  if (lvl >= 8) return 'bg-red-600 text-white';\r\n  if (lvl >= 6) return 'bg-orange-600 text-white';\r\n  if (lvl >= 4) return 'bg-yellow-600 text-white';\r\n  return 'bg-green-600 text-white';\r\n};\r\n\r\nonMounted(() => fetchPredictions(1));\r\n</script>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}