{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"evac-list\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"center\"\n};\nconst _hoisted_3 = {\n  key: 1,\n  class: \"center error\"\n};\nconst _hoisted_4 = {\n  class: \"grid\"\n};\nconst _hoisted_5 = {\n  class: \"card-body\"\n};\nconst _hoisted_6 = {\n  class: \"area-name\"\n};\nconst _hoisted_7 = {\n  class: \"area-address\"\n};\nconst _hoisted_8 = {\n  class: \"meta\"\n};\nconst _hoisted_9 = {\n  class: \"meta\"\n};\nconst _hoisted_10 = {\n  class: \"meta\"\n};\nconst _hoisted_11 = {\n  class: \"card-footer\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[2] || (_cache[2] = _createElementVNode(\"h1\", null, \"Evacuation Areas\", -1 /* CACHED */)), _cache[3] || (_cache[3] = _createElementVNode(\"p\", {\n    class: \"subtitle\"\n  }, \"All evacuation areas — live data from System‑E\", -1 /* CACHED */)), $setup.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, \"Loading evacuation areas…\")) : $setup.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, _toDisplayString($setup.error), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_4, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.areas, area => {\n    return _openBlock(), _createElementBlock(\"article\", {\n      key: area.id,\n      class: \"card area-card\"\n    }, [_createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"h3\", _hoisted_6, _toDisplayString(area.name), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_7, _toDisplayString(area.address), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"span\", null, \"Lat: \" + _toDisplayString(area.latitude), 1 /* TEXT */), _createElementVNode(\"span\", null, \"Lng: \" + _toDisplayString(area.longitude), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"span\", null, \"Capacity: \" + _toDisplayString(area.capacity ?? '—'), 1 /* TEXT */), _createElementVNode(\"span\", null, \"Occupancy: \" + _toDisplayString(area.current_occupancy ?? 0), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"span\", null, [_cache[0] || (_cache[0] = _createTextVNode(\"Status: \", -1 /* CACHED */)), _createElementVNode(\"strong\", null, _toDisplayString(area.status ?? 'unknown'), 1 /* TEXT */)]), _createElementVNode(\"span\", null, \"Score: \" + _toDisplayString(area.final_score ?? '—'), 1 /* TEXT */)])]), _createElementVNode(\"div\", _hoisted_11, [_createVNode(_component_router_link, {\n      to: `/resident_pages/evacuation-areas/${area.id}`,\n      class: \"btn btn-primary\"\n    }, {\n      default: _withCtx(() => [...(_cache[1] || (_cache[1] = [_createTextVNode(\"View Details\", -1 /* CACHED */)]))]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"to\"])])]);\n  }), 128 /* KEYED_FRAGMENT */))])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","$setup","loading","_hoisted_2","error","_hoisted_3","_toDisplayString","_hoisted_4","_Fragment","_renderList","areas","area","key","id","_hoisted_5","_hoisted_6","name","_hoisted_7","address","_hoisted_8","latitude","longitude","_hoisted_9","capacity","current_occupancy","_hoisted_10","status","final_score","_hoisted_11","_createVNode","_component_router_link","to","_cache"],"sources":["C:\\VUEprojects\\crud-app\\src\\pages\\resident_pages\\EvacuationAreaList.vue"],"sourcesContent":["<template>\r\n  <div class=\"evac-list\">\r\n    <h1>Evacuation Areas</h1>\r\n    <p class=\"subtitle\">All evacuation areas — live data from System‑E</p>\r\n\r\n    <div v-if=\"loading\" class=\"center\">Loading evacuation areas…</div>\r\n    <div v-else-if=\"error\" class=\"center error\">{{ error }}</div>\r\n\r\n    <div class=\"grid\">\r\n      <article v-for=\"area in areas\" :key=\"area.id\" class=\"card area-card\">\r\n        <div class=\"card-body\">\r\n          <h3 class=\"area-name\">{{ area.name }}</h3>\r\n          <p class=\"area-address\">{{ area.address }}</p>\r\n          <div class=\"meta\">\r\n            <span>Lat: {{ area.latitude }}</span>\r\n            <span>Lng: {{ area.longitude }}</span>\r\n          </div>\r\n          <div class=\"meta\">\r\n            <span>Capacity: {{ area.capacity ?? '—' }}</span>\r\n            <span>Occupancy: {{ area.current_occupancy ?? 0 }}</span>\r\n          </div>\r\n          <div class=\"meta\">\r\n            <span>Status: <strong>{{ area.status ?? 'unknown' }}</strong></span>\r\n            <span>Score: {{ area.final_score ?? '—' }}</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"card-footer\">\r\n          <router-link :to=\"`/resident_pages/evacuation-areas/${area.id}`\" class=\"btn btn-primary\">View Details</router-link>\r\n        </div>\r\n      </article>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, inject } from 'vue';\r\nconst residentAxios = inject('residentAxios', null);\r\nconst axiosFallback = (await import('axios')).default;\r\n\r\nconst areas = ref([]);\r\nconst loading = ref(true);\r\nconst error = ref(null);\r\n\r\nasync function fetchAreas() {\r\n  loading.value = true;\r\n  error.value = null;\r\n  try {\r\n    const http = residentAxios || axiosFallback;\r\n    const res = await http.get('/evacuation-areas');\r\n    areas.value = res.data || [];\r\n  } catch (e) {\r\n    console.error(e);\r\n    error.value = e.response?.data?.message || e.message || 'Failed to load evacuation areas';\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n}\r\n\r\nonMounted(fetchAreas);\r\n</script>\r\n\r\n<style scoped>\r\n.evac-list { padding: 1rem; max-width: 1100px; margin: 0 auto; }\r\n.subtitle { color: #666; margin-bottom: 1rem; }\r\n.center { text-align: center; padding: 1rem; }\r\n.grid { display: grid; grid-template-columns: repeat(auto-fill,minmax(260px,1fr)); gap: 1rem; }\r\n.area-card { display:flex; flex-direction:column; justify-content:space-between; padding: 0; height: 220px; }\r\n.card { background: #fff; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.06); padding: 0; }\r\n.card-body { padding: 12px; }\r\n.area-name { margin: 0 0 6px 0; }\r\n.area-address { color: #666; margin: 0 0 8px 0; font-size: 0.95rem; }\r\n.meta { display:flex; gap: 0.75rem; font-size: 0.9rem; color:#444; margin-bottom:6px; }\r\n.card-footer { padding: 12px; border-top: 1px solid #f0f0f0; display:flex; justify-content:flex-end; }\r\n.btn { padding: 0.5rem 0.9rem; border-radius:6px; text-decoration:none; color:#fff; background:#667eea; }\r\n.btn-primary { background:#667eea; }\r\n</style>\r\n"],"mappings":";;EACOA,KAAK,EAAC;AAAW;;;EAIAA,KAAK,EAAC;;;;EACHA,KAAK,EAAC;;;EAExBA,KAAK,EAAC;AAAM;;EAERA,KAAK,EAAC;AAAW;;EAChBA,KAAK,EAAC;AAAW;;EAClBA,KAAK,EAAC;AAAc;;EAClBA,KAAK,EAAC;AAAM;;EAIZA,KAAK,EAAC;AAAM;;EAIZA,KAAK,EAAC;AAAM;;EAKdA,KAAK,EAAC;AAAa;;;uBAzB9BC,mBAAA,CA8BM,OA9BNC,UA8BM,G,0BA7BJC,mBAAA,CAAyB,YAArB,kBAAgB,qB,0BACpBA,mBAAA,CAAsE;IAAnEH,KAAK,EAAC;EAAU,GAAC,gDAA8C,qBAEvDI,MAAA,CAAAC,OAAO,I,cAAlBJ,mBAAA,CAAkE,OAAlEK,UAAkE,EAA/B,2BAAyB,KAC5CF,MAAA,CAAAG,KAAK,I,cAArBN,mBAAA,CAA6D,OAA7DO,UAA6D,EAAAC,gBAAA,CAAdL,MAAA,CAAAG,KAAK,oB,mCAEpDJ,mBAAA,CAsBM,OAtBNO,UAsBM,I,kBArBJT,mBAAA,CAoBUU,SAAA,QAAAC,WAAA,CApBcR,MAAA,CAAAS,KAAK,EAAbC,IAAI;yBAApBb,mBAAA,CAoBU;MApBsBc,GAAG,EAAED,IAAI,CAACE,EAAE;MAAEhB,KAAK,EAAC;QAClDG,mBAAA,CAeM,OAfNc,UAeM,GAdJd,mBAAA,CAA0C,MAA1Ce,UAA0C,EAAAT,gBAAA,CAAjBK,IAAI,CAACK,IAAI,kBAClChB,mBAAA,CAA8C,KAA9CiB,UAA8C,EAAAX,gBAAA,CAAnBK,IAAI,CAACO,OAAO,kBACvClB,mBAAA,CAGM,OAHNmB,UAGM,GAFJnB,mBAAA,CAAqC,cAA/B,OAAK,GAAAM,gBAAA,CAAGK,IAAI,CAACS,QAAQ,kBAC3BpB,mBAAA,CAAsC,cAAhC,OAAK,GAAAM,gBAAA,CAAGK,IAAI,CAACU,SAAS,iB,GAE9BrB,mBAAA,CAGM,OAHNsB,UAGM,GAFJtB,mBAAA,CAAiD,cAA3C,YAAU,GAAAM,gBAAA,CAAGK,IAAI,CAACY,QAAQ,yBAChCvB,mBAAA,CAAyD,cAAnD,aAAW,GAAAM,gBAAA,CAAGK,IAAI,CAACa,iBAAiB,sB,GAE5CxB,mBAAA,CAGM,OAHNyB,WAGM,GAFJzB,mBAAA,CAAoE,e,2CAA9D,UAAQ,qBAAAA,mBAAA,CAA+C,gBAAAM,gBAAA,CAApCK,IAAI,CAACe,MAAM,8B,GACpC1B,mBAAA,CAAiD,cAA3C,SAAO,GAAAM,gBAAA,CAAGK,IAAI,CAACgB,WAAW,wB,KAGpC3B,mBAAA,CAEM,OAFN4B,WAEM,GADJC,YAAA,CAAmHC,sBAAA;MAArGC,EAAE,sCAAsCpB,IAAI,CAACE,EAAE;MAAIhB,KAAK,EAAC;;wBAAkB,MAAY,KAAAmC,MAAA,QAAAA,MAAA,O,iBAAZ,cAAY,mB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}