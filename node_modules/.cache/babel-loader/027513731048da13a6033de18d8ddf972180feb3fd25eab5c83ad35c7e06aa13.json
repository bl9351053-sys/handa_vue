{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { reactive, ref, onMounted, inject } from 'vue';\nimport axios from 'axios';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport { useRouter } from 'vue-router';\nexport default {\n  __name: 'PredictionCreate',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const router = useRouter();\n    const baseUrl = inject('baseUrl', '');\n    const form = reactive({\n      disaster_type: '',\n      description: '',\n      location_name: '',\n      risk_level: null,\n      predicted_recovery_days: null,\n      predicted_at: '',\n      affected_areas: '',\n      latitude: '',\n      longitude: ''\n    });\n    const errors = reactive({});\n    const generalError = ref('');\n    const submitting = ref(false);\n    const loading = ref(false);\n    let map, marker;\n    onMounted(() => {\n      const defaultLat = 14.5995;\n      const defaultLng = 120.9842;\n      map = L.map('map_create').setView([defaultLat, defaultLng], 11);\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);\n      marker = L.marker([defaultLat, defaultLng], {\n        draggable: true\n      }).addTo(map);\n      marker.on('dragend', () => {\n        const pos = marker.getLatLng();\n        form.latitude = pos.lat.toFixed(6);\n        form.longitude = pos.lng.toFixed(6);\n      });\n      map.on('click', e => {\n        marker.setLatLng(e.latlng);\n        form.latitude = e.latlng.lat.toFixed(6);\n        form.longitude = e.latlng.lng.toFixed(6);\n      });\n    });\n    async function submit() {\n      submitting.value = true;\n      generalError.value = '';\n      Object.keys(errors).forEach(k => delete errors[k]);\n      try {\n        await axios.post(`${baseUrl}/disaster-predictions`, {\n          ...form\n        });\n        router.push('/predictions');\n      } catch (err) {\n        if (err.response?.status === 422) Object.assign(errors, err.response.data.errors || {});else generalError.value = err.response?.data?.message || 'Failed to create prediction.';\n      } finally {\n        submitting.value = false;\n      }\n    }\n    const __returned__ = {\n      router,\n      baseUrl,\n      form,\n      errors,\n      generalError,\n      submitting,\n      loading,\n      get map() {\n        return map;\n      },\n      set map(v) {\n        map = v;\n      },\n      get marker() {\n        return marker;\n      },\n      set marker(v) {\n        marker = v;\n      },\n      submit,\n      reactive,\n      ref,\n      onMounted,\n      inject,\n      get axios() {\n        return axios;\n      },\n      get L() {\n        return L;\n      },\n      get useRouter() {\n        return useRouter;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["reactive","ref","onMounted","inject","axios","L","useRouter","router","baseUrl","form","disaster_type","description","location_name","risk_level","predicted_recovery_days","predicted_at","affected_areas","latitude","longitude","errors","generalError","submitting","loading","map","marker","defaultLat","defaultLng","setView","tileLayer","addTo","draggable","on","pos","getLatLng","lat","toFixed","lng","e","setLatLng","latlng","submit","value","Object","keys","forEach","k","post","push","err","response","status","assign","data","message"],"sources":["C:/VUEprojects/crud-app/src/pages/PredictionCreate.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <!-- Header -->\r\n    <div class=\"header\">\r\n      <div>\r\n        <h1>Create Prediction</h1>\r\n        <p>Add a new disaster prediction</p>\r\n      </div>\r\n      <router-link to=\"/predictions\" class=\"back-link\">\r\n        <span class=\"arrow\">&#8592;</span> Back to Predictions\r\n      </router-link>\r\n    </div>\r\n\r\n```\r\n<!-- Loading -->\r\n<div v-if=\"loading\" class=\"loading-card\">\r\n  <div class=\"spinner\"></div>\r\n  <span>Loading...</span>\r\n</div>\r\n\r\n<!-- Form Card -->\r\n<div v-else class=\"card\">\r\n  <!-- Error Messages -->\r\n  <div v-if=\"generalError\" class=\"error-card mb-6\">\r\n    <p>{{ generalError }}</p>\r\n  </div>\r\n\r\n  <form @submit.prevent=\"submit\" class=\"space-y-6\">\r\n    <!-- Disaster Type & Description -->\r\n    <div>\r\n      <label class=\"label\">Disaster Type <span class=\"text-red-500\">*</span></label>\r\n      <input v-model=\"form.disaster_type\" type=\"text\" required class=\"input-field\" />\r\n      <p v-if=\"errors.disaster_type\" class=\"error-text\">{{ errors.disaster_type }}</p>\r\n    </div>\r\n    <div>\r\n      <label class=\"label\">Description</label>\r\n      <textarea v-model=\"form.description\" rows=\"3\" class=\"input-field\"></textarea>\r\n      <p v-if=\"errors.description\" class=\"error-text\">{{ errors.description }}</p>\r\n    </div>\r\n\r\n    <!-- Location, Risk, Recovery -->\r\n    <div class=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n      <div>\r\n        <label class=\"label\">Location Name</label>\r\n        <input v-model=\"form.location_name\" class=\"input-field\" />\r\n        <p v-if=\"errors.location_name\" class=\"error-text\">{{ errors.location_name }}</p>\r\n      </div>\r\n      <div>\r\n        <label class=\"label\">Risk Level</label>\r\n        <input type=\"number\" v-model.number=\"form.risk_level\" min=\"1\" max=\"10\" class=\"input-field\" />\r\n        <p v-if=\"errors.risk_level\" class=\"error-text\">{{ errors.risk_level }}</p>\r\n      </div>\r\n      <div>\r\n        <label class=\"label\">Estimated Recovery Days</label>\r\n        <input type=\"number\" v-model.number=\"form.predicted_recovery_days\" min=\"0\" class=\"input-field\" />\r\n        <p v-if=\"errors.predicted_recovery_days\" class=\"error-text\">{{ errors.predicted_recovery_days }}</p>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Predicted At -->\r\n    <div>\r\n      <label class=\"label\">Predicted At</label>\r\n      <input type=\"datetime-local\" v-model=\"form.predicted_at\" class=\"input-field\" />\r\n      <p v-if=\"errors.predicted_at\" class=\"error-text\">{{ errors.predicted_at }}</p>\r\n    </div>\r\n\r\n    <!-- Map -->\r\n    <div>\r\n      <label class=\"label\">Select Location on Map</label>\r\n      <div id=\"map_create\" class=\"h-72 mb-2 border border-gray-300 rounded-lg shadow-inner\"></div>\r\n    </div>\r\n\r\n    <!-- Affected Areas -->\r\n    <div>\r\n      <label class=\"label\">Affected Areas</label>\r\n      <input v-model=\"form.affected_areas\" class=\"input-field\" />\r\n      <p v-if=\"errors.affected_areas\" class=\"error-text\">{{ errors.affected_areas }}</p>\r\n    </div>\r\n\r\n    <!-- Actions -->\r\n    <div class=\"form-actions\">\r\n      <router-link to=\"/predictions\" class=\"cancel-btn\">Cancel</router-link>\r\n      <button type=\"submit\" :disabled=\"submitting\" class=\"submit-btn\">\r\n        <span v-if=\"!submitting\">Create Prediction</span>\r\n        <span v-else>Creating...</span>\r\n      </button>\r\n    </div>\r\n  </form>\r\n</div>\r\n```\r\n\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { reactive, ref, onMounted, inject } from 'vue'\r\nimport axios from 'axios'\r\nimport L from 'leaflet'\r\nimport 'leaflet/dist/leaflet.css'\r\nimport { useRouter } from 'vue-router'\r\n\r\nconst router = useRouter()\r\nconst baseUrl = inject('baseUrl', '')\r\nconst form = reactive({\r\n  disaster_type: '',\r\n  description: '',\r\n  location_name: '',\r\n  risk_level: null,\r\n  predicted_recovery_days: null,\r\n  predicted_at: '',\r\n  affected_areas: '',\r\n  latitude: '',\r\n  longitude: ''\r\n})\r\nconst errors = reactive({})\r\nconst generalError = ref('')\r\nconst submitting = ref(false)\r\nconst loading = ref(false)\r\n\r\nlet map, marker\r\n\r\nonMounted(() => {\r\n  const defaultLat = 14.5995\r\n  const defaultLng = 120.9842\r\n  map = L.map('map_create').setView([defaultLat, defaultLng], 11)\r\n  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map)\r\n  marker = L.marker([defaultLat, defaultLng], { draggable: true }).addTo(map)\r\n  marker.on('dragend', () => {\r\n    const pos = marker.getLatLng()\r\n    form.latitude = pos.lat.toFixed(6)\r\n    form.longitude = pos.lng.toFixed(6)\r\n  })\r\n  map.on('click', e => {\r\n    marker.setLatLng(e.latlng)\r\n    form.latitude = e.latlng.lat.toFixed(6)\r\n    form.longitude = e.latlng.lng.toFixed(6)\r\n  })\r\n})\r\n\r\nasync function submit() {\r\n  submitting.value = true\r\n  generalError.value = ''\r\n  Object.keys(errors).forEach(k => delete errors[k])\r\n  try {\r\n    await axios.post(`${baseUrl}/disaster-predictions`, { ...form })\r\n    router.push('/predictions')\r\n  } catch (err) {\r\n    if (err.response?.status === 422) Object.assign(errors, err.response.data.errors || {})\r\n    else generalError.value = err.response?.data?.message || 'Failed to create prediction.'\r\n  } finally {\r\n    submitting.value = false\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.container { max-width: 900px; margin: 0 auto; padding: 20px; }\r\n\r\n/* Header */\r\n.header { display:flex; justify-content:space-between; align-items:center; margin-bottom:25px; }\r\n.header h1 { font-size:2.5rem; font-weight:bold; background:linear-gradient(90deg,#4f46e5,#06b6d4); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }\r\n.header p { color:#374151; margin-top:4px; }\r\n.back-link { font-weight:500; color:#4f46e5; display:flex; align-items:center; gap:5px; }\r\n.back-link:hover { text-decoration:underline; }\r\n\r\n/* Card */\r\n.card { background:linear-gradient(135deg, #f9f9ff, #ffffff); border-radius:12px; padding:30px; box-shadow:0 6px 20px rgba(0,0,0,0.08); }\r\n\r\n/* Loading & Error */\r\n.loading-card, .error-card { background:#fff; padding:30px; border-radius:12px; text-align:center; box-shadow:0 4px 15px rgba(0,0,0,0.05); display:flex; flex-direction:column; align-items:center; gap:10px; }\r\n.spinner { border:4px solid #e5e7eb; border-top:4px solid #4f46e5; border-radius:50%; width:36px; height:36px; animation:spin 1s linear infinite; }\r\n@keyframes spin {0%{transform:rotate(0deg);}100%{transform:rotate(360deg);} }\r\n.error-text { color:#b91c1c; font-size:0.875rem; margin-top:4px; }\r\n\r\n/* Form */\r\n.label { display:block; font-size:0.875rem; font-weight:500; color:#374151; margin-bottom:6px; }\r\n.input-field { width:100%; padding:10px 12px; border:1px solid #d1d5db; border-radius:8px; outline:none; transition:0.2s; }\r\n.input-field:focus { border-color:#4f46e5; box-shadow:0 0 0 2px rgba(79,70,229,0.2); }\r\n\r\n/* Actions */\r\n.form-actions { display:flex; justify:end; gap:12px; margin-top:16px; }\r\n.cancel-btn { padding:10px 16px; border:1px solid #d1d5db; border-radius:8px; font-weight:500; color:#374151; text-align:center; }\r\n.cancel-btn:hover { background:#f9fafb; }\r\n.submit-btn { background:#4f46e5; color:#fff; padding:10px 16px; border-radius:8px; font-weight:500; transition:0.2s; }\r\n.submit-btn:hover { background:#4338ca; }\r\n.submit-btn:disabled { opacity:0.6; cursor:not-allowed; }\r\n\r\n/* Map */\r\n#map_create { border-radius:12px; }\r\n</style>\r\n\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}