{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, vModelCheckbox as _vModelCheckbox, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"min-h-screen flex items-center justify-center p-4\",\n  style: {\n    \"background\": \"linear-gradient(135deg, #1e3a8a 0%, #1e40af 50%, #2563eb 100%)\"\n  }\n};\nconst _hoisted_2 = {\n  class: \"login-card w-full max-w-md p-10 rounded-2xl shadow-xl bg-white/95\"\n};\nconst _hoisted_3 = {\n  key: 0,\n  class: \"bg-red-50 border-l-4 border-red-500 text-red-800 px-4 py-3 rounded mb-6\"\n};\nconst _hoisted_4 = {\n  class: \"text-sm\"\n};\nconst _hoisted_5 = {\n  key: 0,\n  class: \"text-sm text-red-600 mt-1\"\n};\nconst _hoisted_6 = {\n  key: 0,\n  class: \"text-sm text-red-600 mt-1\"\n};\nconst _hoisted_7 = {\n  class: \"flex items-center\"\n};\nconst _hoisted_8 = [\"disabled\"];\nconst _hoisted_9 = {\n  key: 0\n};\nconst _hoisted_10 = {\n  key: 1\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[6] || (_cache[6] = _createElementVNode(\"div\", {\n    class: \"mb-8 text-center\"\n  }, [_createElementVNode(\"h1\", {\n    class: \"text-2xl font-semibold text-gray-900 mb-1\"\n  }, \"Sign in to System-E\"), _createElementVNode(\"p\", {\n    class: \"text-sm text-gray-600\"\n  }, \"Enter your credentials to access the admin panel\")], -1 /* CACHED */)), $setup.generalError ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_createElementVNode(\"p\", _hoisted_4, _toDisplayString($setup.generalError), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"form\", {\n    onSubmit: _withModifiers($setup.submit, [\"prevent\"]),\n    class: \"space-y-5\"\n  }, [_createElementVNode(\"div\", null, [_cache[3] || (_cache[3] = _createElementVNode(\"label\", {\n    class: \"block text-sm font-medium text-gray-700 mb-2\",\n    for: \"identifier\"\n  }, \"Email or Government ID\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    id: \"identifier\",\n    name: \"identifier\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.form.identifier = $event),\n    required: \"\",\n    class: \"input-field w-full px-4 py-3 border rounded-lg\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.form.identifier]]), $setup.errors.email || $setup.errors.gov_id ? (_openBlock(), _createElementBlock(\"p\", _hoisted_5, _toDisplayString($setup.errors.email || $setup.errors.gov_id), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", null, [_cache[4] || (_cache[4] = _createElementVNode(\"label\", {\n    class: \"block text-sm font-medium text-gray-700 mb-2\",\n    for: \"password\"\n  }, \"Password\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    id: \"password\",\n    type: \"password\",\n    name: \"password\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.form.password = $event),\n    required: \"\",\n    class: \"input-field w-full px-4 py-3 border rounded-lg\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.form.password]]), $setup.errors.password ? (_openBlock(), _createElementBlock(\"p\", _hoisted_6, _toDisplayString($setup.errors.password), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_7, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"checkbox\",\n    id: \"remember\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.form.remember = $event),\n    class: \"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelCheckbox, $setup.form.remember]]), _cache[5] || (_cache[5] = _createElementVNode(\"label\", {\n    for: \"remember\",\n    class: \"ml-2 text-sm text-gray-700\"\n  }, \"Keep me signed in\", -1 /* CACHED */))]), _createElementVNode(\"div\", null, [_createElementVNode(\"button\", {\n    type: \"submit\",\n    disabled: $setup.submitting,\n    class: \"btn-login w-full text-white font-medium py-3 px-4 rounded-lg bg-blue-600 hover:bg-blue-700\"\n  }, [!$setup.submitting ? (_openBlock(), _createElementBlock(\"span\", _hoisted_9, \"Sign In\")) : (_openBlock(), _createElementBlock(\"span\", _hoisted_10, \"Signing in...\"))], 8 /* PROPS */, _hoisted_8)])], 32 /* NEED_HYDRATION */)])]);\n}","map":{"version":3,"names":["class","style","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","$setup","generalError","_hoisted_3","_hoisted_4","_toDisplayString","onSubmit","_withModifiers","submit","for","id","name","form","identifier","$event","required","errors","email","gov_id","_hoisted_5","type","password","_hoisted_6","_hoisted_7","remember","disabled","submitting","_hoisted_9","_hoisted_10"],"sources":["C:\\VUEprojects\\crud-app\\src\\views\\LoginView.vue"],"sourcesContent":["<template>\r\n  <div class=\"min-h-screen flex items-center justify-center p-4\" style=\"background: linear-gradient(135deg, #1e3a8a 0%, #1e40af 50%, #2563eb 100%);\">\r\n    <div class=\"login-card w-full max-w-md p-10 rounded-2xl shadow-xl bg-white/95\">\r\n      <div class=\"mb-8 text-center\">\r\n        <h1 class=\"text-2xl font-semibold text-gray-900 mb-1\">Sign in to System-E</h1>\r\n        <p class=\"text-sm text-gray-600\">Enter your credentials to access the admin panel</p>\r\n      </div>\r\n\r\n      <div v-if=\"generalError\" class=\"bg-red-50 border-l-4 border-red-500 text-red-800 px-4 py-3 rounded mb-6\">\r\n        <p class=\"text-sm\">{{ generalError }}</p>\r\n      </div>\r\n\r\n      <form @submit.prevent=\"submit\" class=\"space-y-5\">\r\n        <div>\r\n          <label class=\"block text-sm font-medium text-gray-700 mb-2\" for=\"identifier\">Email or Government ID</label>\r\n          <input id=\"identifier\" name=\"identifier\" v-model=\"form.identifier\" required class=\"input-field w-full px-4 py-3 border rounded-lg\" />\r\n          <p v-if=\"errors.email || errors.gov_id\" class=\"text-sm text-red-600 mt-1\">{{ errors.email || errors.gov_id }}</p>\r\n        </div>\r\n\r\n        <div>\r\n          <label class=\"block text-sm font-medium text-gray-700 mb-2\" for=\"password\">Password</label>\r\n          <input id=\"password\" type=\"password\" name=\"password\" v-model=\"form.password\" required class=\"input-field w-full px-4 py-3 border rounded-lg\" />\r\n          <p v-if=\"errors.password\" class=\"text-sm text-red-600 mt-1\">{{ errors.password }}</p>\r\n        </div>\r\n\r\n        <div class=\"flex items-center\">\r\n          <input type=\"checkbox\" id=\"remember\" v-model=\"form.remember\" class=\"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500\" />\r\n          <label for=\"remember\" class=\"ml-2 text-sm text-gray-700\">Keep me signed in</label>\r\n        </div>\r\n\r\n        <div>\r\n          <button type=\"submit\" :disabled=\"submitting\" class=\"btn-login w-full text-white font-medium py-3 px-4 rounded-lg bg-blue-600 hover:bg-blue-700\">\r\n            <span v-if=\"!submitting\">Sign In</span>\r\n            <span v-else>Signing in...</span>\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { reactive, ref, inject } from 'vue'\r\nimport axios from 'axios'\r\nimport { useRouter } from 'vue-router'\r\n\r\nconst router = useRouter()\r\nconst baseUrl = inject('baseUrl', '')\r\n\r\nconst form = reactive({\r\n  identifier: '', // email or gov_id\r\n  password: '',\r\n  remember: false\r\n})\r\n\r\nconst errors = reactive({})\r\nconst generalError = ref('')\r\nconst submitting = ref(false)\r\n\r\nasync function submit() {\r\n  submitting.value = true\r\n  generalError.value = ''\r\n  Object.keys(errors).forEach(k => delete errors[k])\r\n\r\n  try {\r\n    // Determine payload: backend accepts either email or gov_id\r\n    const payload = {};\r\n    if (form.identifier && form.identifier.includes('@')) {\r\n      payload.email = form.identifier\r\n    } else {\r\n      payload.gov_id = form.identifier\r\n    }\r\n    payload.password = form.password\r\n    payload.remember = form.remember\r\n\r\n    const res = await axios.post((baseUrl || '') + '/api/login', payload)\r\n    const token = res.data?.access_token || null\r\n    if (token) {\r\n      localStorage.setItem('token', token)\r\n      axios.defaults.headers.common['Authorization'] = `Bearer ${token}`\r\n    }\r\n\r\n    router.push({ name: 'Dashboard' })\r\n  } catch (err) {\r\n    if (err.response && err.response.status === 422) {\r\n      const respErrors = err.response.data.errors || {}\r\n      Object.assign(errors, respErrors)\r\n    } else if (err.response && err.response.data && err.response.data.message) {\r\n      generalError.value = err.response.data.message\r\n    } else {\r\n      generalError.value = 'Login failed. Please try again.'\r\n    }\r\n  } finally {\r\n    submitting.value = false\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.login-card { backdrop-filter: blur(6px); }\r\n.btn-login{ background: linear-gradient(90deg,#2563eb,#1e40af); }\r\n</style>\r\n"],"mappings":";;EACOA,KAAK,EAAC,mDAAmD;EAACC,KAAmF,EAAnF;IAAA;EAAA;;;EACxDD,KAAK,EAAC;AAAmE;;;EAMnDA,KAAK,EAAC;;;EAC1BA,KAAK,EAAC;AAAS;;;EAOwBA,KAAK,EAAC;;;;EAMpBA,KAAK,EAAC;;;EAG7BA,KAAK,EAAC;AAAmB;;;;;;;;;uBAxBpCE,mBAAA,CAqCM,OArCNC,UAqCM,GApCJC,mBAAA,CAmCM,OAnCNC,UAmCM,G,0BAlCJD,mBAAA,CAGM;IAHDJ,KAAK,EAAC;EAAkB,IAC3BI,mBAAA,CAA8E;IAA1EJ,KAAK,EAAC;EAA2C,GAAC,qBAAmB,GACzEI,mBAAA,CAAqF;IAAlFJ,KAAK,EAAC;EAAuB,GAAC,kDAAgD,E,qBAGxEM,MAAA,CAAAC,YAAY,I,cAAvBL,mBAAA,CAEM,OAFNM,UAEM,GADJJ,mBAAA,CAAyC,KAAzCK,UAAyC,EAAAC,gBAAA,CAAnBJ,MAAA,CAAAC,YAAY,iB,wCAGpCH,mBAAA,CAwBO;IAxBAO,QAAM,EAAAC,cAAA,CAAUN,MAAA,CAAAO,MAAM;IAAEb,KAAK,EAAC;MACnCI,mBAAA,CAIM,c,0BAHJA,mBAAA,CAA2G;IAApGJ,KAAK,EAAC,8CAA8C;IAACc,GAAG,EAAC;KAAa,wBAAsB,qB,gBACnGV,mBAAA,CAAqI;IAA9HW,EAAE,EAAC,YAAY;IAACC,IAAI,EAAC,YAAY;+DAAUV,MAAA,CAAAW,IAAI,CAACC,UAAU,GAAAC,MAAA;IAAEC,QAAQ,EAAR,EAAQ;IAACpB,KAAK,EAAC;iDAAhCM,MAAA,CAAAW,IAAI,CAACC,UAAU,E,GACxDZ,MAAA,CAAAe,MAAM,CAACC,KAAK,IAAIhB,MAAA,CAAAe,MAAM,CAACE,MAAM,I,cAAtCrB,mBAAA,CAAiH,KAAjHsB,UAAiH,EAAAd,gBAAA,CAApCJ,MAAA,CAAAe,MAAM,CAACC,KAAK,IAAIhB,MAAA,CAAAe,MAAM,CAACE,MAAM,oB,qCAG5GnB,mBAAA,CAIM,c,0BAHJA,mBAAA,CAA2F;IAApFJ,KAAK,EAAC,8CAA8C;IAACc,GAAG,EAAC;KAAW,UAAQ,qB,gBACnFV,mBAAA,CAA+I;IAAxIW,EAAE,EAAC,UAAU;IAACU,IAAI,EAAC,UAAU;IAACT,IAAI,EAAC,UAAU;+DAAUV,MAAA,CAAAW,IAAI,CAACS,QAAQ,GAAAP,MAAA;IAAEC,QAAQ,EAAR,EAAQ;IAACpB,KAAK,EAAC;iDAA9BM,MAAA,CAAAW,IAAI,CAACS,QAAQ,E,GAClEpB,MAAA,CAAAe,MAAM,CAACK,QAAQ,I,cAAxBxB,mBAAA,CAAqF,KAArFyB,UAAqF,EAAAjB,gBAAA,CAAtBJ,MAAA,CAAAe,MAAM,CAACK,QAAQ,oB,qCAGhFtB,mBAAA,CAGM,OAHNwB,UAGM,G,gBAFJxB,mBAAA,CAAyI;IAAlIqB,IAAI,EAAC,UAAU;IAACV,EAAE,EAAC,UAAU;+DAAUT,MAAA,CAAAW,IAAI,CAACY,QAAQ,GAAAV,MAAA;IAAEnB,KAAK,EAAC;qDAArBM,MAAA,CAAAW,IAAI,CAACY,QAAQ,E,6BAC3DzB,mBAAA,CAAkF;IAA3EU,GAAG,EAAC,UAAU;IAACd,KAAK,EAAC;KAA6B,mBAAiB,oB,GAG5EI,mBAAA,CAKM,cAJJA,mBAAA,CAGS;IAHDqB,IAAI,EAAC,QAAQ;IAAEK,QAAQ,EAAExB,MAAA,CAAAyB,UAAU;IAAE/B,KAAK,EAAC;OACpCM,MAAA,CAAAyB,UAAU,I,cAAvB7B,mBAAA,CAAuC,QAAA8B,UAAA,EAAd,SAAO,M,cAChC9B,mBAAA,CAAiC,QAAA+B,WAAA,EAApB,eAAa,G","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}