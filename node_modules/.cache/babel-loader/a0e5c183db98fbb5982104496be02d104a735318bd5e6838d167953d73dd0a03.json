{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"register-family\"\n};\nconst _hoisted_2 = {\n  class: \"card\"\n};\nconst _hoisted_3 = {\n  class: \"card-body\"\n};\nconst _hoisted_4 = {\n  class: \"form-row\"\n};\nconst _hoisted_5 = {\n  key: 0,\n  class: \"error-msg\"\n};\nconst _hoisted_6 = {\n  class: \"form-row\"\n};\nconst _hoisted_7 = {\n  key: 0,\n  class: \"error-msg\"\n};\nconst _hoisted_8 = {\n  class: \"form-row\"\n};\nconst _hoisted_9 = {\n  key: 0,\n  class: \"error-msg\"\n};\nconst _hoisted_10 = {\n  class: \"form-row\"\n};\nconst _hoisted_11 = {\n  key: 0,\n  class: \"error-msg\"\n};\nconst _hoisted_12 = {\n  class: \"form-row\"\n};\nconst _hoisted_13 = {\n  key: 0,\n  class: \"error-msg\"\n};\nconst _hoisted_14 = {\n  class: \"form-actions\"\n};\nconst _hoisted_15 = [\"disabled\"];\nconst _hoisted_16 = {\n  key: 0,\n  class: \"error-msg\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[11] || (_cache[11] = _createElementVNode(\"div\", {\n    class: \"card-header\"\n  }, \"Register My Family\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"form\", {\n    onSubmit: _withModifiers($setup.submit, [\"prevent\"])\n  }, [_createElementVNode(\"div\", _hoisted_4, [_cache[5] || (_cache[5] = _createElementVNode(\"label\", null, \"Family Head Name\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.form.family_head_name = $event),\n    type: \"text\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.form.family_head_name]]), $setup.errors.family_head_name ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, _toDisplayString($setup.errors.family_head_name[0]), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_6, [_cache[6] || (_cache[6] = _createElementVNode(\"label\", null, \"Total Members\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.form.total_members = $event),\n    type: \"number\",\n    min: \"1\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.form.total_members, void 0, {\n    number: true\n  }]]), $setup.errors.total_members ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, _toDisplayString($setup.errors.total_members[0]), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_8, [_cache[7] || (_cache[7] = _createElementVNode(\"label\", null, \"Contact Number\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.form.contact_number = $event),\n    type: \"text\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.form.contact_number]]), $setup.errors.contact_number ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, _toDisplayString($setup.errors.contact_number[0]), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_10, [_cache[8] || (_cache[8] = _createElementVNode(\"label\", null, \"Address\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.form.address = $event),\n    type: \"text\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.form.address]]), $setup.errors.address ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, _toDisplayString($setup.errors.address[0]), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_12, [_cache[9] || (_cache[9] = _createElementVNode(\"label\", null, \"Special Needs\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $setup.form.special_needs = $event),\n    type: \"text\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.form.special_needs]]), $setup.errors.special_needs ? (_openBlock(), _createElementBlock(\"div\", _hoisted_13, _toDisplayString($setup.errors.special_needs[0]), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_14, [_createElementVNode(\"button\", {\n    class: \"btn btn-primary\",\n    disabled: $setup.submitting\n  }, \"Submit\", 8 /* PROPS */, _hoisted_15), _createVNode(_component_router_link, {\n    to: `/resident_pages/evacuation-areas/${$setup.id}`,\n    class: \"btn btn-secondary\"\n  }, {\n    default: _withCtx(() => [...(_cache[10] || (_cache[10] = [_createTextVNode(\"Cancel\", -1 /* CACHED */)]))]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"to\"])])], 32 /* NEED_HYDRATION */), $setup.serverError ? (_openBlock(), _createElementBlock(\"div\", _hoisted_16, _toDisplayString($setup.serverError), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)])])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","onSubmit","_withModifiers","$setup","submit","_hoisted_4","form","family_head_name","$event","type","errors","_hoisted_5","_toDisplayString","_hoisted_6","total_members","min","number","_hoisted_7","_hoisted_8","contact_number","_hoisted_9","_hoisted_10","address","_hoisted_11","_hoisted_12","special_needs","_hoisted_13","_hoisted_14","disabled","submitting","_hoisted_15","_createVNode","_component_router_link","to","id","_cache","serverError","_hoisted_16"],"sources":["C:\\VUEprojects\\crud-app\\src\\pages\\resident_pages\\RegisterFamily.vue"],"sourcesContent":["<template>\r\n  <div class=\"register-family\">\r\n    <div class=\"card\">\r\n      <div class=\"card-header\">Register My Family</div>\r\n      <div class=\"card-body\">\r\n        <form @submit.prevent=\"submit\">\r\n          <div class=\"form-row\">\r\n            <label>Family Head Name</label>\r\n            <input v-model=\"form.family_head_name\" type=\"text\" />\r\n            <div v-if=\"errors.family_head_name\" class=\"error-msg\">{{ errors.family_head_name[0] }}</div>\r\n          </div>\r\n\r\n          <div class=\"form-row\">\r\n            <label>Total Members</label>\r\n            <input v-model.number=\"form.total_members\" type=\"number\" min=\"1\" />\r\n            <div v-if=\"errors.total_members\" class=\"error-msg\">{{ errors.total_members[0] }}</div>\r\n          </div>\r\n\r\n          <div class=\"form-row\">\r\n            <label>Contact Number</label>\r\n            <input v-model=\"form.contact_number\" type=\"text\" />\r\n            <div v-if=\"errors.contact_number\" class=\"error-msg\">{{ errors.contact_number[0] }}</div>\r\n          </div>\r\n\r\n          <div class=\"form-row\">\r\n            <label>Address</label>\r\n            <input v-model=\"form.address\" type=\"text\" />\r\n            <div v-if=\"errors.address\" class=\"error-msg\">{{ errors.address[0] }}</div>\r\n          </div>\r\n\r\n          <div class=\"form-row\">\r\n            <label>Special Needs</label>\r\n            <input v-model=\"form.special_needs\" type=\"text\" />\r\n            <div v-if=\"errors.special_needs\" class=\"error-msg\">{{ errors.special_needs[0] }}</div>\r\n          </div>\r\n\r\n          <div class=\"form-actions\">\r\n            <button class=\"btn btn-primary\" :disabled=\"submitting\">Submit</button>\r\n            <router-link :to=\"`/resident_pages/evacuation-areas/${id}`\" class=\"btn btn-secondary\">Cancel</router-link>\r\n          </div>\r\n        </form>\r\n        <div v-if=\"serverError\" class=\"error-msg\">{{ serverError }}</div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, inject } from 'vue';\r\nimport { useRoute, useRouter } from 'vue-router';\r\nconst route = useRoute();\r\nconst router = useRouter();\r\nconst id = route.params.id;\r\nconst residentAxios = inject('residentAxios', null);\r\nconst axiosFallback = (await import('axios')).default;\r\n\r\nconst form = ref({\r\n  family_head_name: '',\r\n  total_members: 1,\r\n  contact_number: '',\r\n  address: '',\r\n  special_needs: ''\r\n});\r\nconst errors = ref({});\r\nconst serverError = ref('');\r\nconst submitting = ref(false);\r\n\r\nasync function submit() {\r\n  submitting.value = true;\r\n  errors.value = {};\r\n  serverError.value = '';\r\n  try {\r\n    const http = residentAxios || axiosFallback;\r\n    const res = await http.post(`/evacuation-areas/${id}/go`, form.value);\r\n    // success -> redirect to area detail\r\n    router.push(`/resident_pages/evacuation-areas/${id}`);\r\n  } catch (e) {\r\n    if (e.response && e.response.status === 422) {\r\n      errors.value = e.response.data.errors || e.response.data || {};\r\n    } else {\r\n      serverError.value = e.response?.data?.message || e.message || 'Failed to register';\r\n    }\r\n  } finally {\r\n    submitting.value = false;\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.register-family { padding: 1rem; max-width: 700px; margin: 0 auto; }\r\n.form-row { margin-bottom: 0.75rem; }\r\nlabel { display:block; font-weight:600; margin-bottom:4px; }\r\ninput[type=\"text\"], input[type=\"number\"] { width:100%; padding:8px; border:1px solid #e6edf3; border-radius:6px; }\r\n.form-actions { display:flex; gap:8px; margin-top:12px; }\r\n.btn { padding:8px 12px; border-radius:6px; color:#fff; text-decoration:none; border:none; cursor:pointer; }\r\n.btn-primary { background:#667eea; }\r\n.btn-secondary { background:#6c757d; }\r\n.error-msg { color:#b00020; font-size:0.9rem; margin-top:6px; }\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}