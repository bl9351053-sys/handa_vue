{"ast":null,"code":"import { withAsyncContext as _withAsyncContext } from 'vue';\nimport { ref, onMounted, inject } from 'vue';\nimport { useRoute } from 'vue-router';\nexport default {\n  __name: 'EvacuationAreaDetail',\n  async setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    let __temp, __restore;\n    const route = useRoute();\n    const residentAxios = inject('residentAxios', null);\n    const axiosFallback = ([__temp, __restore] = _withAsyncContext(() => import('axios')), __temp = await __temp, __restore(), __temp).default;\n    const area = ref({});\n    const families = ref([]);\n    const loading = ref(true);\n    const error = ref(null);\n    async function fetchArea() {\n      loading.value = true;\n      error.value = null;\n      try {\n        const id = route.params.id;\n        const http = residentAxios || axiosFallback;\n        const res = await http.get(`/evacuation-areas/${id}`);\n        // API may return object or wrapper; try to detect\n        const payload = res.data;\n        area.value = (payload.evacuationArea ?? payload) || {};\n        families.value = payload.families ?? payload.evacuationArea?.families ?? [];\n      } catch (e) {\n        console.error(e);\n        error.value = e.response?.data?.message || e.message || 'Failed to load area';\n      } finally {\n        loading.value = false;\n      }\n    }\n    onMounted(fetchArea);\n    const __returned__ = {\n      route,\n      residentAxios,\n      axiosFallback,\n      area,\n      families,\n      loading,\n      error,\n      fetchArea,\n      ref,\n      onMounted,\n      inject,\n      get useRoute() {\n        return useRoute;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","inject","useRoute","route","residentAxios","axiosFallback","__temp","__restore","_withAsyncContext","default","area","families","loading","error","fetchArea","value","id","params","http","res","get","payload","data","evacuationArea","e","console","response","message"],"sources":["C:/VUEprojects/crud-app/src/pages/resident_pages/EvacuationAreaDetail.vue"],"sourcesContent":["<template>\r\n  <div class=\"evac-detail\">\r\n    <div class=\"card\">\r\n      <div class=\"card-header\">{{ area.name || 'Evacuation Area' }}</div>\r\n      <div class=\"card-body\">\r\n        <div class=\"row\">\r\n          <div class=\"col\">\r\n            <h2>{{ area.name }}</h2>\r\n            <p class=\"muted\">{{ area.address }}</p>\r\n            <div class=\"stats\">\r\n              <div>Capacity: <strong>{{ area.capacity ?? '—' }}</strong></div>\r\n              <div>Occupancy: <strong>{{ area.current_occupancy ?? 0 }}</strong></div>\r\n              <div>Status: <strong>{{ area.status ?? 'unknown' }}</strong></div>\r\n            </div>\r\n            <h3>Hazard Scores</h3>\r\n            <div class=\"scores\">\r\n              <div>Risk: {{ area.risk_score ?? '—' }}</div>\r\n              <div>Distance: {{ area.distance_score ?? '—' }}</div>\r\n              <div>Capacity: {{ area.capacity_score ?? '—' }}</div>\r\n              <div>Final: {{ area.final_score ?? '—' }}</div>\r\n            </div>\r\n            <div style=\"margin-top:12px\">\r\n              <router-link :to=\"`/resident_pages/evacuation-areas/${area.id}/register-family`\" class=\"btn btn-primary\">Register My Family</router-link>\r\n            </div>\r\n          </div>\r\n          <div class=\"col map-box\">\r\n            <div class=\"map-placeholder\">\r\n              <div>Map placeholder</div>\r\n              <div class=\"coords\">{{ area.latitude }}, {{ area.longitude }}</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div v-if=\"families && families.length\" class=\"card mt-12\">\r\n      <div class=\"card-header\">Families Currently Inside</div>\r\n      <div class=\"card-body\">\r\n        <ul class=\"list\">\r\n          <li v-for=\"f in families\" :key=\"f.id\">\r\n            <strong>{{ f.family_head_name }}</strong> — {{ f.total_members }} members\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, inject } from 'vue';\r\nimport { useRoute } from 'vue-router';\r\nconst route = useRoute();\r\nconst residentAxios = inject('residentAxios', null);\r\nconst axiosFallback = (await import('axios')).default;\r\n\r\nconst area = ref({});\r\nconst families = ref([]);\r\nconst loading = ref(true);\r\nconst error = ref(null);\r\n\r\nasync function fetchArea() {\r\n  loading.value = true;\r\n  error.value = null;\r\n  try {\r\n    const id = route.params.id;\r\n    const http = residentAxios || axiosFallback;\r\n    const res = await http.get(`/evacuation-areas/${id}`);\r\n    // API may return object or wrapper; try to detect\r\n    const payload = res.data;\r\n    area.value = (payload.evacuationArea ?? payload) || {};\r\n    families.value = payload.families ?? payload.evacuationArea?.families ?? [];\r\n  } catch (e) {\r\n    console.error(e);\r\n    error.value = e.response?.data?.message || e.message || 'Failed to load area';\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n}\r\n\r\nonMounted(fetchArea);\r\n</script>\r\n\r\n<style scoped>\r\n.evac-detail { padding: 1rem; max-width: 1000px; margin: 0 auto; }\r\n.row { display:flex; gap:1rem; }\r\n.col { flex:1; }\r\n.map-box { max-width: 360px; }\r\n.map-placeholder { background:#f7fafc; border:1px dashed #dbeafe; padding: 12px; border-radius:8px; text-align:center; }\r\n.coords { margin-top:8px; color:#666; font-size:0.9rem; }\r\n.scores { display:flex; gap:1rem; flex-wrap:wrap; margin-top:8px; }\r\n.muted { color:#666; }\r\n.btn { padding: 0.5rem 0.9rem; border-radius:6px; text-decoration:none; color:#fff; background:#667eea; }\r\n.mt-12 { margin-top: 12px; }\r\n</style>\r\n"],"mappings":";AAiDA,SAASA,GAAG,EAAEC,SAAS,EAAEC,MAAM,QAAQ,KAAK;AAC5C,SAASC,QAAQ,QAAQ,YAAY;;;;;;;;IACrC,MAAMC,KAAK,GAAGD,QAAQ,CAAC,CAAC;IACxB,MAAME,aAAa,GAAGH,MAAM,CAAC,eAAe,EAAE,IAAI,CAAC;IACnD,MAAMI,aAAa,GAAG,CAAC,CAAAC,MAAA,EAAAC,SAAA,IAAAC,iBAAA,OAAM,MAAM,CAAC,OAAO,I,4CAAGC,OAAO;IAErD,MAAMC,IAAI,GAAGX,GAAG,CAAC,CAAC,CAAC,CAAC;IACpB,MAAMY,QAAQ,GAAGZ,GAAG,CAAC,EAAE,CAAC;IACxB,MAAMa,OAAO,GAAGb,GAAG,CAAC,IAAI,CAAC;IACzB,MAAMc,KAAK,GAAGd,GAAG,CAAC,IAAI,CAAC;IAEvB,eAAee,SAASA,CAAA,EAAG;MACzBF,OAAO,CAACG,KAAK,GAAG,IAAI;MACpBF,KAAK,CAACE,KAAK,GAAG,IAAI;MAClB,IAAI;QACF,MAAMC,EAAE,GAAGb,KAAK,CAACc,MAAM,CAACD,EAAE;QAC1B,MAAME,IAAI,GAAGd,aAAa,IAAIC,aAAa;QAC3C,MAAMc,GAAG,GAAG,MAAMD,IAAI,CAACE,GAAG,CAAC,qBAAqBJ,EAAE,EAAE,CAAC;QACrD;QACA,MAAMK,OAAO,GAAGF,GAAG,CAACG,IAAI;QACxBZ,IAAI,CAACK,KAAK,GAAG,CAACM,OAAO,CAACE,cAAc,IAAIF,OAAO,KAAK,CAAC,CAAC;QACtDV,QAAQ,CAACI,KAAK,GAAGM,OAAO,CAACV,QAAQ,IAAIU,OAAO,CAACE,cAAc,EAAEZ,QAAQ,IAAI,EAAE;MAC7E,CAAC,CAAC,OAAOa,CAAC,EAAE;QACVC,OAAO,CAACZ,KAAK,CAACW,CAAC,CAAC;QAChBX,KAAK,CAACE,KAAK,GAAGS,CAAC,CAACE,QAAQ,EAAEJ,IAAI,EAAEK,OAAO,IAAIH,CAAC,CAACG,OAAO,IAAI,qBAAqB;MAC/E,CAAC,SAAS;QACRf,OAAO,CAACG,KAAK,GAAG,KAAK;MACvB;IACF;IAEAf,SAAS,CAACc,SAAS,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}