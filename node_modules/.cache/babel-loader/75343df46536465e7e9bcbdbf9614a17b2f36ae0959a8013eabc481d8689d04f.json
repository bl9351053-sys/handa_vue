{"ast":null,"code":"import { ref, onMounted, inject } from 'vue';\nimport axios from 'axios';\nexport default {\n  __name: 'PredictionCreate',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const baseUrl = inject('baseUrl', '');\n    const predictions = ref([]);\n    function formatDate(dt) {\n      if (!dt) return 'N/A';\n      try {\n        return new Date(dt).toLocaleString();\n      } catch {\n        return dt;\n      }\n    }\n    async function load() {\n      try {\n        const res = await axios.get(`${baseUrl}/disaster-predictions`);\n        predictions.value = res.data?.data || res.data || [];\n      } catch (e) {\n        console.error('Failed to load predictions', e);\n      }\n    }\n    async function remove(id) {\n      if (!confirm('Delete this prediction?')) return;\n      try {\n        await axios.delete(`${baseUrl}/disaster-predictions/${id}`);\n        await load();\n      } catch (e) {\n        console.error('Delete failed', e);\n        alert('Delete failed');\n      }\n    }\n    onMounted(load);\n    const __returned__ = {\n      baseUrl,\n      predictions,\n      formatDate,\n      load,\n      remove,\n      ref,\n      onMounted,\n      inject,\n      get axios() {\n        return axios;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","inject","axios","baseUrl","predictions","formatDate","dt","Date","toLocaleString","load","res","get","value","data","e","console","error","remove","id","confirm","delete","alert"],"sources":["C:/VUEprojects/crud-app/src/pages/PredictionCreate.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <!-- Header -->\r\n    <div class=\"header flex justify-between items-center mb-6\">\r\n      <div>\r\n        <h1>Disaster Predictions</h1>\r\n        <p>Manage disaster predictions and forecasts</p>\r\n      </div>\r\n      <router-link to=\"/predictions/create\" class=\"add-btn\">+ Add Prediction</router-link>\r\n    </div>\r\n\r\n```\r\n<!-- Table Card -->\r\n<div class=\"card overflow-x-auto\">\r\n  <table class=\"predictions-table\">\r\n    <thead>\r\n      <tr>\r\n        <th>Location</th>\r\n        <th>Map</th>\r\n        <th>Disaster Type</th>\r\n        <th>Risk Level</th>\r\n        <th>Recovery Days</th>\r\n        <th>Predicted At</th>\r\n        <th>Actions</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr v-for=\"p in predictions\" :key=\"p.id\">\r\n        <td>\r\n          <div class=\"font-medium text-gray-900\">{{ p.location_name || 'N/A' }}</div>\r\n          <div class=\"text-sm text-gray-500\">Lat: {{ p.latitude || 'N/A' }}, Lng: {{ p.longitude || 'N/A' }}</div>\r\n        </td>\r\n        <td>\r\n          <iframe\r\n            v-if=\"p.latitude && p.longitude\"\r\n            :src=\"`https://maps.google.com/maps?q=${p.latitude},${p.longitude}&z=15&output=embed`\"\r\n            width=\"180\" height=\"120\" style=\"border:0;\" allowfullscreen=\"\" loading=\"lazy\"\r\n          ></iframe>\r\n          <span v-else class=\"text-gray-400 text-sm\">No location</span>\r\n        </td>\r\n        <td>\r\n          <div class=\"font-medium\">{{ p.disaster_type }}</div>\r\n          <div class=\"text-sm text-gray-500\">{{ p.description?.slice(0, 80) }}</div>\r\n        </td>\r\n        <td>{{ p.risk_level ?? 'N/A' }}/10</td>\r\n        <td>{{ p.predicted_recovery_days ? '~' + p.predicted_recovery_days + ' days' : 'N/A' }}</td>\r\n        <td class=\"text-sm text-gray-500\">{{ formatDate(p.predicted_at) }}</td>\r\n        <td>\r\n          <router-link :to=\"`/predictions/${p.id}`\" class=\"view-btn\">View</router-link>\r\n          <router-link :to=\"`/predictions/${p.id}/edit`\" class=\"edit-btn\">Edit</router-link>\r\n          <button @click=\"remove(p.id)\" class=\"delete-btn\">Delete</button>\r\n        </td>\r\n      </tr>\r\n      <tr v-if=\"predictions.length === 0\">\r\n        <td colspan=\"7\" class=\"p-4 text-center text-gray-500\">No predictions found</td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n</div>\r\n```\r\n\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, inject } from 'vue'\r\nimport axios from 'axios'\r\n\r\nconst baseUrl = inject('baseUrl', '')\r\nconst predictions = ref([])\r\n\r\nfunction formatDate(dt) {\r\n  if (!dt) return 'N/A'\r\n  try { return new Date(dt).toLocaleString() } catch { return dt }\r\n}\r\n\r\nasync function load() {\r\n  try {\r\n    const res = await axios.get(`${baseUrl}/disaster-predictions`)\r\n    predictions.value = res.data?.data || res.data || []\r\n  } catch (e) {\r\n    console.error('Failed to load predictions', e)\r\n  }\r\n}\r\n\r\nasync function remove(id) {\r\n  if (!confirm('Delete this prediction?')) return\r\n  try {\r\n    await axios.delete(`${baseUrl}/disaster-predictions/${id}`)\r\n    await load()\r\n  } catch (e) {\r\n    console.error('Delete failed', e)\r\n    alert('Delete failed')\r\n  }\r\n}\r\n\r\nonMounted(load)\r\n</script>\r\n\r\n<style scoped>\r\n.container { max-width: 900px; margin: 0 auto; padding: 20px; }\r\n\r\n/* Header */\r\n.header { display:flex; justify-content:space-between; align-items:center; margin-bottom:25px; }\r\n.header h1 { font-size:2.25rem; font-weight:bold; background:linear-gradient(90deg,#4f46e5,#06b6d4); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }\r\n.header p { color:#374151; margin-top:4px; }\r\n.add-btn { background:#4f46e5; color:#fff; padding:10px 16px; border-radius:8px; font-weight:500; transition:0.2s; }\r\n.add-btn:hover { background:#4338ca; }\r\n\r\n/* Card */\r\n.card { background:linear-gradient(135deg, #f9f9ff, #ffffff); border-radius:12px; padding:20px; box-shadow:0 6px 20px rgba(0,0,0,0.08); overflow-x:auto; }\r\n\r\n/* Table */\r\n.predictions-table { width:100%; border-collapse:collapse; }\r\n.predictions-table th, .predictions-table td { padding:12px; text-align:left; border-bottom:1px solid #e5e7eb; vertical-align:top; }\r\n.predictions-table th { font-size:0.75rem; color:#6b7280; text-transform:uppercase; letter-spacing:0.05em; }\r\n\r\n/* Actions Buttons */\r\n.view-btn { color:#4f46e5; margin-right:8px; font-weight:500; }\r\n.edit-btn { color:#16a34a; margin-right:8px; font-weight:500; }\r\n.delete-btn { color:#dc2626; font-weight:500; background:none; border:none; cursor:pointer; }\r\n.delete-btn:hover { text-decoration:underline; }\r\n</style>\r\n"],"mappings":"AAiEA,SAASA,GAAG,EAAEC,SAAS,EAAEC,MAAM,QAAQ,KAAK;AAC5C,OAAOC,KAAK,MAAM,OAAO;;;;;;;IAEzB,MAAMC,OAAO,GAAGF,MAAM,CAAC,SAAS,EAAE,EAAE,CAAC;IACrC,MAAMG,WAAW,GAAGL,GAAG,CAAC,EAAE,CAAC;IAE3B,SAASM,UAAUA,CAACC,EAAE,EAAE;MACtB,IAAI,CAACA,EAAE,EAAE,OAAO,KAAK;MACrB,IAAI;QAAE,OAAO,IAAIC,IAAI,CAACD,EAAE,CAAC,CAACE,cAAc,CAAC,CAAC;MAAC,CAAC,CAAC,MAAM;QAAE,OAAOF,EAAE;MAAC;IACjE;IAEA,eAAeG,IAAIA,CAAA,EAAG;MACpB,IAAI;QACF,MAAMC,GAAG,GAAG,MAAMR,KAAK,CAACS,GAAG,CAAC,GAAGR,OAAO,uBAAuB,CAAC;QAC9DC,WAAW,CAACQ,KAAK,GAAGF,GAAG,CAACG,IAAI,EAAEA,IAAI,IAAIH,GAAG,CAACG,IAAI,IAAI,EAAE;MACtD,CAAC,CAAC,OAAOC,CAAC,EAAE;QACVC,OAAO,CAACC,KAAK,CAAC,4BAA4B,EAAEF,CAAC,CAAC;MAChD;IACF;IAEA,eAAeG,MAAMA,CAACC,EAAE,EAAE;MACxB,IAAI,CAACC,OAAO,CAAC,yBAAyB,CAAC,EAAE;MACzC,IAAI;QACF,MAAMjB,KAAK,CAACkB,MAAM,CAAC,GAAGjB,OAAO,yBAAyBe,EAAE,EAAE,CAAC;QAC3D,MAAMT,IAAI,CAAC,CAAC;MACd,CAAC,CAAC,OAAOK,CAAC,EAAE;QACVC,OAAO,CAACC,KAAK,CAAC,eAAe,EAAEF,CAAC,CAAC;QACjCO,KAAK,CAAC,eAAe,CAAC;MACxB;IACF;IAEArB,SAAS,CAACS,IAAI,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}