{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { ref, onMounted } from 'vue';\nimport api from '../services/api';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport { useRouter } from 'vue-router';\nexport default {\n  __name: 'PredictionCreate',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const router = useRouter();\n    const form = ref({\n      disaster_type: '',\n      description: '',\n      location_name: '',\n      risk_level: null,\n      latitude: '',\n      longitude: '',\n      predicted_recovery_days: null,\n      predicted_at: '',\n      affected_areas: ''\n    });\n    let map, marker;\n    onMounted(() => {\n      const defaultLat = parseFloat(form.value.latitude) || 14.5995;\n      const defaultLng = parseFloat(form.value.longitude) || 120.9842;\n      map = L.map('map_create').setView([defaultLat, defaultLng], 11);\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);\n      marker = L.marker([defaultLat, defaultLng], {\n        draggable: true\n      }).addTo(map);\n      marker.on('dragend', () => {\n        const pos = marker.getLatLng();\n        form.value.latitude = pos.lat.toFixed(6);\n        form.value.longitude = pos.lng.toFixed(6);\n      });\n      map.on('click', e => {\n        marker.setLatLng(e.latlng);\n        form.value.latitude = e.latlng.lat.toFixed(6);\n        form.value.longitude = e.latlng.lng.toFixed(6);\n      });\n    });\n    async function submit() {\n      try {\n        await api.post('/disaster-predictions', {\n          ...form.value\n        });\n        router.push({\n          name: 'Predictions'\n        });\n      } catch (e) {\n        console.error('Create failed', e);\n        alert('Create failed');\n      }\n    }\n    const __returned__ = {\n      router,\n      form,\n      get map() {\n        return map;\n      },\n      set map(v) {\n        map = v;\n      },\n      get marker() {\n        return marker;\n      },\n      set marker(v) {\n        marker = v;\n      },\n      submit,\n      ref,\n      onMounted,\n      get api() {\n        return api;\n      },\n      get L() {\n        return L;\n      },\n      get useRouter() {\n        return useRouter;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","api","L","useRouter","router","form","disaster_type","description","location_name","risk_level","latitude","longitude","predicted_recovery_days","predicted_at","affected_areas","map","marker","defaultLat","parseFloat","value","defaultLng","setView","tileLayer","addTo","draggable","on","pos","getLatLng","lat","toFixed","lng","e","setLatLng","latlng","submit","post","push","name","console","error","alert"],"sources":["C:/VUEprojects/crud-app/src/pages/PredictionCreate.vue"],"sourcesContent":["<template>\r\n  <div class=\"container mx-auto p-6\">\r\n    <!-- Header -->\r\n    <div class=\"mb-6 flex justify-between items-center\">\r\n      <div>\r\n        <h2 class=\"text-3xl font-bold bg-gradient-to-r from-purple-500 via-pink-500 to-red-500 text-transparent bg-clip-text\">Create Prediction</h2>\r\n        <p class=\"text-gray-500 mt-1\">Add a new disaster prediction</p>\r\n      </div>\r\n    </div>\r\n\r\n```\r\n<!-- Form Card -->\r\n<div class=\"bg-gradient-to-tr from-white via-purple-50 to-pink-50 rounded-xl shadow-lg p-8\">\r\n  <form @submit.prevent=\"submit\" class=\"space-y-6\">\r\n    <!-- Disaster Type -->\r\n    <div>\r\n      <label class=\"block font-medium text-gray-700 mb-2\">Disaster Type</label>\r\n      <input v-model=\"form.disaster_type\" required class=\"w-full border border-purple-300 rounded-lg px-3 py-2 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition\" />\r\n    </div>\r\n\r\n    <!-- Description -->\r\n    <div>\r\n      <label class=\"block font-medium text-gray-700 mb-2\">Description</label>\r\n      <textarea v-model=\"form.description\" rows=\"4\" class=\"w-full border border-purple-300 rounded-lg px-3 py-2 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition\"></textarea>\r\n    </div>\r\n\r\n    <!-- Location & Risk -->\r\n    <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n      <div>\r\n        <label class=\"block font-medium text-gray-700 mb-2\">Location Name</label>\r\n        <input v-model=\"form.location_name\" class=\"w-full border border-pink-300 rounded-lg px-3 py-2 focus:border-pink-500 focus:ring-2 focus:ring-pink-200 transition\" />\r\n      </div>\r\n      <div>\r\n        <label class=\"block font-medium text-gray-700 mb-2\">Risk Level (1-10)</label>\r\n        <input type=\"number\" min=\"1\" max=\"10\" v-model.number=\"form.risk_level\" class=\"w-full border border-pink-300 rounded-lg px-3 py-2 focus:border-pink-500 focus:ring-2 focus:ring-pink-200 transition\" />\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Coordinates & Recovery Days -->\r\n    <div class=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n      <div>\r\n        <label class=\"block font-medium text-gray-700 mb-2\">Latitude</label>\r\n        <input v-model=\"form.latitude\" class=\"w-full border border-purple-300 rounded-lg px-3 py-2 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition\" />\r\n      </div>\r\n      <div>\r\n        <label class=\"block font-medium text-gray-700 mb-2\">Longitude</label>\r\n        <input v-model=\"form.longitude\" class=\"w-full border border-purple-300 rounded-lg px-3 py-2 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition\" />\r\n      </div>\r\n      <div>\r\n        <label class=\"block font-medium text-gray-700 mb-2\">Estimated Recovery Days</label>\r\n        <input type=\"number\" min=\"0\" v-model.number=\"form.predicted_recovery_days\" class=\"w-full border border-purple-300 rounded-lg px-3 py-2 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition\" />\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Predicted At -->\r\n    <div>\r\n      <label class=\"block font-medium text-gray-700 mb-2\">Predicted At</label>\r\n      <input type=\"datetime-local\" v-model=\"form.predicted_at\" class=\"w-full border border-pink-300 rounded-lg px-3 py-2 focus:border-pink-500 focus:ring-2 focus:ring-pink-200 transition\" />\r\n    </div>\r\n\r\n    <!-- Map -->\r\n    <div>\r\n      <label class=\"block font-medium text-gray-700 mb-2\">Select Location on Map</label>\r\n      <div id=\"map_create\" class=\"h-72 rounded-lg mb-2 border border-purple-200 shadow-inner\"></div>\r\n    </div>\r\n\r\n    <!-- Affected Areas -->\r\n    <div>\r\n      <label class=\"block font-medium text-gray-700 mb-2\">Affected Areas</label>\r\n      <input v-model=\"form.affected_areas\" class=\"w-full border border-pink-300 rounded-lg px-3 py-2 focus:border-pink-500 focus:ring-2 focus:ring-pink-200 transition\" />\r\n    </div>\r\n\r\n    <!-- Buttons -->\r\n    <div class=\"flex justify-end gap-3\">\r\n      <router-link to=\"/predictions\" class=\"px-5 py-2 border border-gray-300 rounded-lg font-medium hover:bg-gray-100 transition\">Cancel</router-link>\r\n      <button type=\"submit\" class=\"px-5 py-2 bg-gradient-to-r from-purple-500 via-pink-500 to-red-500 text-white rounded-lg font-semibold hover:from-purple-600 hover:via-pink-600 hover:to-red-600 transition\">Create Prediction</button>\r\n    </div>\r\n  </form>\r\n</div>\r\n```\r\n\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport api from '../services/api';\r\nimport L from 'leaflet';\r\nimport 'leaflet/dist/leaflet.css';\r\nimport { useRouter } from 'vue-router';\r\n\r\nconst router = useRouter();\r\nconst form = ref({\r\n  disaster_type: '',\r\n  description: '',\r\n  location_name: '',\r\n  risk_level: null,\r\n  latitude: '',\r\n  longitude: '',\r\n  predicted_recovery_days: null,\r\n  predicted_at: '',\r\n  affected_areas: ''\r\n});\r\n\r\nlet map, marker;\r\n\r\nonMounted(() => {\r\n  const defaultLat = parseFloat(form.value.latitude) || 14.5995;\r\n  const defaultLng = parseFloat(form.value.longitude) || 120.9842;\r\n  map = L.map('map_create').setView([defaultLat, defaultLng], 11);\r\n  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);\r\n  marker = L.marker([defaultLat, defaultLng], { draggable: true }).addTo(map);\r\n\r\n  marker.on('dragend', () => {\r\n    const pos = marker.getLatLng();\r\n    form.value.latitude = pos.lat.toFixed(6);\r\n    form.value.longitude = pos.lng.toFixed(6);\r\n  });\r\n\r\n  map.on('click', (e) => {\r\n    marker.setLatLng(e.latlng);\r\n    form.value.latitude = e.latlng.lat.toFixed(6);\r\n    form.value.longitude = e.latlng.lng.toFixed(6);\r\n  });\r\n});\r\n\r\nasync function submit() {\r\n  try {\r\n    await api.post('/disaster-predictions', { ...form.value });\r\n    router.push({ name: 'Predictions' });\r\n  } catch (e) {\r\n    console.error('Create failed', e);\r\n    alert('Create failed');\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.container { max-width: 900px; }\r\n\r\n#map_create { border-radius: 12px; }\r\n</style>\r\n"],"mappings":";;;AAqFA,SAASA,GAAG,EAAEC,SAAS,QAAQ,KAAK;AACpC,OAAOC,GAAG,MAAM,iBAAiB;AACjC,OAAOC,CAAC,MAAM,SAAS;AACvB,OAAO,0BAA0B;AACjC,SAASC,SAAS,QAAQ,YAAY;;;;;;;IAEtC,MAAMC,MAAM,GAAGD,SAAS,CAAC,CAAC;IAC1B,MAAME,IAAI,GAAGN,GAAG,CAAC;MACfO,aAAa,EAAE,EAAE;MACjBC,WAAW,EAAE,EAAE;MACfC,aAAa,EAAE,EAAE;MACjBC,UAAU,EAAE,IAAI;MAChBC,QAAQ,EAAE,EAAE;MACZC,SAAS,EAAE,EAAE;MACbC,uBAAuB,EAAE,IAAI;MAC7BC,YAAY,EAAE,EAAE;MAChBC,cAAc,EAAE;IAClB,CAAC,CAAC;IAEF,IAAIC,GAAG,EAAEC,MAAM;IAEfhB,SAAS,CAAC,MAAM;MACd,MAAMiB,UAAU,GAAGC,UAAU,CAACb,IAAI,CAACc,KAAK,CAACT,QAAQ,CAAC,IAAI,OAAO;MAC7D,MAAMU,UAAU,GAAGF,UAAU,CAACb,IAAI,CAACc,KAAK,CAACR,SAAS,CAAC,IAAI,QAAQ;MAC/DI,GAAG,GAAGb,CAAC,CAACa,GAAG,CAAC,YAAY,CAAC,CAACM,OAAO,CAAC,CAACJ,UAAU,EAAEG,UAAU,CAAC,EAAE,EAAE,CAAC;MAC/DlB,CAAC,CAACoB,SAAS,CAAC,oDAAoD,CAAC,CAACC,KAAK,CAACR,GAAG,CAAC;MAC5EC,MAAM,GAAGd,CAAC,CAACc,MAAM,CAAC,CAACC,UAAU,EAAEG,UAAU,CAAC,EAAE;QAAEI,SAAS,EAAE;MAAK,CAAC,CAAC,CAACD,KAAK,CAACR,GAAG,CAAC;MAE3EC,MAAM,CAACS,EAAE,CAAC,SAAS,EAAE,MAAM;QACzB,MAAMC,GAAG,GAAGV,MAAM,CAACW,SAAS,CAAC,CAAC;QAC9BtB,IAAI,CAACc,KAAK,CAACT,QAAQ,GAAGgB,GAAG,CAACE,GAAG,CAACC,OAAO,CAAC,CAAC,CAAC;QACxCxB,IAAI,CAACc,KAAK,CAACR,SAAS,GAAGe,GAAG,CAACI,GAAG,CAACD,OAAO,CAAC,CAAC,CAAC;MAC3C,CAAC,CAAC;MAEFd,GAAG,CAACU,EAAE,CAAC,OAAO,EAAGM,CAAC,IAAK;QACrBf,MAAM,CAACgB,SAAS,CAACD,CAAC,CAACE,MAAM,CAAC;QAC1B5B,IAAI,CAACc,KAAK,CAACT,QAAQ,GAAGqB,CAAC,CAACE,MAAM,CAACL,GAAG,CAACC,OAAO,CAAC,CAAC,CAAC;QAC7CxB,IAAI,CAACc,KAAK,CAACR,SAAS,GAAGoB,CAAC,CAACE,MAAM,CAACH,GAAG,CAACD,OAAO,CAAC,CAAC,CAAC;MAChD,CAAC,CAAC;IACJ,CAAC,CAAC;IAEF,eAAeK,MAAMA,CAAA,EAAG;MACtB,IAAI;QACF,MAAMjC,GAAG,CAACkC,IAAI,CAAC,uBAAuB,EAAE;UAAE,GAAG9B,IAAI,CAACc;QAAM,CAAC,CAAC;QAC1Df,MAAM,CAACgC,IAAI,CAAC;UAAEC,IAAI,EAAE;QAAc,CAAC,CAAC;MACtC,CAAC,CAAC,OAAON,CAAC,EAAE;QACVO,OAAO,CAACC,KAAK,CAAC,eAAe,EAAER,CAAC,CAAC;QACjCS,KAAK,CAAC,eAAe,CAAC;MACxB;IACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}