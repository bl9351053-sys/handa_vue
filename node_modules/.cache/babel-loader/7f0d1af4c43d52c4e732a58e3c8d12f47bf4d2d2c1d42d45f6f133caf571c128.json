{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, createTextVNode as _createTextVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = {\n  class: \"flex items-center justify-between mb-4\"\n};\nconst _hoisted_3 = {\n  key: 0\n};\nconst _hoisted_4 = {\n  key: 1,\n  class: \"text-red-600\"\n};\nconst _hoisted_5 = {\n  class: \"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6\"\n};\nconst _hoisted_6 = {\n  class: \"info-box purple\"\n};\nconst _hoisted_7 = {\n  class: \"value\"\n};\nconst _hoisted_8 = {\n  class: \"info-box green\"\n};\nconst _hoisted_9 = {\n  class: \"info-box indigo\"\n};\nconst _hoisted_10 = {\n  class: \"card\"\n};\nconst _hoisted_11 = {\n  class: \"w-full table-auto border-collapse\"\n};\nconst _hoisted_12 = {\n  class: \"td\"\n};\nconst _hoisted_13 = {\n  class: \"td\"\n};\nconst _hoisted_14 = {\n  class: \"td\"\n};\nconst _hoisted_15 = {\n  class: \"td\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[4] || (_cache[4] = _createElementVNode(\"div\", {\n    class: \"header mb-6\"\n  }, [_createElementVNode(\"h1\", {\n    class: \"text-3xl font-bold gradient-text\"\n  }, \"Facility Report\")], -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", null, [_createElementVNode(\"button\", {\n    class: \"btn-submit\",\n    onClick: $setup.fetchFacilities\n  }, \"Refresh\"), _createElementVNode(\"button\", {\n    class: \"btn-submit ml-2\",\n    onClick: $setup.downloadCSV\n  }, \"Download CSV\")]), _createElementVNode(\"div\", null, [$setup.loading ? (_openBlock(), _createElementBlock(\"span\", _hoisted_3, \"Loading...\")) : _createCommentVNode(\"v-if\", true), $setup.error ? (_openBlock(), _createElementBlock(\"span\", _hoisted_4, _toDisplayString($setup.error), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)])]), _cache[5] || (_cache[5] = _createTextVNode(\" ``` \", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_cache[0] || (_cache[0] = _createElementVNode(\"p\", {\n    class: \"label\"\n  }, \"Total Facilities\", -1 /* CACHED */)), _createElementVNode(\"p\", _hoisted_7, _toDisplayString($setup.summary.total), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_8, [_cache[1] || (_cache[1] = _createElementVNode(\"p\", {\n    class: \"label\"\n  }, \"By Status\", -1 /* CACHED */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.summary.by_status, (count, status) => {\n    return _openBlock(), _createElementBlock(\"p\", {\n      class: \"value\",\n      key: status\n    }, _toDisplayString(status) + \": \" + _toDisplayString(count), 1 /* TEXT */);\n  }), 128 /* KEYED_FRAGMENT */))]), _createElementVNode(\"div\", _hoisted_9, [_cache[2] || (_cache[2] = _createElementVNode(\"p\", {\n    class: \"label\"\n  }, \"By Type\", -1 /* CACHED */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.summary.by_type, (count, type) => {\n    return _openBlock(), _createElementBlock(\"p\", {\n      class: \"value\",\n      key: type\n    }, _toDisplayString(type) + \": \" + _toDisplayString(count), 1 /* TEXT */);\n  }), 128 /* KEYED_FRAGMENT */))])]), _createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"table\", _hoisted_11, [_cache[3] || (_cache[3] = _createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", {\n    class: \"th\"\n  }, \"Name\"), _createElementVNode(\"th\", {\n    class: \"th\"\n  }, \"Type\"), _createElementVNode(\"th\", {\n    class: \"th\"\n  }, \"Status\"), _createElementVNode(\"th\", {\n    class: \"th\"\n  }, \"Address\")])], -1 /* CACHED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.facilities, facility => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: facility.id\n    }, [_createElementVNode(\"td\", _hoisted_12, _toDisplayString(facility.name), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_13, _toDisplayString(facility.type), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_14, _toDisplayString(facility.status), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_15, _toDisplayString(facility.address), 1 /* TEXT */)]);\n  }), 128 /* KEYED_FRAGMENT */))])])]), _cache[6] || (_cache[6] = _createTextVNode(\" ``` \", -1 /* CACHED */))]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","onClick","$setup","fetchFacilities","downloadCSV","loading","_hoisted_3","error","_hoisted_4","_toDisplayString","_hoisted_5","_hoisted_6","_hoisted_7","summary","total","_hoisted_8","_Fragment","_renderList","by_status","count","status","key","_hoisted_9","by_type","type","_hoisted_10","_hoisted_11","facilities","facility","id","_hoisted_12","name","_hoisted_13","_hoisted_14","_hoisted_15","address"],"sources":["C:\\VUEprojects\\crud-app\\src\\pages\\ReportFacility.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <div class=\"header mb-6\">\r\n      <h1 class=\"text-3xl font-bold gradient-text\">Facility Report</h1>\r\n    </div>\r\n\r\n    <div class=\"flex items-center justify-between mb-4\">\r\n      <div>\r\n        <button class=\"btn-submit\" @click=\"fetchFacilities\">Refresh</button>\r\n        <button class=\"btn-submit ml-2\" @click=\"downloadCSV\">Download CSV</button>\r\n      </div>\r\n      <div>\r\n        <span v-if=\"loading\">Loading...</span>\r\n        <span v-if=\"error\" class=\"text-red-600\">{{ error }}</span>\r\n      </div>\r\n    </div>\r\n```\r\n<div class=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6\">\r\n  <div class=\"info-box purple\">\r\n    <p class=\"label\">Total Facilities</p>\r\n    <p class=\"value\">{{ summary.total }}</p>\r\n  </div>\r\n  <div class=\"info-box green\">\r\n    <p class=\"label\">By Status</p>\r\n    <p class=\"value\" v-for=\"(count, status) in summary.by_status\" :key=\"status\">{{ status }}: {{ count }}</p>\r\n  </div>\r\n  <div class=\"info-box indigo\">\r\n    <p class=\"label\">By Type</p>\r\n    <p class=\"value\" v-for=\"(count, type) in summary.by_type\" :key=\"type\">{{ type }}: {{ count }}</p>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"card\">\r\n  <table class=\"w-full table-auto border-collapse\">\r\n    <thead>\r\n      <tr>\r\n        <th class=\"th\">Name</th>\r\n        <th class=\"th\">Type</th>\r\n        <th class=\"th\">Status</th>\r\n        <th class=\"th\">Address</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr v-for=\"facility in facilities\" :key=\"facility.id\">\r\n        <td class=\"td\">{{ facility.name }}</td>\r\n        <td class=\"td\">{{ facility.type }}</td>\r\n        <td class=\"td\">{{ facility.status }}</td>\r\n        <td class=\"td\">{{ facility.address }}</td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n</div>\r\n```\r\n\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\n</script>\r\n\r\n<script setup>\r\nimport { reactive, toRefs, onMounted } from 'vue'\r\nimport axios from 'axios'\r\n\r\nconst state = reactive({\r\n  facilities: [],\r\n  summary: { total:0, by_status:{}, by_type:{} },\r\n  loading: false,\r\n  error: null,\r\n})\r\n\r\nasync function fetchFacilities() {\r\n  state.loading = true\r\n  state.error = null\r\n  try {\r\n    const res = await axios.get('http://localhost:8000/api/reports/facility', { params: { json: 1 } })\r\n    state.facilities = res.data.facilities || []\r\n    state.summary = res.data.summary || { total:0, by_status:{}, by_type:{} }\r\n  } catch (e) {\r\n    console.error(e)\r\n    state.error = e.message || 'Failed to load facilities.'\r\n  } finally {\r\n    state.loading = false\r\n  }\r\n}\r\n\r\nasync function downloadCSV() {\r\n  try {\r\n    const res = await axios.get('http://localhost:8000/api/reports/facility', { params: { format: 'csv' }, responseType: 'blob' })\r\n    const blob = new Blob([res.data], { type: 'text/csv' })\r\n    const url = window.URL.createObjectURL(blob)\r\n    const a = document.createElement('a')\r\n    a.href = url\r\n    a.download = `facility_report_${new Date().toISOString().slice(0,19).replace(/[:T]/g,'_')}.csv`\r\n    document.body.appendChild(a)\r\n    a.click()\r\n    a.remove()\r\n    window.URL.revokeObjectURL(url)\r\n  } catch (e) {\r\n    console.error('CSV download failed', e)\r\n    state.error = 'Failed to download CSV.'\r\n  }\r\n}\r\n\r\nonMounted(fetchFacilities)\r\n\r\nconst { facilities, summary, loading, error } = toRefs(state)\r\n</script>\r\n\r\n<style scoped>\r\n.container { max-width: 1100px; margin:0 auto; padding:20px; }\r\n.gradient-text { background: linear-gradient(90deg,#6366f1,#f43f5e); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }\r\n.card { background:#fff; border-radius:12px; padding:20px; box-shadow:0 4px 12px rgba(0,0,0,0.08); margin-bottom:20px; }\r\n.info-box { padding:15px; border-radius:12px; }\r\n.info-box.purple { background:#f3e8ff; color:#7c3aed; }\r\n.info-box.green { background:#d1fae5; color:#059669; }\r\n.info-box.indigo { background:#e0e7ff; color:#4338ca; }\r\ntable { width:100%; border-collapse:collapse; }\r\n.th, .td { padding:8px; border:1px solid #e5e7eb; text-align:left; }\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}