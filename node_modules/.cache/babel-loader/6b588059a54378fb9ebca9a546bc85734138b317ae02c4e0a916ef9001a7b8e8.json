{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport { ref, onMounted, inject } from 'vue';\nimport axios from 'axios';\nexport default {\n  __name: 'FamiliesList',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const baseUrl = inject('baseUrl', '');\n    const families = ref([]);\n    const generalError = ref('');\n    const loading = ref(true);\n    onMounted(() => fetchFamilies());\n    async function fetchFamilies() {\n      loading.value = true;\n      generalError.value = '';\n      try {\n        const res = await axios.get(`${baseUrl}/families`);\n        families.value = res.data?.data || res.data || [];\n      } catch (err) {\n        generalError.value = 'Failed to load families. Please try again.';\n        console.error('Fetch families error:', err);\n      } finally {\n        loading.value = false;\n      }\n    }\n    function getStatusBadge(status) {\n      const badges = {\n        evacuated: 'status-evacuated',\n        returned: 'status-returned',\n        pending: 'status-pending'\n      };\n      return badges[status] || 'status-unknown';\n    }\n    function capitalizeStatus(status) {\n      return status ? status.charAt(0).toUpperCase() + status.slice(1) : '';\n    }\n    function formatDate(date) {\n      if (!date) return 'N/A';\n      return new Date(date).toLocaleDateString('en-US', {\n        month: 'short',\n        day: 'numeric',\n        year: 'numeric',\n        hour: '2-digit',\n        minute: '2-digit'\n      });\n    }\n    async function deleteFamily(id) {\n      if (!confirm('Are you sure you want to delete this family?')) return;\n      try {\n        await axios.delete(`${baseUrl}/families/${id}`);\n        families.value = families.value.filter(f => f.id !== id);\n      } catch (err) {\n        generalError.value = 'Failed to delete family. Please try again.';\n        console.error('Delete family error:', err);\n      }\n    }\n    const __returned__ = {\n      baseUrl,\n      families,\n      generalError,\n      loading,\n      fetchFamilies,\n      getStatusBadge,\n      capitalizeStatus,\n      formatDate,\n      deleteFamily,\n      ref,\n      onMounted,\n      inject,\n      get axios() {\n        return axios;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","inject","axios","baseUrl","families","generalError","loading","fetchFamilies","value","res","get","data","err","console","error","getStatusBadge","status","badges","evacuated","returned","pending","capitalizeStatus","charAt","toUpperCase","slice","formatDate","date","Date","toLocaleDateString","month","day","year","hour","minute","deleteFamily","id","confirm","delete","filter","f"],"sources":["C:/VUEprojects/crud-app/src/pages/FamiliesList.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <!-- Header & Add Button -->\r\n    <div class=\"header\">\r\n      <div>\r\n        <h1>Families</h1>\r\n        <p>Manage evacuated families and members</p>\r\n      </div>\r\n      <router-link to=\"/families/create\" class=\"add-btn\">\r\n        <span class=\"plus\">+</span> Add Family\r\n      </router-link>\r\n    </div>\r\n\r\n```\r\n<!-- Error Message -->\r\n<div v-if=\"generalError\" class=\"error-message\">\r\n  <p>{{ generalError }}</p>\r\n</div>\r\n\r\n<!-- Loading State -->\r\n<div v-if=\"loading\" class=\"loading-card\">\r\n  <div class=\"loading-content\">\r\n    <div class=\"spinner\"></div>\r\n    <span>Loading families...</span>\r\n  </div>\r\n</div>\r\n\r\n<!-- Families Table -->\r\n<div v-else class=\"card\">\r\n  <table>\r\n    <thead>\r\n      <tr>\r\n        <th>Family Head</th>\r\n        <th>Members</th>\r\n        <th>Evacuation Area</th>\r\n        <th>Status</th>\r\n        <th>Evacuated At</th>\r\n        <th>Actions</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr v-for=\"family in families\" :key=\"family.id\" class=\"hover-row\">\r\n        <td>\r\n          <div class=\"name\">{{ family.family_head_name }}</div>\r\n          <div class=\"contact\">{{ family.contact_number || 'No contact' }}</div>\r\n        </td>\r\n        <td>{{ family.total_members }}</td>\r\n        <td>{{ family.evacuation_area?.name || 'Not assigned' }}</td>\r\n        <td>\r\n          <span :class=\"getStatusBadge(family.status)\">{{ capitalizeStatus(family.status) }}</span>\r\n        </td>\r\n        <td>{{ formatDate(family.evacuated_at) }}</td>\r\n        <td class=\"actions\">\r\n          <router-link :to=\"`/families/${family.id}`\" class=\"view-btn\">View</router-link>\r\n          <router-link :to=\"`/families/${family.id}/edit`\" class=\"edit-btn\">Edit</router-link>\r\n          <button @click=\"deleteFamily(family.id)\" class=\"delete-btn\">Delete</button>\r\n        </td>\r\n      </tr>\r\n      <tr v-if=\"families.length === 0\">\r\n        <td colspan=\"6\" class=\"empty\">No families found.</td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n</div>\r\n```\r\n\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, inject } from 'vue'\r\nimport axios from 'axios'\r\n\r\nconst baseUrl = inject('baseUrl', '')\r\nconst families = ref([])\r\nconst generalError = ref('')\r\nconst loading = ref(true)\r\n\r\nonMounted(() => fetchFamilies())\r\n\r\nasync function fetchFamilies() {\r\n  loading.value = true\r\n  generalError.value = ''\r\n  try {\r\n    const res = await axios.get(`${baseUrl}/families`)\r\n    families.value = res.data?.data || res.data || []\r\n  } catch (err) {\r\n    generalError.value = 'Failed to load families. Please try again.'\r\n    console.error('Fetch families error:', err)\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\nfunction getStatusBadge(status) {\r\n  const badges = {\r\n    evacuated: 'status-evacuated',\r\n    returned: 'status-returned',\r\n    pending: 'status-pending'\r\n  }\r\n  return badges[status] || 'status-unknown'\r\n}\r\n\r\nfunction capitalizeStatus(status) {\r\n  return status ? status.charAt(0).toUpperCase() + status.slice(1) : ''\r\n}\r\n\r\nfunction formatDate(date) {\r\n  if (!date) return 'N/A'\r\n  return new Date(date).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric', hour: '2-digit', minute: '2-digit' })\r\n}\r\n\r\nasync function deleteFamily(id) {\r\n  if (!confirm('Are you sure you want to delete this family?')) return\r\n  try {\r\n    await axios.delete(`${baseUrl}/families/${id}`)\r\n    families.value = families.value.filter(f => f.id !== id)\r\n  } catch (err) {\r\n    generalError.value = 'Failed to delete family. Please try again.'\r\n    console.error('Delete family error:', err)\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n/* Container & Card */\r\n.container {\r\n  max-width: 1000px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n}\r\n.card {\r\n  background: linear-gradient(145deg, #ffffff, #f0f4ff);\r\n  border-radius: 15px;\r\n  padding: 20px;\r\n  overflow-x: auto;\r\n  box-shadow: 0 6px 20px rgba(0,0,0,0.12);\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n/* Header */\r\n.header {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 25px;\r\n}\r\n.header h1 {\r\n  font-size: 2.2rem;\r\n  margin: 0;\r\n  background: linear-gradient(90deg, #4f46e5, #06b6d4);\r\n  -webkit-background-clip: text;\r\n  -webkit-text-fill-color: transparent;\r\n}\r\n.header p {\r\n  color: #374151;\r\n  margin-top: 5px;\r\n  font-weight: 500;\r\n}\r\n.add-btn {\r\n  background: linear-gradient(90deg, #06b6d4, #4f46e5);\r\n  color: #fff;\r\n  text-decoration: none;\r\n  padding: 10px 16px;\r\n  border-radius: 8px;\r\n  display: inline-flex;\r\n  align-items: center;\r\n  font-weight: 600;\r\n  box-shadow: 0 4px 12px rgba(0,0,0,0.15);\r\n  transition: all 0.3s ease;\r\n}\r\n.add-btn .plus {\r\n  margin-right: 6px;\r\n  font-size: 1.2rem;\r\n}\r\n.add-btn:hover {\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 6px 18px rgba(0,0,0,0.2);\r\n}\r\n\r\n/* Error Message */\r\n.error-message {\r\n  background-color: #fee2e2;\r\n  border-left: 4px solid #f43f5e;\r\n  color: #b91c1c;\r\n  padding: 12px 16px;\r\n  border-radius: 6px;\r\n  margin-bottom: 20px;\r\n  font-weight: 500;\r\n  box-shadow: 0 2px 6px rgba(0,0,0,0.08);\r\n}\r\n\r\n/* Loading State */\r\n.loading-card {\r\n  background-color: #fff;\r\n  border-radius: 12px;\r\n  padding: 40px 20px;\r\n  text-align: center;\r\n  box-shadow: 0 4px 16px rgba(0,0,0,0.12);\r\n}\r\n.loading-content {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n  font-weight: 500;\r\n  color: #374151;\r\n}\r\n.spinner {\r\n  border: 4px solid #e0e7ff;\r\n  border-top: 4px solid #4f46e5;\r\n  border-radius: 50%;\r\n  width: 28px;\r\n  height: 28px;\r\n  animation: spin 1s linear infinite;\r\n}\r\n@keyframes spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n\r\n/* Table */\r\ntable {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  min-width: 700px;\r\n}\r\nth, td {\r\n  padding: 14px 12px;\r\n  text-align: left;\r\n}\r\nth {\r\n  font-weight: 700;\r\n  font-size: 0.9rem;\r\n  text-transform: uppercase;\r\n  color: #6d28d9;\r\n  border-bottom: 3px solid #c7d2fe;\r\n  background: linear-gradient(90deg, #e0e7ff, #f0f4ff);\r\n}\r\ntd {\r\n  font-size: 0.95rem;\r\n  color: #1f2937;\r\n  border-bottom: 1px solid #e5e7eb;\r\n}\r\n.hover-row:hover {\r\n  background-color: #f0f9ff;\r\n  transform: scale(1.01);\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n/* Status Badges */\r\n.status-evacuated {\r\n  background-color: #d9f99d;\r\n  color: #166534;\r\n  padding: 4px 10px;\r\n  border-radius: 12px;\r\n  font-size: 0.75rem;\r\n  font-weight: 600;\r\n  box-shadow: 0 1px 4px rgba(0,0,0,0.12);\r\n}\r\n.status-returned {\r\n  background-color: #bfdbfe;\r\n  color: #1e40af;\r\n  padding: 4px 10px;\r\n  border-radius: 12px;\r\n  font-size: 0.75rem;\r\n  font-weight: 600;\r\n  box-shadow: 0 1px 4px rgba(0,0,0,0.12);\r\n}\r\n.status-pending {\r\n  background-color: #fef08a;\r\n  color: #78350f;\r\n  padding: 4px 10px;\r\n  border-radius: 12px;\r\n  font-size: 0.75rem;\r\n  font-weight: 600;\r\n  box-shadow: 0 1px 4px rgba(0,0,0,0.12);\r\n}\r\n.status-unknown {\r\n  background-color: #f3f4f6;\r\n  color: #374151;\r\n  padding: 4px 10px;\r\n  border-radius: 12px;\r\n  font-size: 0.75rem;\r\n  font-weight: 600;\r\n}\r\n\r\n/* Actions */\r\n.actions a, .actions button {\r\n  margin-right: 10px;\r\n  font-size: 0.9rem;\r\n  background: none;\r\n  border: none;\r\n  cursor: pointer;\r\n  text-decoration: none;\r\n  font-weight: 500;\r\n  transition: all 0.2s ease;\r\n}\r\n.view-btn { color: #4f46e5; }\r\n.view-btn:hover { text-decoration: underline; transform: scale(1.05); }\r\n.edit-btn { color: #059669; }\r\n.edit-btn:hover { text-decoration: underline; transform: scale(1.05); }\r\n.delete-btn { color: #dc2626; }\r\n.delete-btn:hover { text-decoration: underline; transform: scale(1.05); }\r\n\r\n/* Empty Row */\r\n.empty {\r\n  text-align: center;\r\n  color: #6b7280;\r\n  padding: 20px;\r\n  font-style: italic;\r\n}\r\n\r\n/* Responsive */\r\n@media (max-width: 768px) {\r\n  table {\r\n    display: block;\r\n    overflow-x: auto;\r\n  }\r\n}\r\n</style>\r\n"],"mappings":";;AAsEA,SAASA,GAAG,EAAEC,SAAS,EAAEC,MAAM,QAAQ,KAAK;AAC5C,OAAOC,KAAK,MAAM,OAAO;;;;;;;IAEzB,MAAMC,OAAO,GAAGF,MAAM,CAAC,SAAS,EAAE,EAAE,CAAC;IACrC,MAAMG,QAAQ,GAAGL,GAAG,CAAC,EAAE,CAAC;IACxB,MAAMM,YAAY,GAAGN,GAAG,CAAC,EAAE,CAAC;IAC5B,MAAMO,OAAO,GAAGP,GAAG,CAAC,IAAI,CAAC;IAEzBC,SAAS,CAAC,MAAMO,aAAa,CAAC,CAAC,CAAC;IAEhC,eAAeA,aAAaA,CAAA,EAAG;MAC7BD,OAAO,CAACE,KAAK,GAAG,IAAI;MACpBH,YAAY,CAACG,KAAK,GAAG,EAAE;MACvB,IAAI;QACF,MAAMC,GAAG,GAAG,MAAMP,KAAK,CAACQ,GAAG,CAAC,GAAGP,OAAO,WAAW,CAAC;QAClDC,QAAQ,CAACI,KAAK,GAAGC,GAAG,CAACE,IAAI,EAAEA,IAAI,IAAIF,GAAG,CAACE,IAAI,IAAI,EAAE;MACnD,CAAC,CAAC,OAAOC,GAAG,EAAE;QACZP,YAAY,CAACG,KAAK,GAAG,4CAA4C;QACjEK,OAAO,CAACC,KAAK,CAAC,uBAAuB,EAAEF,GAAG,CAAC;MAC7C,CAAC,SAAS;QACRN,OAAO,CAACE,KAAK,GAAG,KAAK;MACvB;IACF;IAEA,SAASO,cAAcA,CAACC,MAAM,EAAE;MAC9B,MAAMC,MAAM,GAAG;QACbC,SAAS,EAAE,kBAAkB;QAC7BC,QAAQ,EAAE,iBAAiB;QAC3BC,OAAO,EAAE;MACX,CAAC;MACD,OAAOH,MAAM,CAACD,MAAM,CAAC,IAAI,gBAAgB;IAC3C;IAEA,SAASK,gBAAgBA,CAACL,MAAM,EAAE;MAChC,OAAOA,MAAM,GAAGA,MAAM,CAACM,MAAM,CAAC,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,GAAGP,MAAM,CAACQ,KAAK,CAAC,CAAC,CAAC,GAAG,EAAE;IACvE;IAEA,SAASC,UAAUA,CAACC,IAAI,EAAE;MACxB,IAAI,CAACA,IAAI,EAAE,OAAO,KAAK;MACvB,OAAO,IAAIC,IAAI,CAACD,IAAI,CAAC,CAACE,kBAAkB,CAAC,OAAO,EAAE;QAAEC,KAAK,EAAE,OAAO;QAAEC,GAAG,EAAE,SAAS;QAAEC,IAAI,EAAE,SAAS;QAAEC,IAAI,EAAE,SAAS;QAAEC,MAAM,EAAE;MAAU,CAAC,CAAC;IAC5I;IAEA,eAAeC,YAAYA,CAACC,EAAE,EAAE;MAC9B,IAAI,CAACC,OAAO,CAAC,8CAA8C,CAAC,EAAE;MAC9D,IAAI;QACF,MAAMlC,KAAK,CAACmC,MAAM,CAAC,GAAGlC,OAAO,aAAagC,EAAE,EAAE,CAAC;QAC/C/B,QAAQ,CAACI,KAAK,GAAGJ,QAAQ,CAACI,KAAK,CAAC8B,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACJ,EAAE,KAAKA,EAAE,CAAC;MAC1D,CAAC,CAAC,OAAOvB,GAAG,EAAE;QACZP,YAAY,CAACG,KAAK,GAAG,4CAA4C;QACjEK,OAAO,CAACC,KAAK,CAAC,sBAAsB,EAAEF,GAAG,CAAC;MAC5C;IACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}