{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, createStaticVNode as _createStaticVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"dashboard-container\"\n};\nconst _hoisted_2 = {\n  class: \"stats-grid\"\n};\nconst _hoisted_3 = {\n  class: \"stat-card\"\n};\nconst _hoisted_4 = {\n  class: \"stat-value\"\n};\nconst _hoisted_5 = {\n  class: \"stat-card\"\n};\nconst _hoisted_6 = {\n  class: \"stat-value\"\n};\nconst _hoisted_7 = {\n  class: \"stat-card\"\n};\nconst _hoisted_8 = {\n  class: \"stat-value\"\n};\nconst _hoisted_9 = {\n  class: \"stats-grid\"\n};\nconst _hoisted_10 = {\n  class: \"stat-card\"\n};\nconst _hoisted_11 = {\n  class: \"stat-value\"\n};\nconst _hoisted_12 = {\n  class: \"stat-card\"\n};\nconst _hoisted_13 = {\n  class: \"stat-value\"\n};\nconst _hoisted_14 = {\n  class: \"stat-card\"\n};\nconst _hoisted_15 = {\n  class: \"stat-value\"\n};\nconst _hoisted_16 = {\n  class: \"single-stat-card\"\n};\nconst _hoisted_17 = {\n  class: \"stat-card\"\n};\nconst _hoisted_18 = {\n  class: \"stat-value\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[7] || (_cache[7] = _createElementVNode(\"h2\", {\n    class: \"dashboard-title\"\n  }, \"Dashboard\", -1 /* CACHED */)), _cache[8] || (_cache[8] = _createTextVNode(\" ``` \", -1 /* CACHED */)), _createCommentVNode(\" Top Stats \"), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_cache[0] || (_cache[0] = _createElementVNode(\"div\", {\n    class: \"stat-label\"\n  }, \"Total members\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_4, _toDisplayString($setup.stats.total_members ?? '-'), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_5, [_cache[1] || (_cache[1] = _createElementVNode(\"div\", {\n    class: \"stat-label\"\n  }, \"Total families\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_6, _toDisplayString($setup.stats.total_families ?? '-'), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_7, [_cache[2] || (_cache[2] = _createElementVNode(\"div\", {\n    class: \"stat-label\"\n  }, \"Evacuation Areas\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_8, _toDisplayString($setup.stats.total_evacuation_areas ?? '-'), 1 /* TEXT */)])]), _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"div\", _hoisted_10, [_cache[3] || (_cache[3] = _createElementVNode(\"div\", {\n    class: \"stat-label\"\n  }, \"Available evacuation areas\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_11, _toDisplayString($setup.stats.available_evacuation_areas ?? '-'), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_12, [_cache[4] || (_cache[4] = _createElementVNode(\"div\", {\n    class: \"stat-label\"\n  }, \"Total facilities\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_13, _toDisplayString($setup.stats.total_facilities ?? '-'), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_14, [_cache[5] || (_cache[5] = _createElementVNode(\"div\", {\n    class: \"stat-label\"\n  }, \"Operational facilities\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_15, _toDisplayString($setup.stats.operational_facilities ?? '-'), 1 /* TEXT */)])]), _createCommentVNode(\" Evacuation Chart \"), _cache[9] || (_cache[9] = _createElementVNode(\"div\", {\n    class: \"charts-grid\"\n  }, [_createElementVNode(\"div\", {\n    class: \"chart-card evacuation-chart\"\n  }, [_createElementVNode(\"h3\", {\n    class: \"chart-title\"\n  }, \"Evacuation Areas\"), _createElementVNode(\"canvas\", {\n    id: \"evacuationChart\"\n  })])], -1 /* CACHED */)), _createCommentVNode(\" Forecasted Evacuees \"), _createElementVNode(\"div\", _hoisted_16, [_createElementVNode(\"div\", _hoisted_17, [_cache[6] || (_cache[6] = _createElementVNode(\"div\", {\n    class: \"stat-label\"\n  }, \"Latest forecasted evacuees\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_18, _toDisplayString($setup.stats.latest_forecast ?? $setup.latestForecast ?? '-'), 1 /* TEXT */)])]), _createCommentVNode(\" Forecast chart \"), _cache[10] || (_cache[10] = _createElementVNode(\"div\", {\n    class: \"charts-grid\"\n  }, [_createElementVNode(\"div\", {\n    class: \"chart-card\"\n  }, [_createElementVNode(\"h3\", {\n    class: \"chart-title\"\n  }, \"Evacuees Forecast\"), _createElementVNode(\"canvas\", {\n    id: \"forecastChart\"\n  })])], -1 /* CACHED */)), _createCommentVNode(\" Two circle charts side by side \"), _cache[11] || (_cache[11] = _createStaticVNode(\"<div class=\\\"charts-grid circle-charts\\\" data-v-650eb1cf><div class=\\\"chart-card\\\" data-v-650eb1cf><h3 class=\\\"chart-title\\\" data-v-650eb1cf>Facility Status</h3><canvas id=\\\"facilityChart\\\" data-v-650eb1cf></canvas></div><div class=\\\"chart-card\\\" data-v-650eb1cf><h3 class=\\\"chart-title\\\" data-v-650eb1cf>Family Status</h3><canvas id=\\\"familyChart\\\" data-v-650eb1cf></canvas></div></div> ``` \", 2))]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_createCommentVNode","_hoisted_2","_hoisted_3","_hoisted_4","_toDisplayString","$setup","stats","total_members","_hoisted_5","_hoisted_6","total_families","_hoisted_7","_hoisted_8","total_evacuation_areas","_hoisted_9","_hoisted_10","_hoisted_11","available_evacuation_areas","_hoisted_12","_hoisted_13","total_facilities","_hoisted_14","_hoisted_15","operational_facilities","id","_hoisted_16","_hoisted_17","_hoisted_18","latest_forecast","latestForecast"],"sources":["C:\\VUEprojects\\crud-app\\src\\pages\\DashboardPage.vue"],"sourcesContent":["<template>\r\n  <div class=\"dashboard-container\">\r\n    <h2 class=\"dashboard-title\">Dashboard</h2>\r\n\r\n```\r\n<!-- Top Stats -->\r\n<div class=\"stats-grid\">\r\n  <div class=\"stat-card\">\r\n    <div class=\"stat-label\">Total members</div>\r\n    <div class=\"stat-value\">{{ stats.total_members ?? '-' }}</div>\r\n  </div>\r\n  <div class=\"stat-card\">\r\n    <div class=\"stat-label\">Total families</div>\r\n    <div class=\"stat-value\">{{ stats.total_families ?? '-' }}</div>\r\n  </div>\r\n  <div class=\"stat-card\">\r\n    <div class=\"stat-label\">Evacuation Areas</div>\r\n    <div class=\"stat-value\">{{ stats.total_evacuation_areas ?? '-' }}</div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"stats-grid\">\r\n  <div class=\"stat-card\">\r\n    <div class=\"stat-label\">Available evacuation areas</div>\r\n    <div class=\"stat-value\">{{ stats.available_evacuation_areas ?? '-' }}</div>\r\n  </div>\r\n  <div class=\"stat-card\">\r\n    <div class=\"stat-label\">Total facilities</div>\r\n    <div class=\"stat-value\">{{ stats.total_facilities ?? '-' }}</div>\r\n  </div>\r\n  <div class=\"stat-card\">\r\n    <div class=\"stat-label\">Operational facilities</div>\r\n    <div class=\"stat-value\">{{ stats.operational_facilities ?? '-' }}</div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Evacuation Chart -->\r\n<div class=\"charts-grid\">\r\n  <div class=\"chart-card evacuation-chart\">\r\n    <h3 class=\"chart-title\">Evacuation Areas</h3>\r\n    <canvas id=\"evacuationChart\"></canvas>\r\n  </div>\r\n</div>\r\n\r\n<!-- Forecasted Evacuees -->\r\n<div class=\"single-stat-card\">\r\n  <div class=\"stat-card\">\r\n    <div class=\"stat-label\">Latest forecasted evacuees</div>\r\n    <div class=\"stat-value\">{{ stats.latest_forecast ?? (latestForecast ?? '-') }}</div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Forecast chart -->\r\n<div class=\"charts-grid\">\r\n  <div class=\"chart-card\">\r\n    <h3 class=\"chart-title\">Evacuees Forecast</h3>\r\n    <canvas id=\"forecastChart\"></canvas>\r\n  </div>\r\n</div>\r\n\r\n<!-- Two circle charts side by side -->\r\n<div class=\"charts-grid circle-charts\">\r\n  <div class=\"chart-card\">\r\n    <h3 class=\"chart-title\">Facility Status</h3>\r\n    <canvas id=\"facilityChart\"></canvas>\r\n  </div>\r\n  <div class=\"chart-card\">\r\n    <h3 class=\"chart-title\">Family Status</h3>\r\n    <canvas id=\"familyChart\"></canvas>\r\n  </div>\r\n</div>\r\n```\r\n\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport api from '../services/api';\r\nimport { Chart, registerables } from 'chart.js';\r\n\r\nChart.register(...registerables);\r\n\r\nconst stats = ref({});\r\nconst latestForecast = ref(null);\r\n\r\nasync function loadDashboard() {\r\n  try {\r\n    const res = await api.get('/dashboard');\r\n    if (res && res.data) {\r\n      const body = res.data;\r\n      if (body.stats) stats.value = body.stats;\r\n      if (body.evacuationAreaData) buildEvacuationChart(body.evacuationAreaData);\r\n      if (body.facilityStatusData) buildFacilityChart(body.facilityStatusData);\r\n      if (body.familyStatusData) buildFamilyChart(body.familyStatusData);\r\n      if (body.forecastData) buildForecastChart(body.forecastData);\r\n      if (body.latestForecast !== undefined) latestForecast.value = body.latestForecast;\r\n    }\r\n  } catch (e) {\r\n    console.error('dashboard load failed', e);\r\n  }\r\n}\r\n\r\nfunction buildEvacuationChart(data) {\r\n  const ctx = document.getElementById('evacuationChart');\r\n  if (!ctx) return;\r\n  const labels = data.map(d => d.name);\r\n  const occupancy = data.map(d => d.current_occupancy);\r\n  const capacity = data.map(d => d.capacity);\r\n  new Chart(ctx, {\r\n    type: 'bar',\r\n    data: { labels, datasets: [{ label: 'Current Occupancy', data: occupancy, backgroundColor: '#0d6efd' }, { label: 'Capacity', data: capacity, backgroundColor: '#6c757d' }] }\r\n  });\r\n}\r\n\r\nfunction buildFacilityChart(data) {\r\n  const ctx = document.getElementById('facilityChart');\r\n  if (!ctx) return;\r\n  const labels = data.map(d => d.status);\r\n  const counts = data.map(d => d.count);\r\n  new Chart(ctx, {\r\n    type: 'doughnut',\r\n    data: { labels, datasets: [{ data: counts, backgroundColor: ['#198754', '#ffc107', '#dc3545', '#0d6efd'] }] }\r\n  });\r\n}\r\n\r\nfunction buildFamilyChart(data) {\r\n  const ctx = document.getElementById('familyChart');\r\n  if (!ctx) return;\r\n  const labels = data.map(d => d.status);\r\n  const counts = data.map(d => d.count);\r\n  new Chart(ctx, {\r\n    type: 'pie',\r\n    data: { labels, datasets: [{ data: counts, backgroundColor: ['#0d6efd', '#6f42c1', '#fd7e14'] }] }\r\n  });\r\n}\r\n\r\nfunction buildForecastChart(data) {\r\n  const ctx = document.getElementById('forecastChart');\r\n  if (!ctx) return;\r\n  const labels = data.map(d => d.date);\r\n  const actual = data.map(d => d.actual === null ? null : Number(d.actual));\r\n  const forecast = data.map(d => Number(d.forecast));\r\n  new Chart(ctx, {\r\n    type: 'line',\r\n    data: { labels, datasets: [{ label: 'Actual', data: actual, borderColor: '#198754', backgroundColor: 'rgba(25,135,84,0.1)', spanGaps: true }, { label: 'Forecast', data: forecast, borderColor: '#0d6efd', backgroundColor: 'rgba(13,110,253,0.08)' }] },\r\n    options: { scales: { x: { display: true }, y: { display: true, beginAtZero: true } } }\r\n  });\r\n}\r\n\r\nonMounted(() => loadDashboard());\r\n</script>\r\n\r\n<style scoped>\r\n.dashboard-container { max-width: 1200px; margin: 0 auto; padding: 20px; font-family: Arial,sans-serif; color:#333; }\r\n.dashboard-title { font-size:28px; font-weight:600; margin-bottom:20px; }\r\n.stats-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:20px; margin-bottom:20px; }\r\n.stat-card { padding:20px; border-radius:12px; box-shadow:0 4px 12px rgba(0,0,0,0.08); text-align:center; color:#fff; }\r\n.stat-card:nth-child(1) { background-color:#0d6efd; }\r\n.stat-card:nth-child(2) { background-color:#198754; }\r\n.stat-card:nth-child(3) { background-color:#ffc107; color:#333; }\r\n.stat-card:nth-child(4) { background-color:#fd7e14; }\r\n.stat-card:nth-child(5) { background-color:#6f42c1; }\r\n.stat-card:nth-child(6) { background-color:#dc3545; }\r\n.single-stat-card .stat-card { background-color:#0dcaf0; color:#333; margin:20px 0; }\r\n.stat-label { font-size:14px; margin-bottom:8px; opacity:0.85; }\r\n.stat-value { font-size:24px; font-weight:700; }\r\n.charts-grid { display:grid; grid-template-columns:1fr; gap:20px; margin-bottom:20px; }\r\n.chart-card { background-color:#fff; padding:20px; border-radius:12px; box-shadow:0 4px 12px rgba(0,0,0,0.08); }\r\n.chart-title { font-weight:600; margin-bottom:12px; }\r\n.evacuation-chart { grid-column:1/-1; }\r\n.circle-charts { grid-template-columns:1fr; }\r\n@media(min-width:768px) { .charts-grid { grid-template-columns:1fr 1fr; } .evacuation-chart { grid-column:1/-1; } .circle-charts { grid-template-columns:1fr 1fr; gap:20px; } }\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}