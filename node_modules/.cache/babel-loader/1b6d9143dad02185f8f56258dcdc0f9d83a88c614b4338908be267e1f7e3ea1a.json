{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = {\n  class: \"header\"\n};\nconst _hoisted_3 = {\n  key: 0,\n  class: \"error-message\"\n};\nconst _hoisted_4 = {\n  key: 1,\n  class: \"loading-card\"\n};\nconst _hoisted_5 = {\n  class: \"card\"\n};\nconst _hoisted_6 = {\n  class: \"name\"\n};\nconst _hoisted_7 = {\n  class: \"contact\"\n};\nconst _hoisted_8 = {\n  class: \"actions\"\n};\nconst _hoisted_9 = [\"onClick\"];\nconst _hoisted_10 = {\n  key: 0\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" Header & Add Button \"), _createElementVNode(\"div\", _hoisted_2, [_cache[1] || (_cache[1] = _createElementVNode(\"div\", null, [_createElementVNode(\"h1\", null, \"Families\"), _createElementVNode(\"p\", null, \"Manage evacuated families and members\")], -1 /* CACHED */)), _createVNode(_component_router_link, {\n    to: \"/families/create\",\n    class: \"add-btn\"\n  }, {\n    default: _withCtx(() => [...(_cache[0] || (_cache[0] = [_createElementVNode(\"span\", {\n      class: \"plus\"\n    }, \"+\", -1 /* CACHED */), _createTextVNode(\" Add Family \", -1 /* CACHED */)]))]),\n    _: 1 /* STABLE */\n  })]), _cache[7] || (_cache[7] = _createTextVNode(\" ``` \", -1 /* CACHED */)), _createCommentVNode(\" Error Message \"), $setup.generalError ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_createElementVNode(\"p\", null, _toDisplayString($setup.generalError), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Loading State \"), $setup.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [...(_cache[2] || (_cache[2] = [_createElementVNode(\"div\", {\n    class: \"loading-content\"\n  }, [_createElementVNode(\"div\", {\n    class: \"spinner\"\n  }), _createElementVNode(\"span\", null, \"Loading families...\")], -1 /* CACHED */)]))])) : (_openBlock(), _createElementBlock(_Fragment, {\n    key: 2\n  }, [_createCommentVNode(\" Families Table \"), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"table\", null, [_cache[6] || (_cache[6] = _createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", null, \"Family Head\"), _createElementVNode(\"th\", null, \"Members\"), _createElementVNode(\"th\", null, \"Evacuation Area\"), _createElementVNode(\"th\", null, \"Status\"), _createElementVNode(\"th\", null, \"Evacuated At\"), _createElementVNode(\"th\", null, \"Actions\")])], -1 /* CACHED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.families, family => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: family.id,\n      class: \"hover-row\"\n    }, [_createElementVNode(\"td\", null, [_createElementVNode(\"div\", _hoisted_6, _toDisplayString(family.family_head_name), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_7, _toDisplayString(family.contact_number || 'No contact'), 1 /* TEXT */)]), _createElementVNode(\"td\", null, _toDisplayString(family.total_members), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(family.evacuation_area?.name || 'Not assigned'), 1 /* TEXT */), _createElementVNode(\"td\", null, [_createElementVNode(\"span\", {\n      class: _normalizeClass($setup.getStatusBadge(family.status))\n    }, _toDisplayString($setup.capitalizeStatus(family.status)), 3 /* TEXT, CLASS */)]), _createElementVNode(\"td\", null, _toDisplayString($setup.formatDate(family.evacuated_at)), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_8, [_createVNode(_component_router_link, {\n      to: `/families/${family.id}`,\n      class: \"view-btn\"\n    }, {\n      default: _withCtx(() => [...(_cache[3] || (_cache[3] = [_createTextVNode(\"View\", -1 /* CACHED */)]))]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"to\"]), _createVNode(_component_router_link, {\n      to: `/families/${family.id}/edit`,\n      class: \"edit-btn\"\n    }, {\n      default: _withCtx(() => [...(_cache[4] || (_cache[4] = [_createTextVNode(\"Edit\", -1 /* CACHED */)]))]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"to\"]), _createElementVNode(\"button\", {\n      onClick: $event => $setup.deleteFamily(family.id),\n      class: \"delete-btn\"\n    }, \"Delete\", 8 /* PROPS */, _hoisted_9)])]);\n  }), 128 /* KEYED_FRAGMENT */)), $setup.families.length === 0 ? (_openBlock(), _createElementBlock(\"tr\", _hoisted_10, [...(_cache[5] || (_cache[5] = [_createElementVNode(\"td\", {\n    colspan: \"6\",\n    class: \"empty\"\n  }, \"No families found.\", -1 /* CACHED */)]))])) : _createCommentVNode(\"v-if\", true)])])])], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */)), _cache[8] || (_cache[8] = _createTextVNode(\" ``` \", -1 /* CACHED */))]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createCommentVNode","_createElementVNode","_hoisted_2","_createVNode","_component_router_link","to","_cache","$setup","generalError","_hoisted_3","_toDisplayString","loading","_hoisted_4","_Fragment","key","_hoisted_5","_renderList","families","family","id","_hoisted_6","family_head_name","_hoisted_7","contact_number","total_members","evacuation_area","name","_normalizeClass","getStatusBadge","status","capitalizeStatus","formatDate","evacuated_at","_hoisted_8","onClick","$event","deleteFamily","_hoisted_9","length","_hoisted_10","colspan"],"sources":["C:\\VUEprojects\\crud-app\\src\\pages\\FamiliesList.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <!-- Header & Add Button -->\r\n    <div class=\"header\">\r\n      <div>\r\n        <h1>Families</h1>\r\n        <p>Manage evacuated families and members</p>\r\n      </div>\r\n      <router-link to=\"/families/create\" class=\"add-btn\">\r\n        <span class=\"plus\">+</span> Add Family\r\n      </router-link>\r\n    </div>\r\n\r\n```\r\n<!-- Error Message -->\r\n<div v-if=\"generalError\" class=\"error-message\">\r\n  <p>{{ generalError }}</p>\r\n</div>\r\n\r\n<!-- Loading State -->\r\n<div v-if=\"loading\" class=\"loading-card\">\r\n  <div class=\"loading-content\">\r\n    <div class=\"spinner\"></div>\r\n    <span>Loading families...</span>\r\n  </div>\r\n</div>\r\n\r\n<!-- Families Table -->\r\n<div v-else class=\"card\">\r\n  <table>\r\n    <thead>\r\n      <tr>\r\n        <th>Family Head</th>\r\n        <th>Members</th>\r\n        <th>Evacuation Area</th>\r\n        <th>Status</th>\r\n        <th>Evacuated At</th>\r\n        <th>Actions</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr v-for=\"family in families\" :key=\"family.id\" class=\"hover-row\">\r\n        <td>\r\n          <div class=\"name\">{{ family.family_head_name }}</div>\r\n          <div class=\"contact\">{{ family.contact_number || 'No contact' }}</div>\r\n        </td>\r\n        <td>{{ family.total_members }}</td>\r\n        <td>{{ family.evacuation_area?.name || 'Not assigned' }}</td>\r\n        <td>\r\n          <span :class=\"getStatusBadge(family.status)\">{{ capitalizeStatus(family.status) }}</span>\r\n        </td>\r\n        <td>{{ formatDate(family.evacuated_at) }}</td>\r\n        <td class=\"actions\">\r\n          <router-link :to=\"`/families/${family.id}`\" class=\"view-btn\">View</router-link>\r\n          <router-link :to=\"`/families/${family.id}/edit`\" class=\"edit-btn\">Edit</router-link>\r\n          <button @click=\"deleteFamily(family.id)\" class=\"delete-btn\">Delete</button>\r\n        </td>\r\n      </tr>\r\n      <tr v-if=\"families.length === 0\">\r\n        <td colspan=\"6\" class=\"empty\">No families found.</td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n</div>\r\n```\r\n\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, inject } from 'vue'\r\nimport axios from 'axios'\r\n\r\nconst baseUrl = inject('baseUrl', '')\r\nconst families = ref([])\r\nconst generalError = ref('')\r\nconst loading = ref(true)\r\n\r\nonMounted(() => fetchFamilies())\r\n\r\nasync function fetchFamilies() {\r\n  loading.value = true\r\n  generalError.value = ''\r\n  try {\r\n    const res = await axios.get(`${baseUrl}/families`)\r\n    families.value = res.data?.data || res.data || []\r\n  } catch (err) {\r\n    generalError.value = 'Failed to load families. Please try again.'\r\n    console.error('Fetch families error:', err)\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\nfunction getStatusBadge(status) {\r\n  const badges = {\r\n    evacuated: 'status-evacuated',\r\n    returned: 'status-returned',\r\n    pending: 'status-pending'\r\n  }\r\n  return badges[status] || 'status-unknown'\r\n}\r\n\r\nfunction capitalizeStatus(status) {\r\n  return status ? status.charAt(0).toUpperCase() + status.slice(1) : ''\r\n}\r\n\r\nfunction formatDate(date) {\r\n  if (!date) return 'N/A'\r\n  return new Date(date).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric', hour: '2-digit', minute: '2-digit' })\r\n}\r\n\r\nasync function deleteFamily(id) {\r\n  if (!confirm('Are you sure you want to delete this family?')) return\r\n  try {\r\n    await axios.delete(`${baseUrl}/families/${id}`)\r\n    families.value = families.value.filter(f => f.id !== id)\r\n  } catch (err) {\r\n    generalError.value = 'Failed to delete family. Please try again.'\r\n    console.error('Delete family error:', err)\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n/* Container & Card */\r\n.container {\r\n  max-width: 1000px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n}\r\n.card {\r\n  background-color: #fff;\r\n  border-radius: 10px;\r\n  padding: 20px;\r\n  overflow-x: auto;\r\n  box-shadow: 0 2px 12px rgba(0,0,0,0.08);\r\n}\r\n\r\n/* Header */\r\n.header {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n}\r\n.header h1 {\r\n  font-size: 2rem;\r\n  margin: 0;\r\n}\r\n.header p {\r\n  color: #555;\r\n  margin-top: 5px;\r\n}\r\n.add-btn {\r\n  background-color: #4f46e5;\r\n  color: #fff;\r\n  text-decoration: none;\r\n  padding: 8px 14px;\r\n  border-radius: 6px;\r\n  display: inline-flex;\r\n  align-items: center;\r\n  font-weight: 500;\r\n}\r\n.add-btn .plus {\r\n  margin-right: 5px;\r\n}\r\n.add-btn:hover {\r\n  background-color: #4338ca;\r\n}\r\n\r\n/* Error Message */\r\n.error-message {\r\n  background-color: #fee2e2;\r\n  border-left: 4px solid #f87171;\r\n  color: #b91c1c;\r\n  padding: 12px 16px;\r\n  border-radius: 5px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n/* Loading State */\r\n.loading-card {\r\n  background-color: #fff;\r\n  border-radius: 10px;\r\n  padding: 40px 20px;\r\n  text-align: center;\r\n  box-shadow: 0 2px 12px rgba(0,0,0,0.08);\r\n}\r\n.loading-content {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n  font-weight: 500;\r\n  color: #374151;\r\n}\r\n.spinner {\r\n  border: 4px solid #e5e7eb;\r\n  border-top: 4px solid #4f46e5;\r\n  border-radius: 50%;\r\n  width: 24px;\r\n  height: 24px;\r\n  animation: spin 1s linear infinite;\r\n}\r\n@keyframes spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n\r\n/* Table */\r\ntable {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  min-width: 700px;\r\n}\r\nth, td {\r\n  padding: 12px 10px;\r\n  text-align: left;\r\n}\r\nth {\r\n  font-weight: 600;\r\n  font-size: 0.85rem;\r\n  text-transform: uppercase;\r\n  color: #6b7280;\r\n  border-bottom: 2px solid #e5e7eb;\r\n}\r\ntd {\r\n  font-size: 0.95rem;\r\n  color: #111827;\r\n  border-bottom: 1px solid #e5e7eb;\r\n}\r\n.hover-row:hover {\r\n  background-color: #f9fafb;\r\n  transition: background 0.2s;\r\n}\r\n\r\n/* Status Badges */\r\n.status-evacuated {\r\n  background-color: #d1fae5;\r\n  color: #065f46;\r\n  padding: 2px 8px;\r\n  border-radius: 9999px;\r\n  font-size: 0.75rem;\r\n  font-weight: 600;\r\n}\r\n.status-returned {\r\n  background-color: #dbeafe;\r\n  color: #1e40af;\r\n  padding: 2px 8px;\r\n  border-radius: 9999px;\r\n  font-size: 0.75rem;\r\n  font-weight: 600;\r\n}\r\n.status-pending {\r\n  background-color: #fef9c3;\r\n  color: #78350f;\r\n  padding: 2px 8px;\r\n  border-radius: 9999px;\r\n  font-size: 0.75rem;\r\n  font-weight: 600;\r\n}\r\n.status-unknown {\r\n  background-color: #f3f4f6;\r\n  color: #374151;\r\n  padding: 2px 8px;\r\n  border-radius: 9999px;\r\n  font-size: 0.75rem;\r\n  font-weight: 600;\r\n}\r\n\r\n/* Actions */\r\n.actions a, .actions button {\r\n  margin-right: 10px;\r\n  font-size: 0.9rem;\r\n  background: none;\r\n  border: none;\r\n  cursor: pointer;\r\n  text-decoration: none;\r\n}\r\n.view-btn { color: #4f46e5; }\r\n.view-btn:hover { text-decoration: underline; }\r\n.edit-btn { color: #059669; }\r\n.edit-btn:hover { text-decoration: underline; }\r\n.delete-btn { color: #dc2626; }\r\n.delete-btn:hover { text-decoration: underline; }\r\n\r\n/* Empty Row */\r\n.empty {\r\n  text-align: center;\r\n  color: #6b7280;\r\n  padding: 20px;\r\n}\r\n\r\n/* Responsive */\r\n@media (max-width: 768px) {\r\n  table {\r\n    display: block;\r\n    overflow-x: auto;\r\n  }\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}