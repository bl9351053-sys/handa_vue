{"ast":null,"code":"import { createApp } from 'vue';\nimport App from './App.vue';\nimport router from './router';\nimport axios from 'axios';\nimport './index.css';\nimport 'font-awesome/css/font-awesome.min.css';\nimport 'leaflet/dist/leaflet.css';\nimport VueSweetalert2 from 'vue-sweetalert2';\nimport 'sweetalert2/dist/sweetalert2.min.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport 'bootstrap/dist/js/bootstrap.bundle.min.js';\nimport 'bootstrap-icons/font/bootstrap-icons.css';\nconst app = createApp(App).use(router).use(VueSweetalert2);\n\n// Global Vue error handler to surface helpful debugging info during development\napp.config.errorHandler = (err, vm, info) => {\n  // vm may be null in some failures; log as much as possible\n  try {\n    console.error('[Vue error handler]', {\n      err,\n      info,\n      component: vm && vm.type && (vm.type.name || vm.type.__file)\n    });\n  } catch (e) {\n    console.error('[Vue error handler] failed to log', e);\n  }\n};\n\n// Window-level handlers for unhandled exceptions and rejections\nwindow.addEventListener('error', ev => {\n  console.error('[window error]', ev.error || ev.message, ev);\n});\nwindow.addEventListener('unhandledrejection', ev => {\n  console.error('[unhandledrejection]', ev.reason || ev);\n});\n\n// Admin API base (used by the main app pages like login/register)\nconst adminApiBase = (process.env.VUE_APP_ADMIN_API_URL || 'http://127.0.0.1:8000/api').replace(/\\/$/, '');\napp.provide('baseUrl', adminApiBase);\n\n// Configure default axios to point to admin API by default\naxios.defaults.baseURL = adminApiBase;\n\n// If an admin token exists in localStorage (login), main.js already sets it in axios defaults earlier.\n\n// Create a dedicated axios instance for resident pages that talks to the same server as admin API\nimport axiosLib from 'axios';\nconst residentApiBase = (process.env.VUE_APP_RESIDENT_API_URL || adminApiBase).replace(/\\/$/, '');\nconst residentAxios = axiosLib.create({\n  baseURL: residentApiBase,\n  headers: {\n    Accept: 'application/json'\n  }\n});\n\n// Optionally set resident token from env at build time\nif (process.env.VUE_APP_RESIDENT_API_TOKEN) {\n  residentAxios.defaults.headers.common['Authorization'] = `Bearer ${process.env.VUE_APP_RESIDENT_API_TOKEN}`;\n}\n\n// Also support setting a resident-specific token at runtime from localStorage\n// This allows the resident UI to call protected endpoints (like sync) when a token is provided on the client\ntry {\n  const residentToken = localStorage.getItem('resident_token');\n  if (residentToken) {\n    residentAxios.defaults.headers.common['Authorization'] = `Bearer ${residentToken}`;\n  }\n} catch (e) {\n  // ignore localStorage access errors in some environments\n}\n\n// Provide residentAxios so resident layouts/pages can inject it\napp.provide('residentAxios', residentAxios);\n\n// set token on start if exists\nconst token = localStorage.getItem('token');\nif (token) {\n  axios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n  // lazy import AuthService to set header\n  import('./services/AuthService').then(({\n    default: AuthService\n  }) => AuthService.setToken(token));\n}\n\n// Add axios interceptor to set token on every request\naxios.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\napp.mount('#app');","map":{"version":3,"names":["createApp","App","router","axios","VueSweetalert2","app","use","config","errorHandler","err","vm","info","console","error","component","type","name","__file","e","window","addEventListener","ev","message","reason","adminApiBase","process","env","VUE_APP_ADMIN_API_URL","replace","provide","defaults","baseURL","axiosLib","residentApiBase","VUE_APP_RESIDENT_API_URL","residentAxios","create","headers","Accept","VUE_APP_RESIDENT_API_TOKEN","common","residentToken","localStorage","getItem","token","then","default","AuthService","setToken","interceptors","request","Authorization","mount"],"sources":["C:/VUEprojects/crud-app/src/main.js"],"sourcesContent":["import { createApp } from 'vue'\r\nimport App from './App.vue'\r\nimport router from './router'\r\nimport axios from 'axios'\r\nimport './index.css';\r\nimport 'font-awesome/css/font-awesome.min.css';\r\nimport 'leaflet/dist/leaflet.css';\r\n\r\nimport VueSweetalert2 from 'vue-sweetalert2';\r\nimport 'sweetalert2/dist/sweetalert2.min.css';\r\n\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport 'bootstrap/dist/js/bootstrap.bundle.min.js';\r\nimport 'bootstrap-icons/font/bootstrap-icons.css';\r\n\r\nconst app = createApp(App).use(router).use(VueSweetalert2);\r\n\r\n// Global Vue error handler to surface helpful debugging info during development\r\napp.config.errorHandler = (err, vm, info) => {\r\n  // vm may be null in some failures; log as much as possible\r\n  try {\r\n    console.error('[Vue error handler]', { err, info, component: vm && vm.type && (vm.type.name || vm.type.__file) });\r\n  } catch (e) {\r\n    console.error('[Vue error handler] failed to log', e);\r\n  }\r\n};\r\n\r\n// Window-level handlers for unhandled exceptions and rejections\r\nwindow.addEventListener('error', (ev) => {\r\n  console.error('[window error]', ev.error || ev.message, ev);\r\n});\r\nwindow.addEventListener('unhandledrejection', (ev) => {\r\n  console.error('[unhandledrejection]', ev.reason || ev);\r\n});\r\n\r\n// Admin API base (used by the main app pages like login/register)\r\nconst adminApiBase = (process.env.VUE_APP_ADMIN_API_URL || 'http://127.0.0.1:8000/api').replace(/\\/$/, '');\r\napp.provide('baseUrl', adminApiBase);\r\n\r\n// Configure default axios to point to admin API by default\r\naxios.defaults.baseURL = adminApiBase;\r\n\r\n// If an admin token exists in localStorage (login), main.js already sets it in axios defaults earlier.\r\n\r\n// Create a dedicated axios instance for resident pages that talks to the same server as admin API\r\nimport axiosLib from 'axios';\r\nconst residentApiBase = (process.env.VUE_APP_RESIDENT_API_URL || adminApiBase).replace(/\\/$/, '');\r\nconst residentAxios = axiosLib.create({ baseURL: residentApiBase, headers: { Accept: 'application/json' } });\r\n\r\n// Optionally set resident token from env at build time\r\nif (process.env.VUE_APP_RESIDENT_API_TOKEN) {\r\n  residentAxios.defaults.headers.common['Authorization'] = `Bearer ${process.env.VUE_APP_RESIDENT_API_TOKEN}`;\r\n}\r\n\r\n// Also support setting a resident-specific token at runtime from localStorage\r\n// This allows the resident UI to call protected endpoints (like sync) when a token is provided on the client\r\ntry {\r\n  const residentToken = localStorage.getItem('resident_token');\r\n  if (residentToken) {\r\n    residentAxios.defaults.headers.common['Authorization'] = `Bearer ${residentToken}`;\r\n  }\r\n} catch (e) {\r\n  // ignore localStorage access errors in some environments\r\n}\r\n\r\n// Provide residentAxios so resident layouts/pages can inject it\r\napp.provide('residentAxios', residentAxios);\r\n\r\n// set token on start if exists\r\nconst token = localStorage.getItem('token');\r\nif (token) {\r\n\taxios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\r\n\t// lazy import AuthService to set header\r\n\timport('./services/AuthService').then(({ default: AuthService }) => AuthService.setToken(token));\r\n}\r\n\r\n// Add axios interceptor to set token on every request\r\naxios.interceptors.request.use((config) => {\r\n  const token = localStorage.getItem('token');\r\n  if (token) {\r\n    config.headers.Authorization = `Bearer ${token}`;\r\n  }\r\n  return config;\r\n});\r\n\r\napp.mount('#app');\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}