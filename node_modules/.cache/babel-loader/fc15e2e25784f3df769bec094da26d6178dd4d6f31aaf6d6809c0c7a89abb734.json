{"ast":null,"code":"import { ref, onMounted } from 'vue';\nimport axios from 'axios';\nexport default {\n  __name: 'ReportEvacuation',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const families = ref([]);\n    const evacuationAreas = ref([]);\n    const summary = ref({\n      total_families: 0,\n      total_evacuees: 0\n    });\n    const filters = ref({\n      status: '',\n      evacuation_area_id: '',\n      date_from: '',\n      date_to: ''\n    });\n    function formatDate(dt) {\n      return dt ? new Date(dt).toLocaleString() : 'N/A';\n    }\n    async function fetchReport() {\n      try {\n        const params = {\n          ...filters.value\n        };\n        const res = await axios.get('/api/reports/evacuation', {\n          params\n        });\n        families.value = res.data.data;\n        summary.value = res.data.summary;\n      } catch (e) {\n        console.error(e);\n      }\n    }\n    onMounted(async () => {\n      const areas = await axios.get('/api/evacuation-areas');\n      evacuationAreas.value = areas.data;\n      fetchReport();\n    });\n    const __returned__ = {\n      families,\n      evacuationAreas,\n      summary,\n      filters,\n      formatDate,\n      fetchReport,\n      ref,\n      onMounted,\n      get axios() {\n        return axios;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","axios","families","evacuationAreas","summary","total_families","total_evacuees","filters","status","evacuation_area_id","date_from","date_to","formatDate","dt","Date","toLocaleString","fetchReport","params","value","res","get","data","e","console","error","areas"],"sources":["C:/VUEprojects/crud-app/src/pages/ReportEvacuation.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <div class=\"header flex justify-between items-center mb-6\">\r\n      <h1 class=\"text-3xl font-bold gradient-text\">Evacuation Report</h1>\r\n    </div>\r\n\r\n```\r\n<!-- Filters -->\r\n<div class=\"card mb-6\">\r\n  <div class=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n    <input v-model=\"filters.status\" placeholder=\"Status\" class=\"input-field\" />\r\n    <select v-model=\"filters.evacuation_area_id\" class=\"input-field\">\r\n      <option value=\"\">All Areas</option>\r\n      <option v-for=\"area in evacuationAreas\" :key=\"area.id\" :value=\"area.id\">{{ area.name }}</option>\r\n    </select>\r\n    <input type=\"date\" v-model=\"filters.date_from\" class=\"input-field\" />\r\n    <input type=\"date\" v-model=\"filters.date_to\" class=\"input-field\" />\r\n    <button @click=\"fetchReport\" class=\"btn-submit col-span-1 md:col-span-1\">Filter</button>\r\n  </div>\r\n</div>\r\n\r\n<!-- Summary -->\r\n<div class=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6\">\r\n  <div class=\"info-box purple\">\r\n    <p class=\"label\">Total Families</p>\r\n    <p class=\"value\">{{ summary.total_families }}</p>\r\n  </div>\r\n  <div class=\"info-box green\">\r\n    <p class=\"label\">Total Evacuees</p>\r\n    <p class=\"value\">{{ summary.total_evacuees }}</p>\r\n  </div>\r\n</div>\r\n\r\n<!-- Table -->\r\n<div class=\"card\">\r\n  <table class=\"w-full table-auto border-collapse\">\r\n    <thead>\r\n      <tr>\r\n        <th class=\"th\">Family Head</th>\r\n        <th class=\"th\">Contact</th>\r\n        <th class=\"th\">Address</th>\r\n        <th class=\"th\">Members</th>\r\n        <th class=\"th\">Evacuation Area</th>\r\n        <th class=\"th\">Status</th>\r\n        <th class=\"th\">Evacuated At</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr v-for=\"family in families\" :key=\"family.id\">\r\n        <td class=\"td\">{{ family.family_head_name }}</td>\r\n        <td class=\"td\">{{ family.contact_number }}</td>\r\n        <td class=\"td\">{{ family.address }}</td>\r\n        <td class=\"td\">{{ family.total_members }}</td>\r\n        <td class=\"td\">{{ family.evacuationArea?.name || 'N/A' }}</td>\r\n        <td class=\"td\">{{ family.status }}</td>\r\n        <td class=\"td\">{{ formatDate(family.evacuated_at) }}</td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n</div>\r\n```\r\n\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue'\r\nimport axios from 'axios'\r\n\r\nconst families = ref([])\r\nconst evacuationAreas = ref([])\r\nconst summary = ref({ total_families: 0, total_evacuees: 0 })\r\nconst filters = ref({ status: '', evacuation_area_id: '', date_from: '', date_to: '' })\r\n\r\nfunction formatDate(dt) { return dt ? new Date(dt).toLocaleString() : 'N/A' }\r\n\r\nasync function fetchReport() {\r\n  try {\r\n    const params = { ...filters.value }\r\n    const res = await axios.get('/api/reports/evacuation', { params })\r\n    families.value = res.data.data\r\n    summary.value = res.data.summary\r\n  } catch (e) {\r\n    console.error(e)\r\n  }\r\n}\r\n\r\nonMounted(async () => {\r\n  const areas = await axios.get('/api/evacuation-areas')\r\n  evacuationAreas.value = areas.data\r\n  fetchReport()\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.container { max-width: 1100px; margin:0 auto; padding:20px; }\r\n.gradient-text { background: linear-gradient(90deg,#6366f1,#f43f5e); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }\r\n.card { background:#fff; border-radius:12px; padding:20px; box-shadow:0 4px 12px rgba(0,0,0,0.08); margin-bottom:20px; }\r\n.input-field { border:1px solid #d1d5db; border-radius:8px; padding:8px; width:100%; }\r\n.btn-submit { background:#4f46e5; color:#fff; padding:8px 12px; border-radius:8px; }\r\n.info-box { padding:15px; border-radius:12px; }\r\n.info-box.purple { background:#f3e8ff; color:#7c3aed; }\r\n.info-box.green { background:#d1fae5; color:#059669; }\r\ntable { width:100%; border-collapse:collapse; }\r\n.th, .td { padding:8px; border:1px solid #e5e7eb; text-align:left; }\r\n</style>\r\n"],"mappings":"AAkEA,SAASA,GAAG,EAAEC,SAAS,QAAQ,KAAK;AACpC,OAAOC,KAAK,MAAM,OAAO;;;;;;;IAEzB,MAAMC,QAAQ,GAAGH,GAAG,CAAC,EAAE,CAAC;IACxB,MAAMI,eAAe,GAAGJ,GAAG,CAAC,EAAE,CAAC;IAC/B,MAAMK,OAAO,GAAGL,GAAG,CAAC;MAAEM,cAAc,EAAE,CAAC;MAAEC,cAAc,EAAE;IAAE,CAAC,CAAC;IAC7D,MAAMC,OAAO,GAAGR,GAAG,CAAC;MAAES,MAAM,EAAE,EAAE;MAAEC,kBAAkB,EAAE,EAAE;MAAEC,SAAS,EAAE,EAAE;MAAEC,OAAO,EAAE;IAAG,CAAC,CAAC;IAEvF,SAASC,UAAUA,CAACC,EAAE,EAAE;MAAE,OAAOA,EAAE,GAAG,IAAIC,IAAI,CAACD,EAAE,CAAC,CAACE,cAAc,CAAC,CAAC,GAAG,KAAK;IAAC;IAE5E,eAAeC,WAAWA,CAAA,EAAG;MAC3B,IAAI;QACF,MAAMC,MAAM,GAAG;UAAE,GAAGV,OAAO,CAACW;QAAM,CAAC;QACnC,MAAMC,GAAG,GAAG,MAAMlB,KAAK,CAACmB,GAAG,CAAC,yBAAyB,EAAE;UAAEH;QAAO,CAAC,CAAC;QAClEf,QAAQ,CAACgB,KAAK,GAAGC,GAAG,CAACE,IAAI,CAACA,IAAI;QAC9BjB,OAAO,CAACc,KAAK,GAAGC,GAAG,CAACE,IAAI,CAACjB,OAAO;MAClC,CAAC,CAAC,OAAOkB,CAAC,EAAE;QACVC,OAAO,CAACC,KAAK,CAACF,CAAC,CAAC;MAClB;IACF;IAEAtB,SAAS,CAAC,YAAY;MACpB,MAAMyB,KAAK,GAAG,MAAMxB,KAAK,CAACmB,GAAG,CAAC,uBAAuB,CAAC;MACtDjB,eAAe,CAACe,KAAK,GAAGO,KAAK,CAACJ,IAAI;MAClCL,WAAW,CAAC,CAAC;IACf,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}