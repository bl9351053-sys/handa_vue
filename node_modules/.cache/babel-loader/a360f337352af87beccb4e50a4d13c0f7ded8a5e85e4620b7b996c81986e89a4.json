{"ast":null,"code":"import { ref, onMounted, inject } from 'vue';\nexport default {\n  __name: 'FamiliesList',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const residentAxios = inject('residentAxios', null);\n    let axiosFallback = null;\n    const families = ref([]);\n    const loading = ref(true);\n    const error = ref('');\n    const meta = ref(null);\n    function formatDate(value) {\n      if (!value) return new Date().toLocaleDateString('en-US', {\n        month: 'short',\n        day: 'numeric',\n        year: 'numeric',\n        hour: '2-digit',\n        minute: '2-digit'\n      });\n      try {\n        const d = new Date(value);\n        return d.toLocaleDateString('en-US', {\n          month: 'short',\n          day: 'numeric',\n          year: 'numeric',\n          hour: '2-digit',\n          minute: '2-digit'\n        });\n      } catch {\n        return String(value);\n      }\n    }\n    function getAreaName(f) {\n      return f.evacuation_area?.name || f.evacuationArea?.name || 'Unknown';\n    }\n    function getAreaId(f) {\n      return f.evacuation_area?.id || f.evacuationArea?.id || null;\n    }\n    async function fetchFamilies() {\n      loading.value = true;\n      error.value = '';\n      try {\n        if (!axiosFallback) {\n          const mod = await import('axios');\n          axiosFallback = mod.default || mod;\n        }\n        const http = residentAxios || axiosFallback;\n        const res = await http.get('/families');\n        const payload = res.data || res;\n        if (payload.families) {\n          families.value = payload.families.data || payload.families || [];\n          meta.value = payload.families || null;\n        } else if (Array.isArray(payload)) {\n          families.value = payload;\n        } else if (payload.data && Array.isArray(payload.data)) {\n          families.value = payload.data;\n          meta.value = payload || null;\n        } else {\n          families.value = payload.families || payload;\n        }\n      } catch (e) {\n        console.error('Failed to load families', e);\n        error.value = e.response?.data?.message || e.message || 'Failed to load families';\n      } finally {\n        loading.value = false;\n      }\n    }\n    onMounted(fetchFamilies);\n    const __returned__ = {\n      residentAxios,\n      get axiosFallback() {\n        return axiosFallback;\n      },\n      set axiosFallback(v) {\n        axiosFallback = v;\n      },\n      families,\n      loading,\n      error,\n      meta,\n      formatDate,\n      getAreaName,\n      getAreaId,\n      fetchFamilies,\n      ref,\n      onMounted,\n      inject\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","inject","residentAxios","axiosFallback","families","loading","error","meta","formatDate","value","Date","toLocaleDateString","month","day","year","hour","minute","d","String","getAreaName","f","evacuation_area","name","evacuationArea","getAreaId","id","fetchFamilies","mod","default","http","res","get","payload","data","Array","isArray","e","console","response","message"],"sources":["C:/VUEprojects/crud-app/src/pages/resident_pages/FamiliesList.vue"],"sourcesContent":["<template>\r\n  <div class=\"families-list\">\r\n    <div class=\"card\">\r\n      <div class=\"card-header\">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Families Currently in Evacuation Areas</div>\r\n      <div class=\"card-body\">\r\n        <div v-if=\"loading\" class=\"center\">Loading families‚Ä¶</div>\r\n        <div v-else-if=\"error\" class=\"center error\">{{ error }}</div>\r\n\r\n\r\n    <div v-else>\r\n      <div v-if=\"families.length\">\r\n        <div class=\"table-responsive\">\r\n          <table class=\"table\">\r\n            <thead>\r\n              <tr>\r\n                <th>Family Name</th>\r\n                <th>Members</th>\r\n                <th>Contact Number</th>\r\n                <th>Evacuation Area</th>\r\n                <th>Special Needs</th>\r\n                <th>Checked In</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr v-for=\"f in families\" :key=\"f.id\">\r\n                <td><strong>{{ f.family_head_name }}</strong></td>\r\n                <td>{{ f.total_members }}</td>\r\n                <td>{{ f.contact_number }}</td>\r\n                <td>\r\n                  <router-link\r\n                    v-if=\"getAreaId(f)\"\r\n                    :to=\"`/resident_pages/evacuation-areas/${getAreaId(f)}`\"\r\n                    class=\"text-link\"\r\n                  >\r\n                    {{ getAreaName(f) }}\r\n                  </router-link>\r\n                  <span v-else class=\"muted\">-</span>\r\n                </td>\r\n                <td>{{ f.special_needs || 'None' }}</td>\r\n                <td>{{ formatDate(f.checked_in_at) }}</td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <div v-if=\"meta && meta.total\" class=\"mt-3 muted\">Total: {{ meta.total }}</div>\r\n      </div>\r\n      <div v-else class=\"muted\">No families currently in evacuation areas.</div>\r\n    </div>\r\n  </div>\r\n</div>\r\n```\r\n\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, inject } from 'vue';\r\n\r\nconst residentAxios = inject('residentAxios', null);\r\nlet axiosFallback = null;\r\n\r\nconst families = ref([]);\r\nconst loading = ref(true);\r\nconst error = ref('');\r\nconst meta = ref(null);\r\n\r\nfunction formatDate(value) {\r\n  if (!value) return new Date().toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric', hour: '2-digit', minute: '2-digit' });\r\n  try {\r\n    const d = new Date(value);\r\n    return d.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric', hour: '2-digit', minute: '2-digit' });\r\n  } catch { return String(value); }\r\n}\r\n\r\nfunction getAreaName(f) {\r\n  return f.evacuation_area?.name || f.evacuationArea?.name || 'Unknown';\r\n}\r\n\r\nfunction getAreaId(f) {\r\n  return f.evacuation_area?.id || f.evacuationArea?.id || null;\r\n}\r\n\r\nasync function fetchFamilies() {\r\n  loading.value = true;\r\n  error.value = '';\r\n  try {\r\n    if (!axiosFallback) {\r\n      const mod = await import('axios');\r\n      axiosFallback = mod.default || mod;\r\n    }\r\n    const http = residentAxios || axiosFallback;\r\n    const res = await http.get('/families');\r\n    const payload = res.data || res;\r\n    if (payload.families) {\r\n      families.value = payload.families.data || payload.families || [];\r\n      meta.value = payload.families || null;\r\n    } else if (Array.isArray(payload)) {\r\n      families.value = payload;\r\n    } else if (payload.data && Array.isArray(payload.data)) {\r\n      families.value = payload.data;\r\n      meta.value = payload || null;\r\n    } else {\r\n      families.value = payload.families || payload;\r\n    }\r\n  } catch (e) {\r\n    console.error('Failed to load families', e);\r\n    error.value = e.response?.data?.message || e.message || 'Failed to load families';\r\n  } finally { loading.value = false; }\r\n}\r\n\r\nonMounted(fetchFamilies);\r\n</script>\r\n\r\n<style scoped>\r\n/* Container */\r\n.families-list {\r\n  padding: 2rem;\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\r\n  background: #f4f6fb;\r\n}\r\n\r\n/* Card */\r\n.card {\r\n  background: #ffffff;\r\n  border-radius: 12px;\r\n  padding: 25px;\r\n  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);\r\n  transition: transform 0.2s, box-shadow 0.2s;\r\n}\r\n.card:hover {\r\n  transform: translateY(-3px);\r\n  box-shadow: 0 12px 30px rgba(0, 0, 0, 0.12);\r\n}\r\n.card-header {\r\n  font-weight: 700;\r\n  font-size: 1.4rem;\r\n  margin-bottom: 20px;\r\n  color: #2a3f5f;\r\n  border-left: 6px solid #667eea;\r\n  padding-left: 12px;\r\n}\r\n\r\n/* Table */\r\n.table-responsive {\r\n  overflow-x: auto;\r\n}\r\n.table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  min-width: 700px;\r\n}\r\n.table th, .table td {\r\n  padding: 12px 15px;\r\n  border-bottom: 1px solid #e2e8f0;\r\n  text-align: left;\r\n}\r\n.table th {\r\n  background: #eef2f7;\r\n  color: #2a3f5f;\r\n  font-weight: 600;\r\n  text-transform: uppercase;\r\n}\r\n.table tr:nth-child(even) {\r\n  background: #f9fafc;\r\n}\r\n.table tr:hover {\r\n  background-color: #e6f0ff;\r\n  transition: 0.2s;\r\n  cursor: pointer;\r\n}\r\n\r\n/* Text & Links */\r\n.center { text-align: center; padding: 1rem; font-size: 1.05rem; color: #4b5563; }\r\n.error { color: #d32f2f; font-weight: 600; }\r\n.muted { color: #6b7280; font-size: 0.875rem; }\r\n.text-link {\r\n  color: #4f46e5;\r\n  text-decoration: none;\r\n  font-weight: 500;\r\n}\r\n.text-link:hover { \r\n  color: #3730a3;\r\n  text-decoration: underline; \r\n}\r\n\r\n/* Buttons */\r\n.btn {\r\n  padding: 8px 16px;\r\n  border-radius: 8px;\r\n  color: #fff;\r\n  background: #4f46e5;\r\n  font-weight: 500;\r\n  text-align: center;\r\n  display: inline-block;\r\n  transition: background 0.3s, transform 0.2s;\r\n}\r\n.btn:hover {\r\n  background: #3730a3;\r\n  transform: translateY(-2px);\r\n}\r\n\r\n/* Spacing */\r\n.mt-3 { margin-top: 12px; }\r\n\r\n/* Responsive */\r\n@media (max-width: 768px) {\r\n  .table { min-width: 100%; }\r\n}\r\n</style>\r\n"],"mappings":"AAwDA,SAASA,GAAG,EAAEC,SAAS,EAAEC,MAAM,QAAQ,KAAK;;;;;;;IAE5C,MAAMC,aAAa,GAAGD,MAAM,CAAC,eAAe,EAAE,IAAI,CAAC;IACnD,IAAIE,aAAa,GAAG,IAAI;IAExB,MAAMC,QAAQ,GAAGL,GAAG,CAAC,EAAE,CAAC;IACxB,MAAMM,OAAO,GAAGN,GAAG,CAAC,IAAI,CAAC;IACzB,MAAMO,KAAK,GAAGP,GAAG,CAAC,EAAE,CAAC;IACrB,MAAMQ,IAAI,GAAGR,GAAG,CAAC,IAAI,CAAC;IAEtB,SAASS,UAAUA,CAACC,KAAK,EAAE;MACzB,IAAI,CAACA,KAAK,EAAE,OAAO,IAAIC,IAAI,CAAC,CAAC,CAACC,kBAAkB,CAAC,OAAO,EAAE;QAAEC,KAAK,EAAE,OAAO;QAAEC,GAAG,EAAE,SAAS;QAAEC,IAAI,EAAE,SAAS;QAAEC,IAAI,EAAE,SAAS;QAAEC,MAAM,EAAE;MAAU,CAAC,CAAC;MAClJ,IAAI;QACF,MAAMC,CAAC,GAAG,IAAIP,IAAI,CAACD,KAAK,CAAC;QACzB,OAAOQ,CAAC,CAACN,kBAAkB,CAAC,OAAO,EAAE;UAAEC,KAAK,EAAE,OAAO;UAAEC,GAAG,EAAE,SAAS;UAAEC,IAAI,EAAE,SAAS;UAAEC,IAAI,EAAE,SAAS;UAAEC,MAAM,EAAE;QAAU,CAAC,CAAC;MAC/H,CAAC,CAAC,MAAM;QAAE,OAAOE,MAAM,CAACT,KAAK,CAAC;MAAE;IAClC;IAEA,SAASU,WAAWA,CAACC,CAAC,EAAE;MACtB,OAAOA,CAAC,CAACC,eAAe,EAAEC,IAAI,IAAIF,CAAC,CAACG,cAAc,EAAED,IAAI,IAAI,SAAS;IACvE;IAEA,SAASE,SAASA,CAACJ,CAAC,EAAE;MACpB,OAAOA,CAAC,CAACC,eAAe,EAAEI,EAAE,IAAIL,CAAC,CAACG,cAAc,EAAEE,EAAE,IAAI,IAAI;IAC9D;IAEA,eAAeC,aAAaA,CAAA,EAAG;MAC7BrB,OAAO,CAACI,KAAK,GAAG,IAAI;MACpBH,KAAK,CAACG,KAAK,GAAG,EAAE;MAChB,IAAI;QACF,IAAI,CAACN,aAAa,EAAE;UAClB,MAAMwB,GAAG,GAAG,MAAM,MAAM,CAAC,OAAO,CAAC;UACjCxB,aAAa,GAAGwB,GAAG,CAACC,OAAO,IAAID,GAAG;QACpC;QACA,MAAME,IAAI,GAAG3B,aAAa,IAAIC,aAAa;QAC3C,MAAM2B,GAAG,GAAG,MAAMD,IAAI,CAACE,GAAG,CAAC,WAAW,CAAC;QACvC,MAAMC,OAAO,GAAGF,GAAG,CAACG,IAAI,IAAIH,GAAG;QAC/B,IAAIE,OAAO,CAAC5B,QAAQ,EAAE;UACpBA,QAAQ,CAACK,KAAK,GAAGuB,OAAO,CAAC5B,QAAQ,CAAC6B,IAAI,IAAID,OAAO,CAAC5B,QAAQ,IAAI,EAAE;UAChEG,IAAI,CAACE,KAAK,GAAGuB,OAAO,CAAC5B,QAAQ,IAAI,IAAI;QACvC,CAAC,MAAM,IAAI8B,KAAK,CAACC,OAAO,CAACH,OAAO,CAAC,EAAE;UACjC5B,QAAQ,CAACK,KAAK,GAAGuB,OAAO;QAC1B,CAAC,MAAM,IAAIA,OAAO,CAACC,IAAI,IAAIC,KAAK,CAACC,OAAO,CAACH,OAAO,CAACC,IAAI,CAAC,EAAE;UACtD7B,QAAQ,CAACK,KAAK,GAAGuB,OAAO,CAACC,IAAI;UAC7B1B,IAAI,CAACE,KAAK,GAAGuB,OAAO,IAAI,IAAI;QAC9B,CAAC,MAAM;UACL5B,QAAQ,CAACK,KAAK,GAAGuB,OAAO,CAAC5B,QAAQ,IAAI4B,OAAO;QAC9C;MACF,CAAC,CAAC,OAAOI,CAAC,EAAE;QACVC,OAAO,CAAC/B,KAAK,CAAC,yBAAyB,EAAE8B,CAAC,CAAC;QAC3C9B,KAAK,CAACG,KAAK,GAAG2B,CAAC,CAACE,QAAQ,EAAEL,IAAI,EAAEM,OAAO,IAAIH,CAAC,CAACG,OAAO,IAAI,yBAAyB;MACnF,CAAC,SAAS;QAAElC,OAAO,CAACI,KAAK,GAAG,KAAK;MAAE;IACrC;IAEAT,SAAS,CAAC0B,aAAa,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}