{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelSelect as _vModelSelect, withDirectives as _withDirectives, vModelText as _vModelText, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, createTextVNode as _createTextVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = {\n  class: \"card mb-6\"\n};\nconst _hoisted_3 = {\n  class: \"grid grid-cols-1 md:grid-cols-4 gap-4\"\n};\nconst _hoisted_4 = {\n  class: \"flex items-center justify-between mb-4\"\n};\nconst _hoisted_5 = {\n  key: 0\n};\nconst _hoisted_6 = {\n  key: 1,\n  class: \"text-red-600\"\n};\nconst _hoisted_7 = {\n  class: \"card\"\n};\nconst _hoisted_8 = {\n  class: \"w-full table-auto border-collapse\"\n};\nconst _hoisted_9 = {\n  class: \"td\"\n};\nconst _hoisted_10 = {\n  class: \"td\"\n};\nconst _hoisted_11 = {\n  class: \"td\"\n};\nconst _hoisted_12 = {\n  class: \"td\"\n};\nconst _hoisted_13 = {\n  class: \"td\"\n};\nconst _hoisted_14 = {\n  class: \"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6\"\n};\nconst _hoisted_15 = {\n  class: \"info-box purple\"\n};\nconst _hoisted_16 = {\n  class: \"value\"\n};\nconst _hoisted_17 = {\n  class: \"info-box green\"\n};\nconst _hoisted_18 = {\n  class: \"info-box indigo\"\n};\nconst _hoisted_19 = {\n  class: \"value\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[8] || (_cache[8] = _createElementVNode(\"div\", {\n    class: \"header mb-6\"\n  }, [_createElementVNode(\"h1\", {\n    class: \"text-3xl font-bold gradient-text\"\n  }, \"Disaster Report\")], -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.filters.severity = $event),\n    class: \"input-field\"\n  }, [...(_cache[2] || (_cache[2] = [_createElementVNode(\"option\", {\n    value: \"\"\n  }, \"All Severities\", -1 /* CACHED */), _createElementVNode(\"option\", {\n    value: \"low\"\n  }, \"Low\", -1 /* CACHED */), _createElementVNode(\"option\", {\n    value: \"medium\"\n  }, \"Medium\", -1 /* CACHED */), _createElementVNode(\"option\", {\n    value: \"high\"\n  }, \"High\", -1 /* CACHED */)]))], 512 /* NEED_PATCH */), [[_vModelSelect, $setup.filters.severity]]), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.filters.disaster_type = $event),\n    placeholder: \"Disaster Type\",\n    class: \"input-field\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.filters.disaster_type]]), _createElementVNode(\"button\", {\n    class: \"btn-submit\",\n    onClick: $setup.fetchPredictions\n  }, \"Filter\"), _createElementVNode(\"div\", {\n    class: \"flex justify-end\"\n  }, [_createElementVNode(\"button\", {\n    class: \"btn-submit\",\n    onClick: $setup.downloadCSV\n  }, \"Download CSV\")])])]), _createElementVNode(\"div\", _hoisted_4, [_cache[3] || (_cache[3] = _createElementVNode(\"div\", null, null, -1 /* CACHED */)), _createElementVNode(\"div\", null, [$setup.loading ? (_openBlock(), _createElementBlock(\"span\", _hoisted_5, \"Loading...\")) : _createCommentVNode(\"v-if\", true), $setup.error ? (_openBlock(), _createElementBlock(\"span\", _hoisted_6, _toDisplayString($setup.error), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)])]), _cache[9] || (_cache[9] = _createTextVNode(\" ``` \", -1 /* CACHED */)), _createCommentVNode(\" Table \"), _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"table\", _hoisted_8, [_cache[4] || (_cache[4] = _createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", {\n    class: \"th\"\n  }, \"Disaster Type\"), _createElementVNode(\"th\", {\n    class: \"th\"\n  }, \"Severity\"), _createElementVNode(\"th\", {\n    class: \"th\"\n  }, \"Location\"), _createElementVNode(\"th\", {\n    class: \"th\"\n  }, \"Predicted At\"), _createElementVNode(\"th\", {\n    class: \"th\"\n  }, \"Valid Until\")])], -1 /* CACHED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.predictions, p => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: p.id\n    }, [_createElementVNode(\"td\", _hoisted_9, _toDisplayString(p.disaster_type), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_10, _toDisplayString(p.severity), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_11, _toDisplayString(p.location_name || 'N/A'), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_12, _toDisplayString($setup.formatDate(p.predicted_at)), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_13, _toDisplayString($setup.formatDate(p.valid_until)), 1 /* TEXT */)]);\n  }), 128 /* KEYED_FRAGMENT */))])])]), _createCommentVNode(\" Summary \"), _createElementVNode(\"div\", _hoisted_14, [_createElementVNode(\"div\", _hoisted_15, [_cache[5] || (_cache[5] = _createElementVNode(\"p\", {\n    class: \"label\"\n  }, \"Total Predictions\", -1 /* CACHED */)), _createElementVNode(\"p\", _hoisted_16, _toDisplayString($setup.summary.total), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_17, [_cache[6] || (_cache[6] = _createElementVNode(\"p\", {\n    class: \"label\"\n  }, \"By Severity\", -1 /* CACHED */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.summary.by_severity, (count, severity) => {\n    return _openBlock(), _createElementBlock(\"p\", {\n      class: \"value\",\n      key: severity\n    }, _toDisplayString(severity) + \": \" + _toDisplayString(count), 1 /* TEXT */);\n  }), 128 /* KEYED_FRAGMENT */))]), _createElementVNode(\"div\", _hoisted_18, [_cache[7] || (_cache[7] = _createElementVNode(\"p\", {\n    class: \"label\"\n  }, \"Active Predictions\", -1 /* CACHED */)), _createElementVNode(\"p\", _hoisted_19, _toDisplayString($setup.summary.active), 1 /* TEXT */)])]), _cache[10] || (_cache[10] = _createTextVNode(\" ``` \", -1 /* CACHED */))]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","$setup","filters","severity","$event","value","disaster_type","placeholder","onClick","fetchPredictions","downloadCSV","_hoisted_4","loading","_hoisted_5","error","_hoisted_6","_toDisplayString","_createCommentVNode","_hoisted_7","_hoisted_8","_Fragment","_renderList","predictions","p","key","id","_hoisted_9","_hoisted_10","_hoisted_11","location_name","_hoisted_12","formatDate","predicted_at","_hoisted_13","valid_until","_hoisted_14","_hoisted_15","_hoisted_16","summary","total","_hoisted_17","by_severity","count","_hoisted_18","_hoisted_19","active"],"sources":["C:\\VUEprojects\\crud-app\\src\\pages\\ReportPrediction.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <div class=\"header mb-6\">\r\n      <h1 class=\"text-3xl font-bold gradient-text\">Disaster Report</h1>\r\n    </div>\r\n\r\n      <div class=\"card mb-6\">\r\n        <div class=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n          <select v-model=\"filters.severity\" class=\"input-field\">\r\n            <option value=\"\">All Severities</option>\r\n            <option value=\"low\">Low</option>\r\n            <option value=\"medium\">Medium</option>\r\n            <option value=\"high\">High</option>\r\n          </select>\r\n          <input v-model=\"filters.disaster_type\" placeholder=\"Disaster Type\" class=\"input-field\" />\r\n          <button class=\"btn-submit\" @click=\"fetchPredictions\">Filter</button>\r\n          <div class=\"flex justify-end\">\r\n            <button class=\"btn-submit\" @click=\"downloadCSV\">Download CSV</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"flex items-center justify-between mb-4\">\r\n        <div></div>\r\n        <div>\r\n          <span v-if=\"loading\">Loading...</span>\r\n          <span v-if=\"error\" class=\"text-red-600\">{{ error }}</span>\r\n        </div>\r\n      </div>\r\n\r\n```\r\n<!-- Table -->\r\n<div class=\"card\">\r\n  <table class=\"w-full table-auto border-collapse\">\r\n    <thead>\r\n      <tr>\r\n        <th class=\"th\">Disaster Type</th>\r\n        <th class=\"th\">Severity</th>\r\n        <th class=\"th\">Location</th>\r\n        <th class=\"th\">Predicted At</th>\r\n        <th class=\"th\">Valid Until</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr v-for=\"p in predictions\" :key=\"p.id\">\r\n        <td class=\"td\">{{ p.disaster_type }}</td>\r\n        <td class=\"td\">{{ p.severity }}</td>\r\n        <td class=\"td\">{{ p.location_name || 'N/A' }}</td>\r\n        <td class=\"td\">{{ formatDate(p.predicted_at) }}</td>\r\n        <td class=\"td\">{{ formatDate(p.valid_until) }}</td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n</div>\r\n\r\n<!-- Summary -->\r\n<div class=\"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6\">\r\n  <div class=\"info-box purple\">\r\n    <p class=\"label\">Total Predictions</p>\r\n    <p class=\"value\">{{ summary.total }}</p>\r\n  </div>\r\n  <div class=\"info-box green\">\r\n    <p class=\"label\">By Severity</p>\r\n    <p class=\"value\" v-for=\"(count, severity) in summary.by_severity\" :key=\"severity\">{{ severity }}: {{ count }}</p>\r\n  </div>\r\n  <div class=\"info-box indigo\">\r\n    <p class=\"label\">Active Predictions</p>\r\n    <p class=\"value\">{{ summary.active }}</p>\r\n  </div>\r\n</div>\r\n```\r\n\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { reactive, toRefs, onMounted } from 'vue'\r\nimport axios from 'axios'\r\n\r\nconst state = reactive({\r\n  predictions: [],\r\n  summary: { total:0, by_severity:{}, active:0 },\r\n  filters: { severity: '', disaster_type: '' },\r\n  loading: false,\r\n  error: null,\r\n})\r\n\r\nfunction formatDate(dt) { return dt ? new Date(dt).toLocaleString() : 'N/A' }\r\n\r\nasync function fetchPredictions() {\r\n  state.loading = true\r\n  state.error = null\r\n  try {\r\n    const params = { ...state.filters, json: 1 }\r\n    const res = await axios.get('http://localhost:8000/api/reports/prediction', { params })\r\n    state.predictions = res.data.predictions || []\r\n    state.summary = res.data.summary || { total:0, by_severity:{}, active:0 }\r\n  } catch (e) {\r\n    console.error(e)\r\n    state.error = e.message || 'Failed to load predictions.'\r\n  } finally {\r\n    state.loading = false\r\n  }\r\n}\r\n\r\nasync function downloadCSV() {\r\n  const params = { ...state.filters, format: 'csv' }\r\n  try {\r\n    const res = await axios.get('http://localhost:8000/api/reports/prediction', { params, responseType: 'blob' })\r\n    const blob = new Blob([res.data], { type: 'text/csv' })\r\n    const url = window.URL.createObjectURL(blob)\r\n    const a = document.createElement('a')\r\n    a.href = url\r\n    a.download = `prediction_report_${new Date().toISOString().slice(0,19).replace(/[:T]/g,'_')}.csv`\r\n    document.body.appendChild(a)\r\n    a.click()\r\n    a.remove()\r\n    window.URL.revokeObjectURL(url)\r\n  } catch (e) {\r\n    console.error('CSV download failed', e)\r\n    state.error = 'Failed to download CSV.'\r\n  }\r\n}\r\n\r\nonMounted(fetchPredictions)\r\n\r\nconst { predictions, summary, filters, loading, error } = toRefs(state)\r\n</script>\r\n\r\n<style scoped>\r\n.container { max-width: 1100px; margin:0 auto; padding:20px; }\r\n.gradient-text { background: linear-gradient(90deg,#6366f1,#f43f5e); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }\r\n.card { background:#fff; border-radius:12px; padding:20px; box-shadow:0 4px 12px rgba(0,0,0,0.08); margin-bottom:20px; }\r\n.info-box { padding:15px; border-radius:12px; }\r\n.info-box.purple { background:#f3e8ff; color:#7c3aed; }\r\n.info-box.green { background:#d1fae5; color:#059669; }\r\n.info-box.indigo { background:#e0e7ff; color:#4338ca; }\r\ntable { width:100%; border-collapse:collapse; }\r\n.th, .td { padding:8px; border:1px solid #e5e7eb; text-align:left; }\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}