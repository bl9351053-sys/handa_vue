{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport { ref, onMounted, inject } from 'vue';\nimport axios from 'axios';\nexport default {\n  __name: 'FamiliesList',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const baseUrl = inject('baseUrl', '');\n    const families = ref([]);\n    const generalError = ref('');\n    const loading = ref(true);\n    onMounted(() => fetchFamilies());\n    async function fetchFamilies() {\n      loading.value = true;\n      generalError.value = '';\n      try {\n        const res = await axios.get(`${baseUrl}/families`);\n        families.value = res.data?.data || res.data || [];\n      } catch (err) {\n        generalError.value = 'Failed to load families. Please try again.';\n        console.error('Fetch families error:', err);\n      } finally {\n        loading.value = false;\n      }\n    }\n    function getStatusBadge(status) {\n      const badges = {\n        evacuated: 'bg-green-100 text-green-800',\n        returned: 'bg-blue-100 text-blue-800',\n        pending: 'bg-yellow-100 text-yellow-800'\n      };\n      return badges[status] || 'bg-gray-100 text-gray-800';\n    }\n    function capitalizeStatus(status) {\n      return status ? status.charAt(0).toUpperCase() + status.slice(1) : '';\n    }\n    function formatDate(date) {\n      if (!date) return 'N/A';\n      return new Date(date).toLocaleDateString('en-US', {\n        month: 'short',\n        day: 'numeric',\n        year: 'numeric',\n        hour: '2-digit',\n        minute: '2-digit'\n      });\n    }\n    async function deleteFamily(id) {\n      if (!confirm('Are you sure you want to delete this family?')) return;\n      try {\n        await axios.delete(`${baseUrl}/families/${id}`);\n        families.value = families.value.filter(f => f.id !== id);\n      } catch (err) {\n        generalError.value = 'Failed to delete family. Please try again.';\n        console.error('Delete family error:', err);\n      }\n    }\n    const __returned__ = {\n      baseUrl,\n      families,\n      generalError,\n      loading,\n      fetchFamilies,\n      getStatusBadge,\n      capitalizeStatus,\n      formatDate,\n      deleteFamily,\n      ref,\n      onMounted,\n      inject,\n      get axios() {\n        return axios;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","inject","axios","baseUrl","families","generalError","loading","fetchFamilies","value","res","get","data","err","console","error","getStatusBadge","status","badges","evacuated","returned","pending","capitalizeStatus","charAt","toUpperCase","slice","formatDate","date","Date","toLocaleDateString","month","day","year","hour","minute","deleteFamily","id","confirm","delete","filter","f"],"sources":["C:/VUEprojects/crud-app/src/pages/FamiliesList.vue"],"sourcesContent":["<template>\r\n  <div class=\"min-h-screen bg-gray-100 p-6\">\r\n    <div class=\"max-w-7xl mx-auto\">\r\n      <!-- Header -->\r\n      <!-- Header and Add Button in a single row -->\r\n<div class=\"mb-6 flex flex-col md:flex-row justify-between items-center gap-4\">\r\n  <div>\r\n    <h1 class=\"text-4xl font-bold text-gray-900\">Families</h1>\r\n    <p class=\"text-gray-600 mt-1\">Manage evacuated families and members</p>\r\n  </div>\r\n  <router-link to=\"/families/create\" class=\"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 font-medium flex items-center gap-2 text-sm\">\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n      <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 4v16m8-8H4\" />\r\n    </svg>\r\n    Add Family\r\n  </router-link>\r\n</div>\r\n\r\n\r\n```\r\n  <!-- Error Message -->\r\n  <div v-if=\"generalError\" class=\"mb-6 bg-red-50 border-l-4 border-red-500 text-red-800 px-6 py-4 rounded\">\r\n    <p class=\"text-sm\">{{ generalError }}</p>\r\n  </div>\r\n\r\n  <!-- Loading State -->\r\n  <div v-if=\"loading\" class=\"bg-white rounded-lg shadow p-8 text-center\">\r\n    <div class=\"inline-flex items-center gap-2\">\r\n      <svg class=\"animate-spin h-6 w-6 text-indigo-600\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n        <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\r\n        <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8v8z\"></path>\r\n      </svg>\r\n      <span class=\"text-gray-600\">Loading families...</span>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- Families Table -->\r\n  <div v-else class=\"bg-white rounded-lg shadow overflow-x-auto\">\r\n    <table class=\"min-w-full divide-y divide-gray-200 table-auto\">\r\n      <thead class=\"bg-gray-50\">\r\n        <tr>\r\n          <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Family Head</th>\r\n          <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Members</th>\r\n          <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Evacuation Area</th>\r\n          <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Status</th>\r\n          <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Evacuated At</th>\r\n          <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Actions</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody class=\"bg-white divide-y divide-gray-200\">\r\n        <tr v-for=\"family in families\" :key=\"family.id\" class=\"hover:bg-gray-50\">\r\n          <td class=\"px-6 py-4\">\r\n            <div class=\"text-sm font-medium text-gray-900\">{{ family.family_head_name }}</div>\r\n            <div class=\"text-sm text-gray-500\">{{ family.contact_number || 'No contact' }}</div>\r\n          </td>\r\n          <td class=\"px-6 py-4 text-sm text-gray-900\">{{ family.total_members }}</td>\r\n          <td class=\"px-6 py-4 text-sm text-gray-500\">{{ family.evacuation_area?.name || 'Not assigned' }}</td>\r\n          <td class=\"px-6 py-4\">\r\n            <span :class=\"getStatusBadge(family.status)\" class=\"px-3 py-1 inline-flex text-xs font-semibold rounded-full\">\r\n              {{ capitalizeStatus(family.status) }}\r\n            </span>\r\n          </td>\r\n          <td class=\"px-6 py-4 text-sm text-gray-500\">{{ formatDate(family.evacuated_at) }}</td>\r\n          <td class=\"px-6 py-4 text-sm font-medium space-x-3\">\r\n            <router-link :to=\"`/families/${family.id}`\" class=\"text-indigo-600 hover:text-indigo-900\">View</router-link>\r\n            <router-link :to=\"`/families/${family.id}/edit`\" class=\"text-green-600 hover:text-green-900\">Edit</router-link>\r\n            <button @click=\"deleteFamily(family.id)\" class=\"text-red-600 hover:text-red-900\">Delete</button>\r\n          </td>\r\n        </tr>\r\n        <tr v-if=\"families.length === 0\">\r\n          <td colspan=\"6\" class=\"px-6 py-4 text-center text-gray-500\">No families found.</td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n</div>\r\n```\r\n\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, inject } from 'vue'\r\nimport axios from 'axios'\r\n\r\nconst baseUrl = inject('baseUrl', '')\r\nconst families = ref([])\r\nconst generalError = ref('')\r\nconst loading = ref(true)\r\n\r\nonMounted(() => fetchFamilies())\r\n\r\nasync function fetchFamilies() {\r\n  loading.value = true\r\n  generalError.value = ''\r\n  try {\r\n    const res = await axios.get(`${baseUrl}/families`)\r\n    families.value = res.data?.data || res.data || []\r\n  } catch (err) {\r\n    generalError.value = 'Failed to load families. Please try again.'\r\n    console.error('Fetch families error:', err)\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\nfunction getStatusBadge(status) {\r\n  const badges = {\r\n    evacuated: 'bg-green-100 text-green-800',\r\n    returned: 'bg-blue-100 text-blue-800',\r\n    pending: 'bg-yellow-100 text-yellow-800'\r\n  }\r\n  return badges[status] || 'bg-gray-100 text-gray-800'\r\n}\r\n\r\nfunction capitalizeStatus(status) {\r\n  return status ? status.charAt(0).toUpperCase() + status.slice(1) : ''\r\n}\r\n\r\nfunction formatDate(date) {\r\n  if (!date) return 'N/A'\r\n  return new Date(date).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric', hour: '2-digit', minute: '2-digit' })\r\n}\r\n\r\nasync function deleteFamily(id) {\r\n  if (!confirm('Are you sure you want to delete this family?')) return\r\n  try {\r\n    await axios.delete(`${baseUrl}/families/${id}`)\r\n    families.value = families.value.filter(f => f.id !== id)\r\n  } catch (err) {\r\n    generalError.value = 'Failed to delete family. Please try again.'\r\n    console.error('Delete family error:', err)\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n/* Responsive table scroll on small screens */\r\ntable {\r\n  min-width: 100%;\r\n  border-collapse: collapse;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  table {\r\n    display: block;\r\n    overflow-x: auto;\r\n  }\r\n}\r\n</style>\r\n"],"mappings":";;AAkFA,SAASA,GAAG,EAAEC,SAAS,EAAEC,MAAM,QAAQ,KAAK;AAC5C,OAAOC,KAAK,MAAM,OAAO;;;;;;;IAEzB,MAAMC,OAAO,GAAGF,MAAM,CAAC,SAAS,EAAE,EAAE,CAAC;IACrC,MAAMG,QAAQ,GAAGL,GAAG,CAAC,EAAE,CAAC;IACxB,MAAMM,YAAY,GAAGN,GAAG,CAAC,EAAE,CAAC;IAC5B,MAAMO,OAAO,GAAGP,GAAG,CAAC,IAAI,CAAC;IAEzBC,SAAS,CAAC,MAAMO,aAAa,CAAC,CAAC,CAAC;IAEhC,eAAeA,aAAaA,CAAA,EAAG;MAC7BD,OAAO,CAACE,KAAK,GAAG,IAAI;MACpBH,YAAY,CAACG,KAAK,GAAG,EAAE;MACvB,IAAI;QACF,MAAMC,GAAG,GAAG,MAAMP,KAAK,CAACQ,GAAG,CAAC,GAAGP,OAAO,WAAW,CAAC;QAClDC,QAAQ,CAACI,KAAK,GAAGC,GAAG,CAACE,IAAI,EAAEA,IAAI,IAAIF,GAAG,CAACE,IAAI,IAAI,EAAE;MACnD,CAAC,CAAC,OAAOC,GAAG,EAAE;QACZP,YAAY,CAACG,KAAK,GAAG,4CAA4C;QACjEK,OAAO,CAACC,KAAK,CAAC,uBAAuB,EAAEF,GAAG,CAAC;MAC7C,CAAC,SAAS;QACRN,OAAO,CAACE,KAAK,GAAG,KAAK;MACvB;IACF;IAEA,SAASO,cAAcA,CAACC,MAAM,EAAE;MAC9B,MAAMC,MAAM,GAAG;QACbC,SAAS,EAAE,6BAA6B;QACxCC,QAAQ,EAAE,2BAA2B;QACrCC,OAAO,EAAE;MACX,CAAC;MACD,OAAOH,MAAM,CAACD,MAAM,CAAC,IAAI,2BAA2B;IACtD;IAEA,SAASK,gBAAgBA,CAACL,MAAM,EAAE;MAChC,OAAOA,MAAM,GAAGA,MAAM,CAACM,MAAM,CAAC,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,GAAGP,MAAM,CAACQ,KAAK,CAAC,CAAC,CAAC,GAAG,EAAE;IACvE;IAEA,SAASC,UAAUA,CAACC,IAAI,EAAE;MACxB,IAAI,CAACA,IAAI,EAAE,OAAO,KAAK;MACvB,OAAO,IAAIC,IAAI,CAACD,IAAI,CAAC,CAACE,kBAAkB,CAAC,OAAO,EAAE;QAAEC,KAAK,EAAE,OAAO;QAAEC,GAAG,EAAE,SAAS;QAAEC,IAAI,EAAE,SAAS;QAAEC,IAAI,EAAE,SAAS;QAAEC,MAAM,EAAE;MAAU,CAAC,CAAC;IAC5I;IAEA,eAAeC,YAAYA,CAACC,EAAE,EAAE;MAC9B,IAAI,CAACC,OAAO,CAAC,8CAA8C,CAAC,EAAE;MAC9D,IAAI;QACF,MAAMlC,KAAK,CAACmC,MAAM,CAAC,GAAGlC,OAAO,aAAagC,EAAE,EAAE,CAAC;QAC/C/B,QAAQ,CAACI,KAAK,GAAGJ,QAAQ,CAACI,KAAK,CAAC8B,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACJ,EAAE,KAAKA,EAAE,CAAC;MAC1D,CAAC,CAAC,OAAOvB,GAAG,EAAE;QACZP,YAAY,CAACG,KAAK,GAAG,4CAA4C;QACjEK,OAAO,CAACC,KAAK,CAAC,sBAAsB,EAAEF,GAAG,CAAC;MAC5C;IACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}