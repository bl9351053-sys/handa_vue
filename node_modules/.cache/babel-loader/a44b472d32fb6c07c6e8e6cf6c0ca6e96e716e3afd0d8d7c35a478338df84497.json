{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, createTextVNode as _createTextVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = {\n  class: \"card mb-6\"\n};\nconst _hoisted_3 = {\n  class: \"grid grid-cols-1 md:grid-cols-4 gap-4\"\n};\nconst _hoisted_4 = [\"value\"];\nconst _hoisted_5 = {\n  class: \"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6\"\n};\nconst _hoisted_6 = {\n  class: \"info-box purple\"\n};\nconst _hoisted_7 = {\n  class: \"value\"\n};\nconst _hoisted_8 = {\n  class: \"info-box green\"\n};\nconst _hoisted_9 = {\n  class: \"value\"\n};\nconst _hoisted_10 = {\n  class: \"card\"\n};\nconst _hoisted_11 = {\n  class: \"w-full table-auto border-collapse\"\n};\nconst _hoisted_12 = {\n  class: \"td\"\n};\nconst _hoisted_13 = {\n  class: \"td\"\n};\nconst _hoisted_14 = {\n  class: \"td\"\n};\nconst _hoisted_15 = {\n  class: \"td\"\n};\nconst _hoisted_16 = {\n  class: \"td\"\n};\nconst _hoisted_17 = {\n  class: \"td\"\n};\nconst _hoisted_18 = {\n  class: \"td\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[8] || (_cache[8] = _createElementVNode(\"div\", {\n    class: \"header flex justify-between items-center mb-6\"\n  }, [_createElementVNode(\"h1\", {\n    class: \"text-3xl font-bold gradient-text\"\n  }, \"Evacuation Report\")], -1 /* CACHED */)), _cache[9] || (_cache[9] = _createTextVNode(\" ``` \", -1 /* CACHED */)), _createCommentVNode(\" Filters \"), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.filters.status = $event),\n    placeholder: \"Status\",\n    class: \"input-field\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.filters.status]]), _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.filters.evacuation_area_id = $event),\n    class: \"input-field\"\n  }, [_cache[4] || (_cache[4] = _createElementVNode(\"option\", {\n    value: \"\"\n  }, \"All Areas\", -1 /* CACHED */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.evacuationAreas, area => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      key: area.id,\n      value: area.id\n    }, _toDisplayString(area.name), 9 /* TEXT, PROPS */, _hoisted_4);\n  }), 128 /* KEYED_FRAGMENT */))], 512 /* NEED_PATCH */), [[_vModelSelect, $setup.filters.evacuation_area_id]]), _withDirectives(_createElementVNode(\"input\", {\n    type: \"date\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.filters.date_from = $event),\n    class: \"input-field\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.filters.date_from]]), _withDirectives(_createElementVNode(\"input\", {\n    type: \"date\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.filters.date_to = $event),\n    class: \"input-field\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.filters.date_to]]), _createElementVNode(\"button\", {\n    onClick: $setup.fetchReport,\n    class: \"btn-submit col-span-1 md:col-span-1\"\n  }, \"Filter\")])]), _createCommentVNode(\" Summary \"), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_cache[5] || (_cache[5] = _createElementVNode(\"p\", {\n    class: \"label\"\n  }, \"Total Families\", -1 /* CACHED */)), _createElementVNode(\"p\", _hoisted_7, _toDisplayString($setup.summary.total_families), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_8, [_cache[6] || (_cache[6] = _createElementVNode(\"p\", {\n    class: \"label\"\n  }, \"Total Evacuees\", -1 /* CACHED */)), _createElementVNode(\"p\", _hoisted_9, _toDisplayString($setup.summary.total_evacuees), 1 /* TEXT */)])]), _createCommentVNode(\" Table \"), _createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"table\", _hoisted_11, [_cache[7] || (_cache[7] = _createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", {\n    class: \"th\"\n  }, \"Family Head\"), _createElementVNode(\"th\", {\n    class: \"th\"\n  }, \"Contact\"), _createElementVNode(\"th\", {\n    class: \"th\"\n  }, \"Address\"), _createElementVNode(\"th\", {\n    class: \"th\"\n  }, \"Members\"), _createElementVNode(\"th\", {\n    class: \"th\"\n  }, \"Evacuation Area\"), _createElementVNode(\"th\", {\n    class: \"th\"\n  }, \"Status\"), _createElementVNode(\"th\", {\n    class: \"th\"\n  }, \"Evacuated At\")])], -1 /* CACHED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.families, family => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: family.id\n    }, [_createElementVNode(\"td\", _hoisted_12, _toDisplayString(family.family_head_name), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_13, _toDisplayString(family.contact_number), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_14, _toDisplayString(family.address), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_15, _toDisplayString(family.total_members), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_16, _toDisplayString(family.evacuationArea?.name || 'N/A'), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_17, _toDisplayString(family.status), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_18, _toDisplayString($setup.formatDate(family.evacuated_at)), 1 /* TEXT */)]);\n  }), 128 /* KEYED_FRAGMENT */))])])]), _cache[10] || (_cache[10] = _createTextVNode(\" ``` \", -1 /* CACHED */))]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_createCommentVNode","_hoisted_2","_hoisted_3","$setup","filters","status","$event","placeholder","evacuation_area_id","value","_Fragment","_renderList","evacuationAreas","area","key","id","name","_hoisted_4","type","date_from","date_to","onClick","fetchReport","_hoisted_5","_hoisted_6","_hoisted_7","_toDisplayString","summary","total_families","_hoisted_8","_hoisted_9","total_evacuees","_hoisted_10","_hoisted_11","families","family","_hoisted_12","family_head_name","_hoisted_13","contact_number","_hoisted_14","address","_hoisted_15","total_members","_hoisted_16","evacuationArea","_hoisted_17","_hoisted_18","formatDate","evacuated_at"],"sources":["C:\\VUEprojects\\crud-app\\src\\pages\\ReportEvacuation.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <div class=\"header flex justify-between items-center mb-6\">\r\n      <h1 class=\"text-3xl font-bold gradient-text\">Evacuation Report</h1>\r\n    </div>\r\n\r\n```\r\n<!-- Filters -->\r\n<div class=\"card mb-6\">\r\n  <div class=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n    <input v-model=\"filters.status\" placeholder=\"Status\" class=\"input-field\" />\r\n    <select v-model=\"filters.evacuation_area_id\" class=\"input-field\">\r\n      <option value=\"\">All Areas</option>\r\n      <option v-for=\"area in evacuationAreas\" :key=\"area.id\" :value=\"area.id\">{{ area.name }}</option>\r\n    </select>\r\n    <input type=\"date\" v-model=\"filters.date_from\" class=\"input-field\" />\r\n    <input type=\"date\" v-model=\"filters.date_to\" class=\"input-field\" />\r\n    <button @click=\"fetchReport\" class=\"btn-submit col-span-1 md:col-span-1\">Filter</button>\r\n  </div>\r\n</div>\r\n\r\n<!-- Summary -->\r\n<div class=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6\">\r\n  <div class=\"info-box purple\">\r\n    <p class=\"label\">Total Families</p>\r\n    <p class=\"value\">{{ summary.total_families }}</p>\r\n  </div>\r\n  <div class=\"info-box green\">\r\n    <p class=\"label\">Total Evacuees</p>\r\n    <p class=\"value\">{{ summary.total_evacuees }}</p>\r\n  </div>\r\n</div>\r\n\r\n<!-- Table -->\r\n<div class=\"card\">\r\n  <table class=\"w-full table-auto border-collapse\">\r\n    <thead>\r\n      <tr>\r\n        <th class=\"th\">Family Head</th>\r\n        <th class=\"th\">Contact</th>\r\n        <th class=\"th\">Address</th>\r\n        <th class=\"th\">Members</th>\r\n        <th class=\"th\">Evacuation Area</th>\r\n        <th class=\"th\">Status</th>\r\n        <th class=\"th\">Evacuated At</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr v-for=\"family in families\" :key=\"family.id\">\r\n        <td class=\"td\">{{ family.family_head_name }}</td>\r\n        <td class=\"td\">{{ family.contact_number }}</td>\r\n        <td class=\"td\">{{ family.address }}</td>\r\n        <td class=\"td\">{{ family.total_members }}</td>\r\n        <td class=\"td\">{{ family.evacuationArea?.name || 'N/A' }}</td>\r\n        <td class=\"td\">{{ family.status }}</td>\r\n        <td class=\"td\">{{ formatDate(family.evacuated_at) }}</td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n</div>\r\n```\r\n\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { reactive, toRefs, onMounted } from 'vue'\r\nimport axios from 'axios'\r\n\r\nconst state = reactive({\r\n  families: [],\r\n  evacuationAreas: [],\r\n  summary: { total_families: 0, total_evacuees: 0 },\r\n  filters: { status: '', evacuation_area_id: '', date_from: '', date_to: '' },\r\n  loading: false,\r\n  error: null,\r\n})\r\n\r\nfunction formatDate(dt) { return dt ? new Date(dt).toLocaleString() : 'N/A' }\r\n\r\nasync function fetchReport() {\r\n  state.loading = true\r\n  state.error = null\r\n  try {\r\n    const params = { ...state.filters, json: 1 }\r\n    const res = await axios.get('http://localhost:8000/api/reports/evacuation', { params })\r\n    state.families = res.data.data || []\r\n    state.summary = res.data.summary || { total_families: 0, total_evacuees: 0 }\r\n  } catch (e) {\r\n    console.error(e)\r\n    state.error = e.message || 'Failed to load evacuation report.'\r\n  } finally {\r\n    state.loading = false\r\n  }\r\n}\r\n\r\nasync function loadAreas() {\r\n  try {\r\n    const res = await axios.get('http://localhost:8000/api/evacuation-areas')\r\n    state.evacuationAreas = res.data || []\r\n  } catch (e) {\r\n    console.warn('Failed to load areas', e)\r\n  }\r\n}\r\n\r\nasync function downloadCSV() {\r\n  const params = { ...state.filters, format: 'csv' }\r\n  try {\r\n    const res = await axios.get('http://localhost:8000/api/reports/evacuation', { params, responseType: 'blob' })\r\n    const blob = new Blob([res.data], { type: 'text/csv' })\r\n    const url = window.URL.createObjectURL(blob)\r\n    const a = document.createElement('a')\r\n    a.href = url\r\n    a.download = `evacuation_report_${new Date().toISOString().slice(0,19).replace(/[:T]/g,'_')}.csv`\r\n    document.body.appendChild(a)\r\n    a.click()\r\n    a.remove()\r\n    window.URL.revokeObjectURL(url)\r\n  } catch (e) {\r\n    console.error('CSV download failed', e)\r\n    state.error = 'Failed to download CSV.'\r\n  }\r\n}\r\n\r\nonMounted(async () => {\r\n  await loadAreas()\r\n  await fetchReport()\r\n})\r\n\r\nconst { families, evacuationAreas, summary, filters, loading, error } = toRefs(state)\r\n</script>\r\n\r\n<style scoped>\r\n.container { max-width: 1100px; margin:0 auto; padding:20px; }\r\n.gradient-text { background: linear-gradient(90deg,#6366f1,#f43f5e); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }\r\n.card { background:#fff; border-radius:12px; padding:20px; box-shadow:0 4px 12px rgba(0,0,0,0.08); margin-bottom:20px; }\r\n.input-field { border:1px solid #d1d5db; border-radius:8px; padding:8px; width:100%; }\r\n.btn-submit { background:#4f46e5; color:#fff; padding:8px 12px; border-radius:8px; }\r\n.info-box { padding:15px; border-radius:12px; }\r\n.info-box.purple { background:#f3e8ff; color:#7c3aed; }\r\n.info-box.green { background:#d1fae5; color:#059669; }\r\ntable { width:100%; border-collapse:collapse; }\r\n.th, .td { padding:8px; border:1px solid #e5e7eb; text-align:left; }\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}