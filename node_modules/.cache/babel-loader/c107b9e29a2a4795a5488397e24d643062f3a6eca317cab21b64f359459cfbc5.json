{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { withAsyncContext as _withAsyncContext } from 'vue';\nimport { ref, inject } from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\nexport default {\n  __name: 'RegisterFamily',\n  async setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    let __temp, __restore;\n    const route = useRoute();\n    const router = useRouter();\n    const id = route.params.id;\n    const residentAxios = inject('residentAxios', null);\n    const axiosFallback = ([__temp, __restore] = _withAsyncContext(() => import('axios')), __temp = await __temp, __restore(), __temp).default;\n    const form = ref({\n      family_head_name: '',\n      total_members: 1,\n      contact_number: '',\n      address: '',\n      special_needs: ''\n    });\n    const errors = ref({});\n    const serverError = ref('');\n    const submitting = ref(false);\n    async function submit() {\n      submitting.value = true;\n      errors.value = {};\n      serverError.value = '';\n      try {\n        const http = residentAxios || axiosFallback;\n        await http.post(`/evacuation-areas/${id}/go`, form.value);\n        // success -> redirect to area detail\n        router.push(`/resident_pages/evacuation-areas/${id}`);\n      } catch (e) {\n        if (e.response && e.response.status === 422) {\n          errors.value = e.response.data.errors || e.response.data || {};\n        } else {\n          serverError.value = e.response?.data?.message || e.message || 'Failed to register';\n        }\n      } finally {\n        submitting.value = false;\n      }\n    }\n    const __returned__ = {\n      route,\n      router,\n      id,\n      residentAxios,\n      axiosFallback,\n      form,\n      errors,\n      serverError,\n      submitting,\n      submit,\n      ref,\n      inject,\n      get useRoute() {\n        return useRoute;\n      },\n      get useRouter() {\n        return useRouter;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","inject","useRoute","useRouter","route","router","id","params","residentAxios","axiosFallback","__temp","__restore","_withAsyncContext","default","form","family_head_name","total_members","contact_number","address","special_needs","errors","serverError","submitting","submit","value","http","post","push","e","response","status","data","message"],"sources":["C:/VUEprojects/crud-app/src/pages/resident_pages/RegisterFamily.vue"],"sourcesContent":["<template>\r\n  <div class=\"register-family\">\r\n    <div class=\"card\">\r\n      <div class=\"card-header\">Register My Family</div>\r\n      <div class=\"card-body\">\r\n        <form @submit.prevent=\"submit\">\r\n          <div class=\"form-row\">\r\n            <label>Family Head Name</label>\r\n            <input v-model=\"form.family_head_name\" type=\"text\" />\r\n            <div v-if=\"errors.family_head_name\" class=\"error-msg\">{{ errors.family_head_name[0] }}</div>\r\n          </div>\r\n\r\n          <div class=\"form-row\">\r\n            <label>Total Members</label>\r\n            <input v-model.number=\"form.total_members\" type=\"number\" min=\"1\" />\r\n            <div v-if=\"errors.total_members\" class=\"error-msg\">{{ errors.total_members[0] }}</div>\r\n          </div>\r\n\r\n          <div class=\"form-row\">\r\n            <label>Contact Number</label>\r\n            <input v-model=\"form.contact_number\" type=\"text\" />\r\n            <div v-if=\"errors.contact_number\" class=\"error-msg\">{{ errors.contact_number[0] }}</div>\r\n          </div>\r\n\r\n          <div class=\"form-row\">\r\n            <label>Address</label>\r\n            <input v-model=\"form.address\" type=\"text\" />\r\n            <div v-if=\"errors.address\" class=\"error-msg\">{{ errors.address[0] }}</div>\r\n          </div>\r\n\r\n          <div class=\"form-row\">\r\n            <label>Special Needs</label>\r\n            <input v-model=\"form.special_needs\" type=\"text\" />\r\n            <div v-if=\"errors.special_needs\" class=\"error-msg\">{{ errors.special_needs[0] }}</div>\r\n          </div>\r\n\r\n          <div class=\"form-actions\">\r\n            <button class=\"btn btn-primary\" :disabled=\"submitting\">Submit</button>\r\n            <router-link :to=\"`/resident_pages/evacuation-areas/${id}`\" class=\"btn btn-secondary\">Cancel</router-link>\r\n          </div>\r\n        </form>\r\n        <div v-if=\"serverError\" class=\"error-msg\">{{ serverError }}</div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, inject } from 'vue';\r\nimport { useRoute, useRouter } from 'vue-router';\r\nconst route = useRoute();\r\nconst router = useRouter();\r\nconst id = route.params.id;\r\nconst residentAxios = inject('residentAxios', null);\r\nconst axiosFallback = (await import('axios')).default;\r\n\r\nconst form = ref({\r\n  family_head_name: '',\r\n  total_members: 1,\r\n  contact_number: '',\r\n  address: '',\r\n  special_needs: ''\r\n});\r\nconst errors = ref({});\r\nconst serverError = ref('');\r\nconst submitting = ref(false);\r\n\r\nasync function submit() {\r\n  submitting.value = true;\r\n  errors.value = {};\r\n  serverError.value = '';\r\n  try {\r\n    const http = residentAxios || axiosFallback;\r\n    await http.post(`/evacuation-areas/${id}/go`, form.value);\r\n    // success -> redirect to area detail\r\n    router.push(`/resident_pages/evacuation-areas/${id}`);\r\n  } catch (e) {\r\n    if (e.response && e.response.status === 422) {\r\n      errors.value = e.response.data.errors || e.response.data || {};\r\n    } else {\r\n      serverError.value = e.response?.data?.message || e.message || 'Failed to register';\r\n    }\r\n  } finally {\r\n    submitting.value = false;\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.register-family { padding: 1rem; max-width: 700px; margin: 0 auto; }\r\n.form-row { margin-bottom: 0.75rem; }\r\nlabel { display:block; font-weight:600; margin-bottom:4px; }\r\ninput[type=\"text\"], input[type=\"number\"] { width:100%; padding:8px; border:1px solid #e6edf3; border-radius:6px; }\r\n.form-actions { display:flex; gap:8px; margin-top:12px; }\r\n.btn { padding:8px 12px; border-radius:6px; color:#fff; text-decoration:none; border:none; cursor:pointer; }\r\n.btn-primary { background:#667eea; }\r\n.btn-secondary { background:#6c757d; }\r\n.error-msg { color:#b00020; font-size:0.9rem; margin-top:6px; }\r\n</style>\r\n"],"mappings":";;AAgDA,SAASA,GAAG,EAAEC,MAAM,QAAQ,KAAK;AACjC,SAASC,QAAQ,EAAEC,SAAS,QAAQ,YAAY;;;;;;;;IAChD,MAAMC,KAAK,GAAGF,QAAQ,CAAC,CAAC;IACxB,MAAMG,MAAM,GAAGF,SAAS,CAAC,CAAC;IAC1B,MAAMG,EAAE,GAAGF,KAAK,CAACG,MAAM,CAACD,EAAE;IAC1B,MAAME,aAAa,GAAGP,MAAM,CAAC,eAAe,EAAE,IAAI,CAAC;IACnD,MAAMQ,aAAa,GAAG,CAAC,CAAAC,MAAA,EAAAC,SAAA,IAAAC,iBAAA,OAAM,MAAM,CAAC,OAAO,I,4CAAGC,OAAO;IAErD,MAAMC,IAAI,GAAGd,GAAG,CAAC;MACfe,gBAAgB,EAAE,EAAE;MACpBC,aAAa,EAAE,CAAC;MAChBC,cAAc,EAAE,EAAE;MAClBC,OAAO,EAAE,EAAE;MACXC,aAAa,EAAE;IACjB,CAAC,CAAC;IACF,MAAMC,MAAM,GAAGpB,GAAG,CAAC,CAAC,CAAC,CAAC;IACtB,MAAMqB,WAAW,GAAGrB,GAAG,CAAC,EAAE,CAAC;IAC3B,MAAMsB,UAAU,GAAGtB,GAAG,CAAC,KAAK,CAAC;IAE7B,eAAeuB,MAAMA,CAAA,EAAG;MACtBD,UAAU,CAACE,KAAK,GAAG,IAAI;MACvBJ,MAAM,CAACI,KAAK,GAAG,CAAC,CAAC;MACjBH,WAAW,CAACG,KAAK,GAAG,EAAE;MACtB,IAAI;QACF,MAAMC,IAAI,GAAGjB,aAAa,IAAIC,aAAa;QAC3C,MAAMgB,IAAI,CAACC,IAAI,CAAC,qBAAqBpB,EAAE,KAAK,EAAEQ,IAAI,CAACU,KAAK,CAAC;QACzD;QACAnB,MAAM,CAACsB,IAAI,CAAC,oCAAoCrB,EAAE,EAAE,CAAC;MACvD,CAAC,CAAC,OAAOsB,CAAC,EAAE;QACV,IAAIA,CAAC,CAACC,QAAQ,IAAID,CAAC,CAACC,QAAQ,CAACC,MAAM,KAAK,GAAG,EAAE;UAC3CV,MAAM,CAACI,KAAK,GAAGI,CAAC,CAACC,QAAQ,CAACE,IAAI,CAACX,MAAM,IAAIQ,CAAC,CAACC,QAAQ,CAACE,IAAI,IAAI,CAAC,CAAC;QAChE,CAAC,MAAM;UACLV,WAAW,CAACG,KAAK,GAAGI,CAAC,CAACC,QAAQ,EAAEE,IAAI,EAAEC,OAAO,IAAIJ,CAAC,CAACI,OAAO,IAAI,oBAAoB;QACpF;MACF,CAAC,SAAS;QACRV,UAAU,CAACE,KAAK,GAAG,KAAK;MAC1B;IACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}