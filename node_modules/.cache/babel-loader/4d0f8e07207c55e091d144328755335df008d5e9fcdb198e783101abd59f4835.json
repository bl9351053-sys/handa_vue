{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createStaticVNode as _createStaticVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6\"\n};\nconst _hoisted_2 = {\n  class: \"p-4 bg-white shadow rounded\"\n};\nconst _hoisted_3 = {\n  class: \"text-2xl font-bold\"\n};\nconst _hoisted_4 = {\n  class: \"p-4 bg-white shadow rounded\"\n};\nconst _hoisted_5 = {\n  class: \"text-2xl font-bold\"\n};\nconst _hoisted_6 = {\n  class: \"p-4 bg-white shadow rounded\"\n};\nconst _hoisted_7 = {\n  class: \"text-2xl font-bold\"\n};\nconst _hoisted_8 = {\n  class: \"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6\"\n};\nconst _hoisted_9 = {\n  class: \"p-4 bg-white shadow rounded\"\n};\nconst _hoisted_10 = {\n  class: \"text-2xl font-bold\"\n};\nconst _hoisted_11 = {\n  class: \"p-4 bg-white shadow rounded\"\n};\nconst _hoisted_12 = {\n  class: \"text-2xl font-bold\"\n};\nconst _hoisted_13 = {\n  class: \"p-4 bg-white shadow rounded\"\n};\nconst _hoisted_14 = {\n  class: \"text-2xl font-bold\"\n};\nconst _hoisted_15 = {\n  class: \"mb-6\"\n};\nconst _hoisted_16 = {\n  class: \"p-4 bg-white shadow rounded\"\n};\nconst _hoisted_17 = {\n  class: \"text-2xl font-bold\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", null, [_cache[7] || (_cache[7] = _createElementVNode(\"h2\", {\n    class: \"text-2xl font-semibold mb-4\"\n  }, \"Dashboard\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[0] || (_cache[0] = _createElementVNode(\"div\", {\n    class: \"text-sm text-gray-500\"\n  }, \"Total members\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_3, _toDisplayString($setup.stats.total_members ?? '-'), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_4, [_cache[1] || (_cache[1] = _createElementVNode(\"div\", {\n    class: \"text-sm text-gray-500\"\n  }, \"Total families\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_5, _toDisplayString($setup.stats.total_families ?? '-'), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_6, [_cache[2] || (_cache[2] = _createElementVNode(\"div\", {\n    class: \"text-sm text-gray-500\"\n  }, \"Evacuation Areas\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_7, _toDisplayString($setup.stats.total_evacuation_areas ?? '-'), 1 /* TEXT */)])]), _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"div\", _hoisted_9, [_cache[3] || (_cache[3] = _createElementVNode(\"div\", {\n    class: \"text-sm text-gray-500\"\n  }, \"Available evacuation areas\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_10, _toDisplayString($setup.stats.available_evacuation_areas ?? '-'), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_11, [_cache[4] || (_cache[4] = _createElementVNode(\"div\", {\n    class: \"text-sm text-gray-500\"\n  }, \"Total facilities\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_12, _toDisplayString($setup.stats.total_facilities ?? '-'), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_13, [_cache[5] || (_cache[5] = _createElementVNode(\"div\", {\n    class: \"text-sm text-gray-500\"\n  }, \"Operational facilities\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_14, _toDisplayString($setup.stats.operational_facilities ?? '-'), 1 /* TEXT */)])]), _createElementVNode(\"div\", _hoisted_15, [_createElementVNode(\"div\", _hoisted_16, [_cache[6] || (_cache[6] = _createElementVNode(\"div\", {\n    class: \"text-sm text-gray-500\"\n  }, \"Active predictions\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_17, _toDisplayString($setup.stats.active_predictions ?? '-'), 1 /* TEXT */)])]), _cache[8] || (_cache[8] = _createStaticVNode(\"<div class=\\\"grid grid-cols-1 lg:grid-cols-3 gap-4\\\" data-v-650eb1cf><div class=\\\"p-4 bg-white shadow rounded\\\" data-v-650eb1cf><h3 class=\\\"font-semibold mb-2\\\" data-v-650eb1cf>Evacuation Areas</h3><canvas id=\\\"evacuationChart\\\" data-v-650eb1cf></canvas></div><div class=\\\"p-4 bg-white shadow rounded\\\" data-v-650eb1cf><h3 class=\\\"font-semibold mb-2\\\" data-v-650eb1cf>Facility Status</h3><canvas id=\\\"facilityChart\\\" data-v-650eb1cf></canvas></div><div class=\\\"p-4 bg-white shadow rounded\\\" data-v-650eb1cf><h3 class=\\\"font-semibold mb-2\\\" data-v-650eb1cf>Family Status</h3><canvas id=\\\"familyChart\\\" data-v-650eb1cf></canvas></div></div>\", 1))]);\n}","map":{"version":3,"names":["class","_createElementBlock","_createElementVNode","_hoisted_1","_hoisted_2","_hoisted_3","_toDisplayString","$setup","stats","total_members","_hoisted_4","_hoisted_5","total_families","_hoisted_6","_hoisted_7","total_evacuation_areas","_hoisted_8","_hoisted_9","_hoisted_10","available_evacuation_areas","_hoisted_11","_hoisted_12","total_facilities","_hoisted_13","_hoisted_14","operational_facilities","_hoisted_15","_hoisted_16","_hoisted_17","active_predictions"],"sources":["C:\\VUEprojects\\crud-app\\src\\pages\\DashboardPage.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <h2 class=\"text-2xl font-semibold mb-4\">Dashboard</h2>\r\n\r\n    <div class=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6\">\r\n      <div class=\"p-4 bg-white shadow rounded\">\r\n        <div class=\"text-sm text-gray-500\">Total members</div>\r\n        <div class=\"text-2xl font-bold\">{{ stats.total_members ?? '-' }}</div>\r\n      </div>\r\n      <div class=\"p-4 bg-white shadow rounded\">\r\n        <div class=\"text-sm text-gray-500\">Total families</div>\r\n        <div class=\"text-2xl font-bold\">{{ stats.total_families ?? '-' }}</div>\r\n      </div>\r\n      <div class=\"p-4 bg-white shadow rounded\">\r\n        <div class=\"text-sm text-gray-500\">Evacuation Areas</div>\r\n        <div class=\"text-2xl font-bold\">{{ stats.total_evacuation_areas ?? '-' }}</div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6\">\r\n      <div class=\"p-4 bg-white shadow rounded\">\r\n        <div class=\"text-sm text-gray-500\">Available evacuation areas</div>\r\n        <div class=\"text-2xl font-bold\">{{ stats.available_evacuation_areas ?? '-' }}</div>\r\n      </div>\r\n      <div class=\"p-4 bg-white shadow rounded\">\r\n        <div class=\"text-sm text-gray-500\">Total facilities</div>\r\n        <div class=\"text-2xl font-bold\">{{ stats.total_facilities ?? '-' }}</div>\r\n      </div>\r\n      <div class=\"p-4 bg-white shadow rounded\">\r\n        <div class=\"text-sm text-gray-500\">Operational facilities</div>\r\n        <div class=\"text-2xl font-bold\">{{ stats.operational_facilities ?? '-' }}</div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"mb-6\">\r\n      <div class=\"p-4 bg-white shadow rounded\">\r\n        <div class=\"text-sm text-gray-500\">Active predictions</div>\r\n        <div class=\"text-2xl font-bold\">{{ stats.active_predictions ?? '-' }}</div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"grid grid-cols-1 lg:grid-cols-3 gap-4\">\r\n      <div class=\"p-4 bg-white shadow rounded\">\r\n        <h3 class=\"font-semibold mb-2\">Evacuation Areas</h3>\r\n        <canvas id=\"evacuationChart\"></canvas>\r\n      </div>\r\n\r\n      <div class=\"p-4 bg-white shadow rounded\">\r\n        <h3 class=\"font-semibold mb-2\">Facility Status</h3>\r\n        <canvas id=\"facilityChart\"></canvas>\r\n      </div>\r\n\r\n      <div class=\"p-4 bg-white shadow rounded\">\r\n        <h3 class=\"font-semibold mb-2\">Family Status</h3>\r\n        <canvas id=\"familyChart\"></canvas>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport api from '../services/api';\r\nimport { Chart, registerables } from 'chart.js';\r\n\r\nChart.register(...registerables);\r\n\r\nconst stats = ref({});\r\n\r\nasync function loadDashboard() {\r\n  try {\r\n    const res = await api.get('/dashboard');\r\n    if (res && res.data) {\r\n      // assume controller returns object { stats: {...}, evacuationAreaData: [], facilityStatusData: [], familyStatusData: [] }\r\n      const body = res.data;\r\n      if (body.stats) stats.value = body.stats;\r\n\r\n      // build charts\r\n      if (body.evacuationAreaData) buildEvacuationChart(body.evacuationAreaData);\r\n      if (body.facilityStatusData) buildFacilityChart(body.facilityStatusData);\r\n      if (body.familyStatusData) buildFamilyChart(body.familyStatusData);\r\n    }\r\n  } catch (e) {\r\n    console.error('dashboard load failed', e);\r\n  }\r\n}\r\n\r\nfunction buildEvacuationChart(data) {\r\n  const ctx = document.getElementById('evacuationChart');\r\n  if (!ctx) return;\r\n  const labels = data.map(d => d.name);\r\n  const occupancy = data.map(d => d.current_occupancy);\r\n  const capacity = data.map(d => d.capacity);\r\n  new Chart(ctx, {\r\n    type: 'bar',\r\n    data: {\r\n      labels,\r\n      datasets: [\r\n        { label: 'Current Occupancy', data: occupancy, backgroundColor: '#0d6efd' },\r\n        { label: 'Capacity', data: capacity, backgroundColor: '#6c757d' }\r\n      ]\r\n    }\r\n  });\r\n}\r\n\r\nfunction buildFacilityChart(data) {\r\n  const ctx = document.getElementById('facilityChart');\r\n  if (!ctx) return;\r\n  const labels = data.map(d => d.status);\r\n  const counts = data.map(d => d.count);\r\n  new Chart(ctx, {\r\n    type: 'doughnut',\r\n    data: {\r\n      labels,\r\n      datasets: [{ data: counts, backgroundColor: ['#198754', '#ffc107', '#dc3545', '#0d6efd'] }]\r\n    }\r\n  });\r\n}\r\n\r\nfunction buildFamilyChart(data) {\r\n  const ctx = document.getElementById('familyChart');\r\n  if (!ctx) return;\r\n  const labels = data.map(d => d.status);\r\n  const counts = data.map(d => d.count);\r\n  new Chart(ctx, {\r\n    type: 'pie',\r\n    data: { labels, datasets: [{ data: counts, backgroundColor: ['#0d6efd', '#6f42c1', '#fd7e14'] }] }\r\n  });\r\n}\r\n\r\nonMounted(() => {\r\n  loadDashboard();\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.grid { gap: 1rem; }\r\n</style>\r\n"],"mappings":";;EAISA,KAAK,EAAC;AAA4C;;EAChDA,KAAK,EAAC;AAA6B;;EAEjCA,KAAK,EAAC;AAAoB;;EAE5BA,KAAK,EAAC;AAA6B;;EAEjCA,KAAK,EAAC;AAAoB;;EAE5BA,KAAK,EAAC;AAA6B;;EAEjCA,KAAK,EAAC;AAAoB;;EAI9BA,KAAK,EAAC;AAA4C;;EAChDA,KAAK,EAAC;AAA6B;;EAEjCA,KAAK,EAAC;AAAoB;;EAE5BA,KAAK,EAAC;AAA6B;;EAEjCA,KAAK,EAAC;AAAoB;;EAE5BA,KAAK,EAAC;AAA6B;;EAEjCA,KAAK,EAAC;AAAoB;;EAI9BA,KAAK,EAAC;AAAM;;EACVA,KAAK,EAAC;AAA6B;;EAEjCA,KAAK,EAAC;AAAoB;;uBApCrCC,mBAAA,CAwDM,c,0BAvDJC,mBAAA,CAAsD;IAAlDF,KAAK,EAAC;EAA6B,GAAC,WAAS,qBAEjDE,mBAAA,CAaM,OAbNC,UAaM,GAZJD,mBAAA,CAGM,OAHNE,UAGM,G,0BAFJF,mBAAA,CAAsD;IAAjDF,KAAK,EAAC;EAAuB,GAAC,eAAa,qBAChDE,mBAAA,CAAsE,OAAtEG,UAAsE,EAAAC,gBAAA,CAAnCC,MAAA,CAAAC,KAAK,CAACC,aAAa,wB,GAExDP,mBAAA,CAGM,OAHNQ,UAGM,G,0BAFJR,mBAAA,CAAuD;IAAlDF,KAAK,EAAC;EAAuB,GAAC,gBAAc,qBACjDE,mBAAA,CAAuE,OAAvES,UAAuE,EAAAL,gBAAA,CAApCC,MAAA,CAAAC,KAAK,CAACI,cAAc,wB,GAEzDV,mBAAA,CAGM,OAHNW,UAGM,G,0BAFJX,mBAAA,CAAyD;IAApDF,KAAK,EAAC;EAAuB,GAAC,kBAAgB,qBACnDE,mBAAA,CAA+E,OAA/EY,UAA+E,EAAAR,gBAAA,CAA5CC,MAAA,CAAAC,KAAK,CAACO,sBAAsB,wB,KAInEb,mBAAA,CAaM,OAbNc,UAaM,GAZJd,mBAAA,CAGM,OAHNe,UAGM,G,0BAFJf,mBAAA,CAAmE;IAA9DF,KAAK,EAAC;EAAuB,GAAC,4BAA0B,qBAC7DE,mBAAA,CAAmF,OAAnFgB,WAAmF,EAAAZ,gBAAA,CAAhDC,MAAA,CAAAC,KAAK,CAACW,0BAA0B,wB,GAErEjB,mBAAA,CAGM,OAHNkB,WAGM,G,0BAFJlB,mBAAA,CAAyD;IAApDF,KAAK,EAAC;EAAuB,GAAC,kBAAgB,qBACnDE,mBAAA,CAAyE,OAAzEmB,WAAyE,EAAAf,gBAAA,CAAtCC,MAAA,CAAAC,KAAK,CAACc,gBAAgB,wB,GAE3DpB,mBAAA,CAGM,OAHNqB,WAGM,G,0BAFJrB,mBAAA,CAA+D;IAA1DF,KAAK,EAAC;EAAuB,GAAC,wBAAsB,qBACzDE,mBAAA,CAA+E,OAA/EsB,WAA+E,EAAAlB,gBAAA,CAA5CC,MAAA,CAAAC,KAAK,CAACiB,sBAAsB,wB,KAInEvB,mBAAA,CAKM,OALNwB,WAKM,GAJJxB,mBAAA,CAGM,OAHNyB,WAGM,G,0BAFJzB,mBAAA,CAA2D;IAAtDF,KAAK,EAAC;EAAuB,GAAC,oBAAkB,qBACrDE,mBAAA,CAA2E,OAA3E0B,WAA2E,EAAAtB,gBAAA,CAAxCC,MAAA,CAAAC,KAAK,CAACqB,kBAAkB,wB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}