{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { ref, onMounted, watch } from 'vue';\nimport api from '../services/api';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport { useRoute, useRouter } from 'vue-router';\nexport default {\n  __name: 'PredictionEdit',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const route = useRoute();\n    const router = useRouter();\n    const id = route.params.id;\n    const form = ref({\n      disaster_type: '',\n      description: '',\n      severity: '',\n      location_name: '',\n      latitude: 14.5995,\n      longitude: 120.9842,\n      risk_level: null,\n      predicted_recovery_days: null,\n      predicted_at: '',\n      valid_until: '',\n      affected_areas: ''\n    });\n    let map, marker;\n    async function load() {\n      try {\n        const res = await api.get(`/disaster-predictions/${id}`);\n        Object.assign(form.value, res.data);\n      } catch (e) {\n        console.error('Failed to load prediction', e);\n      }\n    }\n    onMounted(async () => {\n      await load();\n      const lat = parseFloat(form.value.latitude) || 14.5995;\n      const lng = parseFloat(form.value.longitude) || 120.9842;\n      map = L.map('map_edit').setView([lat, lng], 11);\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);\n      marker = L.marker([lat, lng], {\n        draggable: true\n      }).addTo(map);\n      marker.on('dragend', () => {\n        const pos = marker.getLatLng();\n        form.value.latitude = parseFloat(pos.lat.toFixed(6));\n        form.value.longitude = parseFloat(pos.lng.toFixed(6));\n      });\n      map.on('click', e => {\n        marker.setLatLng(e.latlng);\n        form.value.latitude = parseFloat(e.latlng.lat.toFixed(6));\n        form.value.longitude = parseFloat(e.latlng.lng.toFixed(6));\n      });\n      map.invalidateSize();\n    });\n\n    // Watch manual input changes\n    watch(() => [form.value.latitude, form.value.longitude], ([lat, lng]) => {\n      if (marker) marker.setLatLng([lat || 0, lng || 0]);\n    });\n    async function submit() {\n      try {\n        await api.put(`/disaster-predictions/${id}`, {\n          ...form.value\n        });\n        router.push({\n          name: 'Predictions'\n        });\n      } catch (e) {\n        console.error('Update failed', e);\n        alert('Update failed');\n      }\n    }\n    const __returned__ = {\n      route,\n      router,\n      id,\n      form,\n      get map() {\n        return map;\n      },\n      set map(v) {\n        map = v;\n      },\n      get marker() {\n        return marker;\n      },\n      set marker(v) {\n        marker = v;\n      },\n      load,\n      submit,\n      ref,\n      onMounted,\n      watch,\n      get api() {\n        return api;\n      },\n      get L() {\n        return L;\n      },\n      get useRoute() {\n        return useRoute;\n      },\n      get useRouter() {\n        return useRouter;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","watch","api","L","useRoute","useRouter","route","router","id","params","form","disaster_type","description","severity","location_name","latitude","longitude","risk_level","predicted_recovery_days","predicted_at","valid_until","affected_areas","map","marker","load","res","get","Object","assign","value","data","e","console","error","lat","parseFloat","lng","setView","tileLayer","addTo","draggable","on","pos","getLatLng","toFixed","setLatLng","latlng","invalidateSize","submit","put","push","name","alert"],"sources":["C:/VUEprojects/crud-app/src/pages/PredictionEdit.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <!-- Header -->\r\n    <div class=\"header\">\r\n      <div>\r\n        <h1>Edit Prediction</h1>\r\n        <p class=\"text-gray-600 mt-1\">Modify existing disaster prediction</p>\r\n      </div>\r\n      <router-link to=\"/predictions\" class=\"back-link\">\r\n        <span class=\"arrow\">&#8592;</span> Back to Predictions\r\n      </router-link>\r\n    </div>\r\n\r\n```\r\n<!-- Form Card -->\r\n<div class=\"card\">\r\n  <form @submit.prevent=\"submit\" class=\"space-y-6\">\r\n    <!-- Disaster Type & Description -->\r\n    <div>\r\n      <label class=\"label\">Disaster Type <span class=\"text-red-500\">*</span></label>\r\n      <input v-model=\"form.disaster_type\" type=\"text\" required class=\"input-field\" />\r\n    </div>\r\n    <div>\r\n      <label class=\"label\">Description</label>\r\n      <textarea v-model=\"form.description\" rows=\"3\" class=\"input-field\"></textarea>\r\n    </div>\r\n\r\n    <!-- Location & Coordinates -->\r\n    <div class=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n      <div>\r\n        <label class=\"label\">Location Name</label>\r\n        <input v-model=\"form.location_name\" class=\"input-field\" />\r\n      </div>\r\n      <div>\r\n        <label class=\"label\">Latitude</label>\r\n        <input type=\"number\" step=\"0.000001\" v-model.number=\"form.latitude\" class=\"input-field\" />\r\n      </div>\r\n      <div>\r\n        <label class=\"label\">Longitude</label>\r\n        <input type=\"number\" step=\"0.000001\" v-model.number=\"form.longitude\" class=\"input-field\" />\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Risk, Recovery & Predicted At -->\r\n    <div class=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n      <div>\r\n        <label class=\"label\">Risk Level</label>\r\n        <input type=\"number\" v-model.number=\"form.risk_level\" min=\"1\" max=\"10\" class=\"input-field\" />\r\n      </div>\r\n      <div>\r\n        <label class=\"label\">Estimated Recovery Days</label>\r\n        <input type=\"number\" v-model.number=\"form.predicted_recovery_days\" min=\"0\" class=\"input-field\" />\r\n      </div>\r\n      <div>\r\n        <label class=\"label\">Predicted At</label>\r\n        <input type=\"datetime-local\" v-model=\"form.predicted_at\" class=\"input-field\" />\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Map -->\r\n    <div>\r\n      <label class=\"label\">Select Location on Map</label>\r\n      <div id=\"map_edit\" class=\"map-box mb-2\"></div>\r\n    </div>\r\n\r\n    <!-- Affected Areas -->\r\n    <div>\r\n      <label class=\"label\">Affected Areas</label>\r\n      <input v-model=\"form.affected_areas\" class=\"input-field\" />\r\n    </div>\r\n\r\n    <!-- Actions -->\r\n    <div class=\"form-actions\">\r\n      <router-link to=\"/predictions\" class=\"cancel-btn\">Cancel</router-link>\r\n      <button type=\"submit\" class=\"submit-btn\">Update Prediction</button>\r\n    </div>\r\n  </form>\r\n</div>\r\n```\r\n\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, watch } from 'vue'\r\nimport api from '../services/api'\r\nimport L from 'leaflet'\r\nimport 'leaflet/dist/leaflet.css'\r\nimport { useRoute, useRouter } from 'vue-router'\r\n\r\nconst route = useRoute()\r\nconst router = useRouter()\r\nconst id = route.params.id\r\n\r\nconst form = ref({\r\n  disaster_type: '',\r\n  description: '',\r\n  severity: '',\r\n  location_name: '',\r\n  latitude: 14.5995,\r\n  longitude: 120.9842,\r\n  risk_level: null,\r\n  predicted_recovery_days: null,\r\n  predicted_at: '',\r\n  valid_until: '',\r\n  affected_areas: ''\r\n})\r\n\r\nlet map, marker\r\n\r\nasync function load() {\r\n  try {\r\n    const res = await api.get(`/disaster-predictions/${id}`)\r\n    Object.assign(form.value, res.data)\r\n  } catch (e) {\r\n    console.error('Failed to load prediction', e)\r\n  }\r\n}\r\n\r\nonMounted(async () => {\r\n  await load()\r\n  const lat = parseFloat(form.value.latitude) || 14.5995\r\n  const lng = parseFloat(form.value.longitude) || 120.9842\r\n\r\n  map = L.map('map_edit').setView([lat, lng], 11)\r\n  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map)\r\n\r\n  marker = L.marker([lat, lng], { draggable: true }).addTo(map)\r\n\r\n  marker.on('dragend', () => {\r\n    const pos = marker.getLatLng()\r\n    form.value.latitude = parseFloat(pos.lat.toFixed(6))\r\n    form.value.longitude = parseFloat(pos.lng.toFixed(6))\r\n  })\r\n\r\n  map.on('click', e => {\r\n    marker.setLatLng(e.latlng)\r\n    form.value.latitude = parseFloat(e.latlng.lat.toFixed(6))\r\n    form.value.longitude = parseFloat(e.latlng.lng.toFixed(6))\r\n  })\r\n\r\n  map.invalidateSize()\r\n})\r\n\r\n// Watch manual input changes\r\nwatch(() => [form.value.latitude, form.value.longitude], ([lat, lng]) => {\r\n  if (marker) marker.setLatLng([lat || 0, lng || 0])\r\n})\r\n\r\nasync function submit() {\r\n  try {\r\n    await api.put(`/disaster-predictions/${id}`, { ...form.value })\r\n    router.push({ name: 'Predictions' })\r\n  } catch (e) {\r\n    console.error('Update failed', e)\r\n    alert('Update failed')\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.container { max-width: 900px; margin: 0 auto; padding: 20px; }\r\n.header { display:flex; justify-content:space-between; align-items:center; margin-bottom:25px; }\r\n.header h1 { font-size:2.5rem; font-weight:bold; background:linear-gradient(90deg,#f43f5e,#6366f1); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }\r\n.header p { color:#4b5563; margin-top:4px; }\r\n.back-link { font-weight:500; color:#6366f1; display:flex; align-items:center; gap:5px; }\r\n.back-link:hover { text-decoration:underline; }\r\n\r\n.card { background:linear-gradient(135deg,#eef2ff,#ffffff); border-radius:12px; padding:30px; box-shadow:0 8px 25px rgba(0,0,0,0.1); }\r\n\r\n.label { display:block; font-size:0.875rem; font-weight:500; color:#374151; margin-bottom:6px; }\r\n.input-field { width:100%; padding:10px 14px; border:1px solid #d1d5db; border-radius:10px; outline:none; transition:0.3s; background:#fefeff; }\r\n.input-field:focus { border-color:#6366f1; box-shadow:0 0 0 3px rgba(99,102,241,0.2); }\r\n\r\n.form-actions { display:flex; justify:end; gap:12px; margin-top:16px; }\r\n.cancel-btn { padding:10px 16px; border:1px solid #d1d5db; border-radius:10px; font-weight:500; color:#374151; text-align:center; }\r\n.cancel-btn:hover { background:#f3f4f6; }\r\n.submit-btn { background:linear-gradient(90deg,#6366f1,#f43f5e); color:#fff; padding:10px 16px; border-radius:10px; font-weight:500; transition:0.3s; }\r\n.submit-btn:hover { opacity:0.9; }\r\n\r\n.map-box { height:300px; border-radius:12px; box-shadow:0 4px 15px rgba(0,0,0,0.1); margin-bottom:10px; }\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}