{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { ref, inject, onMounted, nextTick } from 'vue';\nimport axios from 'axios';\nimport { useRouter, useRoute } from 'vue-router';\nexport default {\n  __name: 'FacilityShow',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const router = useRouter();\n    const route = useRoute();\n    const baseUrl = inject('baseUrl', '');\n    const facilityId = route.params.id;\n    const facility = ref({});\n    const generalError = ref('');\n    const loading = ref(true);\n    onMounted(async () => {\n      await fetchFacility();\n      if (facility.value.latitude && facility.value.longitude) {\n        await nextTick();\n        initializeMap();\n      }\n    });\n    async function fetchFacility() {\n      try {\n        const res = await axios.get(`${baseUrl}/api/facilities/${facilityId}`);\n        facility.value = res.data?.data || res.data;\n      } catch (err) {\n        generalError.value = 'Failed to load facility. Please try again.';\n        console.error('Fetch facility error:', err);\n      } finally {\n        loading.value = false;\n      }\n    }\n    function initializeMap() {\n      // Simple map initialization using leaflet if available\n      if (typeof window !== 'undefined' && window.L) {\n        const L = window.L;\n        const map = L.map('map').setView([facility.value.latitude, facility.value.longitude], 13);\n        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);\n        L.marker([facility.value.latitude, facility.value.longitude]).bindPopup(facility.value.name).addTo(map);\n      }\n    }\n    async function deleteFacility() {\n      if (confirm('Are you sure you want to delete this facility? This action cannot be undone.')) {\n        try {\n          await axios.delete(`${baseUrl}/api/facilities/${facilityId}`);\n          router.push('/facilities');\n        } catch (err) {\n          generalError.value = 'Failed to delete facility. Please try again.';\n          console.error('Delete facility error:', err);\n        }\n      }\n    }\n    function statusLabel(status) {\n      const labels = {\n        operational: 'Operational',\n        limited: 'Limited Capacity',\n        offline: 'Offline',\n        emergency: 'Emergency'\n      };\n      return labels[status] || status;\n    }\n    function statusBadgeClass(status) {\n      const classes = {\n        operational: 'bg-green-500',\n        limited: 'bg-yellow-500',\n        offline: 'bg-gray-500',\n        emergency: 'bg-red-500'\n      };\n      return classes[status] || 'bg-gray-500';\n    }\n    function formatDate(dateString) {\n      if (!dateString) return '';\n      const date = new Date(dateString);\n      return date.toLocaleDateString('en-US', {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric',\n        hour: '2-digit',\n        minute: '2-digit'\n      });\n    }\n    const __returned__ = {\n      router,\n      route,\n      baseUrl,\n      facilityId,\n      facility,\n      generalError,\n      loading,\n      fetchFacility,\n      initializeMap,\n      deleteFacility,\n      statusLabel,\n      statusBadgeClass,\n      formatDate,\n      ref,\n      inject,\n      onMounted,\n      nextTick,\n      get axios() {\n        return axios;\n      },\n      get useRouter() {\n        return useRouter;\n      },\n      get useRoute() {\n        return useRoute;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","inject","onMounted","nextTick","axios","useRouter","useRoute","router","route","baseUrl","facilityId","params","id","facility","generalError","loading","fetchFacility","value","latitude","longitude","initializeMap","res","get","data","err","console","error","window","L","map","setView","tileLayer","addTo","marker","bindPopup","name","deleteFacility","confirm","delete","push","statusLabel","status","labels","operational","limited","offline","emergency","statusBadgeClass","classes","formatDate","dateString","date","Date","toLocaleDateString","year","month","day","hour","minute"],"sources":["C:/VUEprojects/crud-app/src/pages/FacilityShow.vue"],"sourcesContent":["<template>\r\n  <div class=\"min-h-screen bg-gray-100 p-6\">\r\n    <div class=\"max-w-5xl mx-auto\">\r\n      <!-- Header -->\r\n      <div class=\"mb-8 flex items-center justify-between\">\r\n        <div>\r\n          <h1 class=\"text-4xl font-bold text-gray-900\">Facility Details</h1>\r\n          <p class=\"text-gray-600 mt-1\">View facility information</p>\r\n        </div>\r\n        <router-link to=\"/facilities\" class=\"text-indigo-600 hover:text-indigo-900 font-medium flex items-center gap-1\">\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 19l-7-7 7-7\" />\r\n          </svg>\r\n          Back to Facilities\r\n        </router-link>\r\n      </div>\r\n\r\n      <!-- Loading -->\r\n      <div v-if=\"loading\" class=\"bg-white rounded-lg shadow p-8 text-center\">\r\n        <div class=\"inline-flex items-center gap-2\">\r\n          <svg class=\"animate-spin h-6 w-6 text-indigo-600\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n            <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\r\n            <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8v8z\"></path>\r\n          </svg>\r\n          <span class=\"text-gray-600\">Loading facility...</span>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Error -->\r\n      <div v-else-if=\"generalError\" class=\"bg-white rounded-lg shadow p-8\">\r\n        <div class=\"text-red-800 bg-red-50 border-l-4 border-red-500 px-6 py-4 rounded\">\r\n          <p>{{ generalError }}</p>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Content -->\r\n      <div v-else class=\"space-y-6\">\r\n        <!-- Info Card -->\r\n        <div class=\"bg-white rounded-lg shadow-lg p-8\">\r\n          <div class=\"flex items-center justify-between mb-6\">\r\n            <div>\r\n              <h2 class=\"text-3xl font-bold text-gray-900\">{{ facility.name }}</h2>\r\n              <p class=\"text-gray-600 mt-1\">{{ facility.type }}</p>\r\n            </div>\r\n            <div :class=\"statusBadgeClass(facility.status)\" class=\"px-4 py-2 rounded-full text-white font-medium\">\r\n              {{ statusLabel(facility.status) }}\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Info Grid -->\r\n          <div class=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\r\n            <!-- Left Column -->\r\n            <div class=\"space-y-4\">\r\n              <div class=\"border-b pb-3\">\r\n                <p class=\"text-sm text-gray-500 uppercase tracking-wide\">Address</p>\r\n                <p class=\"text-gray-900 font-medium\">{{ facility.address }}</p>\r\n              </div>\r\n\r\n              <div class=\"border-b pb-3\">\r\n                <p class=\"text-sm text-gray-500 uppercase tracking-wide\">Staff Count</p>\r\n                <p class=\"text-gray-900 font-medium text-lg\">{{ facility.staff_count }} personnel</p>\r\n              </div>\r\n\r\n              <div class=\"border-b pb-3\">\r\n                <p class=\"text-sm text-gray-500 uppercase tracking-wide\">Contact Number</p>\r\n                <p v-if=\"facility.contact_number\" class=\"text-gray-900 font-medium\">{{ facility.contact_number }}</p>\r\n                <p v-else class=\"text-gray-500 italic\">Not provided</p>\r\n              </div>\r\n\r\n              <div class=\"border-b pb-3\">\r\n                <p class=\"text-sm text-gray-500 uppercase tracking-wide\">Location Coordinates</p>\r\n                <p v-if=\"facility.latitude && facility.longitude\" class=\"text-gray-900 font-medium\">\r\n                  {{ facility.latitude.toFixed(6) }}, {{ facility.longitude.toFixed(6) }}\r\n                </p>\r\n                <p v-else class=\"text-gray-500 italic\">Not provided</p>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- Right Column -->\r\n            <div class=\"space-y-4\">\r\n              <div class=\"border-b pb-3\" v-if=\"facility.last_checked\">\r\n                <p class=\"text-sm text-gray-500 uppercase tracking-wide\">Last Checked</p>\r\n                <p class=\"text-gray-900 font-medium\">{{ formatDate(facility.last_checked) }}</p>\r\n              </div>\r\n\r\n              <div class=\"border-b pb-3\">\r\n                <p class=\"text-sm text-gray-500 uppercase tracking-wide\">Resources</p>\r\n                <p v-if=\"facility.resources\" class=\"text-gray-900 font-medium whitespace-pre-wrap\">{{ facility.resources }}</p>\r\n                <p v-else class=\"text-gray-500 italic\">None listed</p>\r\n              </div>\r\n\r\n              <div class=\"border-b pb-3\">\r\n                <p class=\"text-sm text-gray-500 uppercase tracking-wide\">Notes</p>\r\n                <p v-if=\"facility.notes\" class=\"text-gray-900 font-medium whitespace-pre-wrap\">{{ facility.notes }}</p>\r\n                <p v-else class=\"text-gray-500 italic\">No notes</p>\r\n              </div>\r\n\r\n              <div v-if=\"facility.created_at\" class=\"border-b pb-3\">\r\n                <p class=\"text-sm text-gray-500 uppercase tracking-wide\">Created</p>\r\n                <p class=\"text-gray-900 font-medium\">{{ formatDate(facility.created_at) }}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Map Section (if coordinates available) -->\r\n          <div v-if=\"facility.latitude && facility.longitude\" class=\"mt-8 pt-8 border-t\">\r\n            <h3 class=\"text-lg font-bold text-gray-900 mb-4\">Location Map</h3>\r\n            <div id=\"map\" class=\"w-full h-96 rounded-lg border border-gray-300\"></div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Actions -->\r\n        <div class=\"bg-white rounded-lg shadow p-6 flex justify-end gap-3\">\r\n          <router-link :to=\"`/facilities/${facility.id}/edit`\" \r\n            class=\"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium\">\r\n            Edit\r\n          </router-link>\r\n          <button @click=\"deleteFacility\" class=\"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 font-medium\">\r\n            Delete\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, inject, onMounted, nextTick } from 'vue'\r\nimport axios from 'axios'\r\nimport { useRouter, useRoute } from 'vue-router'\r\n\r\nconst router = useRouter()\r\nconst route = useRoute()\r\nconst baseUrl = inject('baseUrl', '')\r\nconst facilityId = route.params.id\r\n\r\nconst facility = ref({})\r\nconst generalError = ref('')\r\nconst loading = ref(true)\r\n\r\nonMounted(async () => {\r\n  await fetchFacility()\r\n  if (facility.value.latitude && facility.value.longitude) {\r\n    await nextTick()\r\n    initializeMap()\r\n  }\r\n})\r\n\r\nasync function fetchFacility() {\r\n  try {\r\n    const res = await axios.get(`${baseUrl}/api/facilities/${facilityId}`)\r\n    facility.value = res.data?.data || res.data\r\n  } catch (err) {\r\n    generalError.value = 'Failed to load facility. Please try again.'\r\n    console.error('Fetch facility error:', err)\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\nfunction initializeMap() {\r\n  // Simple map initialization using leaflet if available\r\n  if (typeof window !== 'undefined' && window.L) {\r\n    const L = window.L\r\n    const map = L.map('map').setView([facility.value.latitude, facility.value.longitude], 13)\r\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map)\r\n    L.marker([facility.value.latitude, facility.value.longitude])\r\n      .bindPopup(facility.value.name)\r\n      .addTo(map)\r\n  }\r\n}\r\n\r\nasync function deleteFacility() {\r\n  if (confirm('Are you sure you want to delete this facility? This action cannot be undone.')) {\r\n    try {\r\n      await axios.delete(`${baseUrl}/api/facilities/${facilityId}`)\r\n      router.push('/facilities')\r\n    } catch (err) {\r\n      generalError.value = 'Failed to delete facility. Please try again.'\r\n      console.error('Delete facility error:', err)\r\n    }\r\n  }\r\n}\r\n\r\nfunction statusLabel(status) {\r\n  const labels = {\r\n    operational: 'Operational',\r\n    limited: 'Limited Capacity',\r\n    offline: 'Offline',\r\n    emergency: 'Emergency'\r\n  }\r\n  return labels[status] || status\r\n}\r\n\r\nfunction statusBadgeClass(status) {\r\n  const classes = {\r\n    operational: 'bg-green-500',\r\n    limited: 'bg-yellow-500',\r\n    offline: 'bg-gray-500',\r\n    emergency: 'bg-red-500'\r\n  }\r\n  return classes[status] || 'bg-gray-500'\r\n}\r\n\r\nfunction formatDate(dateString) {\r\n  if (!dateString) return ''\r\n  const date = new Date(dateString)\r\n  return date.toLocaleDateString('en-US', { \r\n    year: 'numeric', \r\n    month: 'long', \r\n    day: 'numeric',\r\n    hour: '2-digit',\r\n    minute: '2-digit'\r\n  })\r\n}\r\n</script>\r\n"],"mappings":";;;AA+HA,SAASA,GAAG,EAAEC,MAAM,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,KAAK;AACtD,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,SAAS,EAAEC,QAAQ,QAAQ,YAAY;;;;;;;IAEhD,MAAMC,MAAM,GAAGF,SAAS,CAAC,CAAC;IAC1B,MAAMG,KAAK,GAAGF,QAAQ,CAAC,CAAC;IACxB,MAAMG,OAAO,GAAGR,MAAM,CAAC,SAAS,EAAE,EAAE,CAAC;IACrC,MAAMS,UAAU,GAAGF,KAAK,CAACG,MAAM,CAACC,EAAE;IAElC,MAAMC,QAAQ,GAAGb,GAAG,CAAC,CAAC,CAAC,CAAC;IACxB,MAAMc,YAAY,GAAGd,GAAG,CAAC,EAAE,CAAC;IAC5B,MAAMe,OAAO,GAAGf,GAAG,CAAC,IAAI,CAAC;IAEzBE,SAAS,CAAC,YAAY;MACpB,MAAMc,aAAa,CAAC,CAAC;MACrB,IAAIH,QAAQ,CAACI,KAAK,CAACC,QAAQ,IAAIL,QAAQ,CAACI,KAAK,CAACE,SAAS,EAAE;QACvD,MAAMhB,QAAQ,CAAC,CAAC;QAChBiB,aAAa,CAAC,CAAC;MACjB;IACF,CAAC,CAAC;IAEF,eAAeJ,aAAaA,CAAA,EAAG;MAC7B,IAAI;QACF,MAAMK,GAAG,GAAG,MAAMjB,KAAK,CAACkB,GAAG,CAAC,GAAGb,OAAO,mBAAmBC,UAAU,EAAE,CAAC;QACtEG,QAAQ,CAACI,KAAK,GAAGI,GAAG,CAACE,IAAI,EAAEA,IAAI,IAAIF,GAAG,CAACE,IAAI;MAC7C,CAAC,CAAC,OAAOC,GAAG,EAAE;QACZV,YAAY,CAACG,KAAK,GAAG,4CAA4C;QACjEQ,OAAO,CAACC,KAAK,CAAC,uBAAuB,EAAEF,GAAG,CAAC;MAC7C,CAAC,SAAS;QACRT,OAAO,CAACE,KAAK,GAAG,KAAK;MACvB;IACF;IAEA,SAASG,aAAaA,CAAA,EAAG;MACvB;MACA,IAAI,OAAOO,MAAM,KAAK,WAAW,IAAIA,MAAM,CAACC,CAAC,EAAE;QAC7C,MAAMA,CAAC,GAAGD,MAAM,CAACC,CAAC;QAClB,MAAMC,GAAG,GAAGD,CAAC,CAACC,GAAG,CAAC,KAAK,CAAC,CAACC,OAAO,CAAC,CAACjB,QAAQ,CAACI,KAAK,CAACC,QAAQ,EAAEL,QAAQ,CAACI,KAAK,CAACE,SAAS,CAAC,EAAE,EAAE,CAAC;QACzFS,CAAC,CAACG,SAAS,CAAC,oDAAoD,CAAC,CAACC,KAAK,CAACH,GAAG,CAAC;QAC5ED,CAAC,CAACK,MAAM,CAAC,CAACpB,QAAQ,CAACI,KAAK,CAACC,QAAQ,EAAEL,QAAQ,CAACI,KAAK,CAACE,SAAS,CAAC,CAAC,CAC1De,SAAS,CAACrB,QAAQ,CAACI,KAAK,CAACkB,IAAI,CAAC,CAC9BH,KAAK,CAACH,GAAG,CAAC;MACf;IACF;IAEA,eAAeO,cAAcA,CAAA,EAAG;MAC9B,IAAIC,OAAO,CAAC,8EAA8E,CAAC,EAAE;QAC3F,IAAI;UACF,MAAMjC,KAAK,CAACkC,MAAM,CAAC,GAAG7B,OAAO,mBAAmBC,UAAU,EAAE,CAAC;UAC7DH,MAAM,CAACgC,IAAI,CAAC,aAAa,CAAC;QAC5B,CAAC,CAAC,OAAOf,GAAG,EAAE;UACZV,YAAY,CAACG,KAAK,GAAG,8CAA8C;UACnEQ,OAAO,CAACC,KAAK,CAAC,wBAAwB,EAAEF,GAAG,CAAC;QAC9C;MACF;IACF;IAEA,SAASgB,WAAWA,CAACC,MAAM,EAAE;MAC3B,MAAMC,MAAM,GAAG;QACbC,WAAW,EAAE,aAAa;QAC1BC,OAAO,EAAE,kBAAkB;QAC3BC,OAAO,EAAE,SAAS;QAClBC,SAAS,EAAE;MACb,CAAC;MACD,OAAOJ,MAAM,CAACD,MAAM,CAAC,IAAIA,MAAM;IACjC;IAEA,SAASM,gBAAgBA,CAACN,MAAM,EAAE;MAChC,MAAMO,OAAO,GAAG;QACdL,WAAW,EAAE,cAAc;QAC3BC,OAAO,EAAE,eAAe;QACxBC,OAAO,EAAE,aAAa;QACtBC,SAAS,EAAE;MACb,CAAC;MACD,OAAOE,OAAO,CAACP,MAAM,CAAC,IAAI,aAAa;IACzC;IAEA,SAASQ,UAAUA,CAACC,UAAU,EAAE;MAC9B,IAAI,CAACA,UAAU,EAAE,OAAO,EAAE;MAC1B,MAAMC,IAAI,GAAG,IAAIC,IAAI,CAACF,UAAU,CAAC;MACjC,OAAOC,IAAI,CAACE,kBAAkB,CAAC,OAAO,EAAE;QACtCC,IAAI,EAAE,SAAS;QACfC,KAAK,EAAE,MAAM;QACbC,GAAG,EAAE,SAAS;QACdC,IAAI,EAAE,SAAS;QACfC,MAAM,EAAE;MACV,CAAC,CAAC;IACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}